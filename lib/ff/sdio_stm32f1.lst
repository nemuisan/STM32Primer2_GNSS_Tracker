   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 0
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"sdio_stm32f1.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.CmdResp2Error,"ax",%progbits
  19              		.align	1
  20              		.thumb
  21              		.thumb_func
  23              	CmdResp2Error:
  24              	.LFB82:
  25              		.file 1 "lib/ff/sdio_stm32f1.c"
   1:lib/ff/sdio_stm32f1.c **** /********************************************************************************/
   2:lib/ff/sdio_stm32f1.c **** /*!
   3:lib/ff/sdio_stm32f1.c **** 	@file			sdio_stm32f1.c
   4:lib/ff/sdio_stm32f1.c **** 	@author         Nemui Trinomius (http://nemuisan.blog.bai.ne.jp)
   5:lib/ff/sdio_stm32f1.c ****     @version        5.00
   6:lib/ff/sdio_stm32f1.c ****     @date           2012.10.05
   7:lib/ff/sdio_stm32f1.c **** 	@brief          SDIO Driver For STM32 HighDensity Devices				@n
   8:lib/ff/sdio_stm32f1.c **** 					Based on STM32F10x_StdPeriph_Driver V3.4.0.				@n
   9:lib/ff/sdio_stm32f1.c **** 
  10:lib/ff/sdio_stm32f1.c ****     @section HISTORY
  11:lib/ff/sdio_stm32f1.c **** 		2011.01.20	V1.00 Start Here.
  12:lib/ff/sdio_stm32f1.c **** 		2011.03.10	V2.00 C++ Ready.
  13:lib/ff/sdio_stm32f1.c **** 		2012.04.17	V3.00 Added SD_GetCardStatus().
  14:lib/ff/sdio_stm32f1.c **** 		2012.09.22  V4.00 Updated Support grater than 32GB Cards.
  15:lib/ff/sdio_stm32f1.c **** 		2012.10.05  V5.00 Fixed ACMD41 Argument for SDXC(Not UHS-1 mode).
  16:lib/ff/sdio_stm32f1.c **** 
  17:lib/ff/sdio_stm32f1.c ****     @section LICENSE
  18:lib/ff/sdio_stm32f1.c **** 		BSD License. See Copyright.txt
  19:lib/ff/sdio_stm32f1.c **** */
  20:lib/ff/sdio_stm32f1.c **** /********************************************************************************/
  21:lib/ff/sdio_stm32f1.c **** 
  22:lib/ff/sdio_stm32f1.c **** /* Includes ------------------------------------------------------------------*/
  23:lib/ff/sdio_stm32f1.c **** #include "sdio_stm32f1.h"
  24:lib/ff/sdio_stm32f1.c **** 
  25:lib/ff/sdio_stm32f1.c **** /* Defines -------------------------------------------------------------------*/
  26:lib/ff/sdio_stm32f1.c **** /** 
  27:lib/ff/sdio_stm32f1.c ****   * @brief  SDIO Static flags, TimeOut, FIFO Address  
  28:lib/ff/sdio_stm32f1.c ****   */
  29:lib/ff/sdio_stm32f1.c **** #define NULL 0
  30:lib/ff/sdio_stm32f1.c **** #define SDIO_STATIC_FLAGS               ((uint32_t)0x000005FF)
  31:lib/ff/sdio_stm32f1.c **** #define SDIO_CMD0TIMEOUT                ((uint32_t)0x00010000)
  32:lib/ff/sdio_stm32f1.c **** 
  33:lib/ff/sdio_stm32f1.c **** /** 
  34:lib/ff/sdio_stm32f1.c ****   * @brief  Mask for errors Card Status R1 (OCR Register) 
  35:lib/ff/sdio_stm32f1.c ****   */
  36:lib/ff/sdio_stm32f1.c **** #define SD_OCR_ADDR_OUT_OF_RANGE        ((uint32_t)0x80000000)
  37:lib/ff/sdio_stm32f1.c **** #define SD_OCR_ADDR_MISALIGNED          ((uint32_t)0x40000000)
  38:lib/ff/sdio_stm32f1.c **** #define SD_OCR_BLOCK_LEN_ERR            ((uint32_t)0x20000000)
  39:lib/ff/sdio_stm32f1.c **** #define SD_OCR_ERASE_SEQ_ERR            ((uint32_t)0x10000000)
  40:lib/ff/sdio_stm32f1.c **** #define SD_OCR_BAD_ERASE_PARAM          ((uint32_t)0x08000000)
  41:lib/ff/sdio_stm32f1.c **** #define SD_OCR_WRITE_PROT_VIOLATION     ((uint32_t)0x04000000)
  42:lib/ff/sdio_stm32f1.c **** #define SD_OCR_LOCK_UNLOCK_FAILED       ((uint32_t)0x01000000)
  43:lib/ff/sdio_stm32f1.c **** #define SD_OCR_COM_CRC_FAILED           ((uint32_t)0x00800000)
  44:lib/ff/sdio_stm32f1.c **** #define SD_OCR_ILLEGAL_CMD              ((uint32_t)0x00400000)
  45:lib/ff/sdio_stm32f1.c **** #define SD_OCR_CARD_ECC_FAILED          ((uint32_t)0x00200000)
  46:lib/ff/sdio_stm32f1.c **** #define SD_OCR_CC_ERROR                 ((uint32_t)0x00100000)
  47:lib/ff/sdio_stm32f1.c **** #define SD_OCR_GENERAL_UNKNOWN_ERROR    ((uint32_t)0x00080000)
  48:lib/ff/sdio_stm32f1.c **** #define SD_OCR_STREAM_READ_UNDERRUN     ((uint32_t)0x00040000)
  49:lib/ff/sdio_stm32f1.c **** #define SD_OCR_STREAM_WRITE_OVERRUN     ((uint32_t)0x00020000)
  50:lib/ff/sdio_stm32f1.c **** #define SD_OCR_CID_CSD_OVERWRIETE       ((uint32_t)0x00010000)
  51:lib/ff/sdio_stm32f1.c **** #define SD_OCR_WP_ERASE_SKIP            ((uint32_t)0x00008000)
  52:lib/ff/sdio_stm32f1.c **** #define SD_OCR_CARD_ECC_DISABLED        ((uint32_t)0x00004000)
  53:lib/ff/sdio_stm32f1.c **** #define SD_OCR_ERASE_RESET              ((uint32_t)0x00002000)
  54:lib/ff/sdio_stm32f1.c **** #define SD_OCR_AKE_SEQ_ERROR            ((uint32_t)0x00000008)
  55:lib/ff/sdio_stm32f1.c **** #define SD_OCR_ERRORBITS                ((uint32_t)0xFDFFE008)
  56:lib/ff/sdio_stm32f1.c **** 
  57:lib/ff/sdio_stm32f1.c **** /** 
  58:lib/ff/sdio_stm32f1.c ****   * @brief  Masks for R6 Response 
  59:lib/ff/sdio_stm32f1.c ****   */
  60:lib/ff/sdio_stm32f1.c **** #define SD_R6_GENERAL_UNKNOWN_ERROR     ((uint32_t)0x00002000)
  61:lib/ff/sdio_stm32f1.c **** #define SD_R6_ILLEGAL_CMD               ((uint32_t)0x00004000)
  62:lib/ff/sdio_stm32f1.c **** #define SD_R6_COM_CRC_FAILED            ((uint32_t)0x00008000)
  63:lib/ff/sdio_stm32f1.c **** 
  64:lib/ff/sdio_stm32f1.c **** #define SD_VOLTAGE_WINDOW_SD            ((uint32_t)0x80100000)
  65:lib/ff/sdio_stm32f1.c **** #define SD_SDXC_XPC_FULLPOWER         	((uint32_t)0x10000000)	/* Nemui added SDXC MAXIMUM Power   *
  66:lib/ff/sdio_stm32f1.c **** #define SD_SDXC_S18R_REGULAR_VOLT       ((uint32_t)0x00000000)	/* Nemui added SDXC "NO-1.8V" Drive 
  67:lib/ff/sdio_stm32f1.c **** #define SD_HIGH_CAPACITY                ((uint32_t)0x40000000)
  68:lib/ff/sdio_stm32f1.c **** #define SD_STD_CAPACITY                 ((uint32_t)0x00000000)
  69:lib/ff/sdio_stm32f1.c **** #define SD_CHECK_PATTERN                ((uint32_t)0x000001AA)
  70:lib/ff/sdio_stm32f1.c **** 
  71:lib/ff/sdio_stm32f1.c **** #define SD_MAX_VOLT_TRIAL               ((uint32_t)0x0000FFFF)
  72:lib/ff/sdio_stm32f1.c **** #define SD_ALLZERO                      ((uint32_t)0x00000000)
  73:lib/ff/sdio_stm32f1.c **** 
  74:lib/ff/sdio_stm32f1.c **** #define SD_WIDE_BUS_SUPPORT             ((uint32_t)0x00040000)
  75:lib/ff/sdio_stm32f1.c **** #define SD_SINGLE_BUS_SUPPORT           ((uint32_t)0x00010000)
  76:lib/ff/sdio_stm32f1.c **** #define SD_CARD_LOCKED                  ((uint32_t)0x02000000)
  77:lib/ff/sdio_stm32f1.c **** 
  78:lib/ff/sdio_stm32f1.c **** #define SD_DATATIMEOUT                  ((uint32_t)0x000FFFFF)
  79:lib/ff/sdio_stm32f1.c **** #define SD_0TO7BITS                     ((uint32_t)0x000000FF)
  80:lib/ff/sdio_stm32f1.c **** #define SD_8TO15BITS                    ((uint32_t)0x0000FF00)
  81:lib/ff/sdio_stm32f1.c **** #define SD_16TO23BITS                   ((uint32_t)0x00FF0000)
  82:lib/ff/sdio_stm32f1.c **** #define SD_24TO31BITS                   ((uint32_t)0xFF000000)
  83:lib/ff/sdio_stm32f1.c **** #define SD_MAX_DATA_LENGTH              ((uint32_t)0x01FFFFFF)
  84:lib/ff/sdio_stm32f1.c **** 
  85:lib/ff/sdio_stm32f1.c **** #define SD_HALFFIFO                     ((uint32_t)0x00000008)
  86:lib/ff/sdio_stm32f1.c **** #define SD_HALFFIFOBYTES                ((uint32_t)0x00000020)
  87:lib/ff/sdio_stm32f1.c **** 
  88:lib/ff/sdio_stm32f1.c **** /** 
  89:lib/ff/sdio_stm32f1.c ****   * @brief  Command Class Supported 
  90:lib/ff/sdio_stm32f1.c ****   */
  91:lib/ff/sdio_stm32f1.c **** #define SD_CCCC_LOCK_UNLOCK             ((uint32_t)0x00000080)
  92:lib/ff/sdio_stm32f1.c **** #define SD_CCCC_WRITE_PROT              ((uint32_t)0x00000040)
  93:lib/ff/sdio_stm32f1.c **** #define SD_CCCC_ERASE                   ((uint32_t)0x00000020)
  94:lib/ff/sdio_stm32f1.c **** 
  95:lib/ff/sdio_stm32f1.c **** /** 
  96:lib/ff/sdio_stm32f1.c ****   * @brief  Following commands are SD Card Specific commands.
  97:lib/ff/sdio_stm32f1.c ****   *         SDIO_APP_CMD should be sent before sending these commands. 
  98:lib/ff/sdio_stm32f1.c ****   */
  99:lib/ff/sdio_stm32f1.c **** #define SDIO_SEND_IF_COND               ((uint32_t)0x00000008)
 100:lib/ff/sdio_stm32f1.c **** 
 101:lib/ff/sdio_stm32f1.c **** 
 102:lib/ff/sdio_stm32f1.c **** /* Variables -----------------------------------------------------------------*/
 103:lib/ff/sdio_stm32f1.c **** static uint32_t CardType =  SDIO_STD_CAPACITY_SD_CARD_V1_1;
 104:lib/ff/sdio_stm32f1.c **** static uint32_t CSD_Tab[4], CID_Tab[4], RCA = 0;
 105:lib/ff/sdio_stm32f1.c **** static uint8_t SDSTATUS_Tab[16];
 106:lib/ff/sdio_stm32f1.c **** static uint32_t DeviceMode = SD_POLLING_MODE;
 107:lib/ff/sdio_stm32f1.c **** static uint32_t TotalNumberOfBytes = 0, StopCondition = 0;
 108:lib/ff/sdio_stm32f1.c **** uint32_t *SrcBuffer, *DestBuffer;
 109:lib/ff/sdio_stm32f1.c **** __IO SD_Error TransferError = SD_OK;
 110:lib/ff/sdio_stm32f1.c **** __IO uint32_t TransferEnd = 0;
 111:lib/ff/sdio_stm32f1.c **** __IO uint32_t NumberOfBytes = 0;
 112:lib/ff/sdio_stm32f1.c **** SD_CardInfo SDCardInfo;
 113:lib/ff/sdio_stm32f1.c **** SDIO_InitTypeDef SDIO_InitStructure;
 114:lib/ff/sdio_stm32f1.c **** SDIO_CmdInitTypeDef SDIO_CmdInitStructure;
 115:lib/ff/sdio_stm32f1.c **** SDIO_DataInitTypeDef SDIO_DataInitStructure;   
 116:lib/ff/sdio_stm32f1.c **** 
 117:lib/ff/sdio_stm32f1.c **** /* Constants -----------------------------------------------------------------*/
 118:lib/ff/sdio_stm32f1.c **** 
 119:lib/ff/sdio_stm32f1.c **** /* Function prototypes -------------------------------------------------------*/
 120:lib/ff/sdio_stm32f1.c **** static SD_Error CmdError(void);
 121:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp1Error(uint8_t cmd);
 122:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp7Error(void);
 123:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp3Error(void);
 124:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp2Error(void);
 125:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp6Error(uint8_t cmd, uint16_t *prca);
 126:lib/ff/sdio_stm32f1.c **** static SD_Error SDEnWideBus(FunctionalState NewState);
 127:lib/ff/sdio_stm32f1.c **** static SD_Error IsCardProgramming(uint8_t *pstatus);
 128:lib/ff/sdio_stm32f1.c **** static SD_Error FindSCR(uint16_t rca, uint32_t *pscr);
 129:lib/ff/sdio_stm32f1.c **** static uint8_t convert_from_bytes_to_power_of_two(uint16_t NumberOfBytes);
 130:lib/ff/sdio_stm32f1.c **** static void SD_LowLevel_DMA_TxConfig(uint32_t *BufferSRC, uint32_t BufferSize);
 131:lib/ff/sdio_stm32f1.c **** static void SD_LowLevel_DMA_RxConfig(uint32_t *BufferDST, uint32_t BufferSize);
 132:lib/ff/sdio_stm32f1.c **** static uint32_t SD_DMAEndOfTransferStatus(void);
 133:lib/ff/sdio_stm32f1.c **** 
 134:lib/ff/sdio_stm32f1.c **** /* Functions -----------------------------------------------------------------*/
 135:lib/ff/sdio_stm32f1.c **** 
 136:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 137:lib/ff/sdio_stm32f1.c **** /*! 
 138:lib/ff/sdio_stm32f1.c ****     @brief DeInitializes the SDIO interface.
 139:lib/ff/sdio_stm32f1.c **** 	@param  None
 140:lib/ff/sdio_stm32f1.c ****     @retval : None
 141:lib/ff/sdio_stm32f1.c **** */
 142:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 143:lib/ff/sdio_stm32f1.c **** void SD_DeInit(void)
 144:lib/ff/sdio_stm32f1.c **** { 
 145:lib/ff/sdio_stm32f1.c ****   GPIO_InitTypeDef  GPIO_InitStructure;
 146:lib/ff/sdio_stm32f1.c ****   
 147:lib/ff/sdio_stm32f1.c ****   /*!< Disable SDIO Clock */
 148:lib/ff/sdio_stm32f1.c ****   SDIO_ClockCmd(DISABLE);
 149:lib/ff/sdio_stm32f1.c ****   
 150:lib/ff/sdio_stm32f1.c ****   /*!< Set Power State to OFF */
 151:lib/ff/sdio_stm32f1.c ****   SDIO_SetPowerState(SDIO_PowerState_OFF);
 152:lib/ff/sdio_stm32f1.c **** 
 153:lib/ff/sdio_stm32f1.c ****   /*!< DeInitializes the SDIO peripheral */
 154:lib/ff/sdio_stm32f1.c ****   SDIO_DeInit();
 155:lib/ff/sdio_stm32f1.c ****   
 156:lib/ff/sdio_stm32f1.c ****   /*!< Disable the SDIO AHB Clock */
 157:lib/ff/sdio_stm32f1.c ****   RCC_AHBPeriphClockCmd(RCC_AHBPeriph_SDIO, DISABLE);
 158:lib/ff/sdio_stm32f1.c **** 
 159:lib/ff/sdio_stm32f1.c ****   /*!< Configure PC.08, PC.09, PC.10, PC.11, PC.12 pin: D0, D1, D2, D3, CLK pin */
 160:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9 | GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
 161:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;
 162:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOC, &GPIO_InitStructure);
 163:lib/ff/sdio_stm32f1.c **** 
 164:lib/ff/sdio_stm32f1.c ****   /*!< Configure PD.02 CMD line */
 165:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 166:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOD, &GPIO_InitStructure);
 167:lib/ff/sdio_stm32f1.c **** }
 168:lib/ff/sdio_stm32f1.c **** 
 169:lib/ff/sdio_stm32f1.c **** 
 170:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 171:lib/ff/sdio_stm32f1.c **** /*! 
 172:lib/ff/sdio_stm32f1.c ****     @brief  Initializes the SD Card and put it into StandBy State (Ready for data 
 173:lib/ff/sdio_stm32f1.c ****             transfer).
 174:lib/ff/sdio_stm32f1.c **** 	@param  None
 175:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 176:lib/ff/sdio_stm32f1.c **** */
 177:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 178:lib/ff/sdio_stm32f1.c **** SD_Error SD_Init(void)
 179:lib/ff/sdio_stm32f1.c **** {
 180:lib/ff/sdio_stm32f1.c ****   GPIO_InitTypeDef  GPIO_InitStructure;
 181:lib/ff/sdio_stm32f1.c ****   NVIC_InitTypeDef NVIC_InitStructure;
 182:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 183:lib/ff/sdio_stm32f1.c ****  
 184:lib/ff/sdio_stm32f1.c ****   /* SDIO Peripheral Low Level Init */
 185:lib/ff/sdio_stm32f1.c ****   /*!< GPIOC and GPIOD Periph clock enable */
 186:lib/ff/sdio_stm32f1.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC | RCC_APB2Periph_GPIOD | SD_DETECT_GPIO_CLK, ENABLE);
 187:lib/ff/sdio_stm32f1.c **** 
 188:lib/ff/sdio_stm32f1.c ****   /*!< Configure PC.08, PC.09, PC.10, PC.11, PC.12 pin: D0, D1, D2, D3, CLK pin */
 189:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9 | GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
 190:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 191:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
 192:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOC, &GPIO_InitStructure);
 193:lib/ff/sdio_stm32f1.c **** 
 194:lib/ff/sdio_stm32f1.c ****   /*!< Configure PD.02 CMD line */
 195:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 196:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOD, &GPIO_InitStructure);
 197:lib/ff/sdio_stm32f1.c **** 
 198:lib/ff/sdio_stm32f1.c ****   /*!< Configure SD_SPI_DETECT_PIN pin: SD Card detect pin */
 199:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = SD_DETECT_PIN;
 200:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
 201:lib/ff/sdio_stm32f1.c ****   GPIO_Init(SD_DETECT_GPIO_PORT, &GPIO_InitStructure);
 202:lib/ff/sdio_stm32f1.c ****   
 203:lib/ff/sdio_stm32f1.c ****   /*!< Enable the SDIO AHB Clock */
 204:lib/ff/sdio_stm32f1.c ****   RCC_AHBPeriphClockCmd(RCC_AHBPeriph_SDIO, ENABLE);
 205:lib/ff/sdio_stm32f1.c **** 
 206:lib/ff/sdio_stm32f1.c ****   /*!< Enable the DMA2 Clock */
 207:lib/ff/sdio_stm32f1.c ****   RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA2, ENABLE);
 208:lib/ff/sdio_stm32f1.c ****   /* End of LowLevel Init */
 209:lib/ff/sdio_stm32f1.c **** 
 210:lib/ff/sdio_stm32f1.c **** 
 211:lib/ff/sdio_stm32f1.c ****   SDIO_DeInit();
 212:lib/ff/sdio_stm32f1.c **** 
 213:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_PowerON();
 214:lib/ff/sdio_stm32f1.c **** 
 215:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 216:lib/ff/sdio_stm32f1.c ****   {
 217:lib/ff/sdio_stm32f1.c ****     /*!< CMD Response TimeOut (wait for CMDSENT flag) */
 218:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 219:lib/ff/sdio_stm32f1.c ****   }
 220:lib/ff/sdio_stm32f1.c **** 
 221:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_InitializeCards();
 222:lib/ff/sdio_stm32f1.c **** 
 223:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 224:lib/ff/sdio_stm32f1.c ****   {
 225:lib/ff/sdio_stm32f1.c ****     /*!< CMD Response TimeOut (wait for CMDSENT flag) */
 226:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 227:lib/ff/sdio_stm32f1.c ****   }
 228:lib/ff/sdio_stm32f1.c **** 
 229:lib/ff/sdio_stm32f1.c ****   /*!< Configure the SDIO peripheral */
 230:lib/ff/sdio_stm32f1.c ****   /*!< SDIOCLK = HCLK, SDIO_CK = HCLK/(2 + SDIO_TRANSFER_CLK_DIV) */ 
 231:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockDiv = SDIO_TRANSFER_CLK_DIV; 
 232:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 233:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 234:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 235:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_1b;
 236:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 237:lib/ff/sdio_stm32f1.c ****   SDIO_Init(&SDIO_InitStructure);
 238:lib/ff/sdio_stm32f1.c **** 
 239:lib/ff/sdio_stm32f1.c ****   /*!< Enable the SDIO Interrupt */
 240:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannel = SDIO_IRQn;
 241:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 242:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 243:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 244:lib/ff/sdio_stm32f1.c ****   NVIC_Init(&NVIC_InitStructure);
 245:lib/ff/sdio_stm32f1.c **** 
 246:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 247:lib/ff/sdio_stm32f1.c ****   {
 248:lib/ff/sdio_stm32f1.c ****     /*----------------- Read CSD/CID MSD registers ------------------*/
 249:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_GetCardInfo(&SDCardInfo);
 250:lib/ff/sdio_stm32f1.c ****   }
 251:lib/ff/sdio_stm32f1.c **** 
 252:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 253:lib/ff/sdio_stm32f1.c ****   {
 254:lib/ff/sdio_stm32f1.c ****     /*----------------- Select Card --------------------------------*/
 255:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_SelectDeselect((uint32_t) (SDCardInfo.RCA << 16));
 256:lib/ff/sdio_stm32f1.c ****   }
 257:lib/ff/sdio_stm32f1.c **** 
 258:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 259:lib/ff/sdio_stm32f1.c ****   {
 260:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_EnableWideBusOperation(SDIO_BusWide_4b);
 261:lib/ff/sdio_stm32f1.c ****   }  
 262:lib/ff/sdio_stm32f1.c **** 
 263:lib/ff/sdio_stm32f1.c ****   /* Set Device Transfer Mode to DMA */
 264:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 265:lib/ff/sdio_stm32f1.c ****   {  
 266:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_SetDeviceMode(SD_DMA_MODE);
 267:lib/ff/sdio_stm32f1.c ****   }
 268:lib/ff/sdio_stm32f1.c **** 
 269:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 270:lib/ff/sdio_stm32f1.c **** }
 271:lib/ff/sdio_stm32f1.c **** 
 272:lib/ff/sdio_stm32f1.c ****   
 273:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 274:lib/ff/sdio_stm32f1.c **** /*! 
 275:lib/ff/sdio_stm32f1.c ****     @brief  Gets the cuurent sd card data transfer status.
 276:lib/ff/sdio_stm32f1.c **** 	@param  None
 277:lib/ff/sdio_stm32f1.c ****     @retval SDTransferState: Data Transfer state.
 278:lib/ff/sdio_stm32f1.c **** 			This value can be: 
 279:lib/ff/sdio_stm32f1.c **** 			- SD_TRANSFER_OK: No data transfer is acting
 280:lib/ff/sdio_stm32f1.c **** 			- SD_TRANSFER_BUSY: Data transfer is acting
 281:lib/ff/sdio_stm32f1.c **** */
 282:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 283:lib/ff/sdio_stm32f1.c **** SDTransferState SD_GetStatus(void)
 284:lib/ff/sdio_stm32f1.c **** {
 285:lib/ff/sdio_stm32f1.c ****   SDCardState cardstate =  SD_CARD_TRANSFER;
 286:lib/ff/sdio_stm32f1.c **** 
 287:lib/ff/sdio_stm32f1.c ****   cardstate = SD_GetState();
 288:lib/ff/sdio_stm32f1.c ****   
 289:lib/ff/sdio_stm32f1.c ****   if (cardstate == SD_CARD_TRANSFER)
 290:lib/ff/sdio_stm32f1.c ****   {
 291:lib/ff/sdio_stm32f1.c ****     return(SD_TRANSFER_OK);
 292:lib/ff/sdio_stm32f1.c ****   }
 293:lib/ff/sdio_stm32f1.c ****   else if(cardstate == SD_CARD_ERROR)
 294:lib/ff/sdio_stm32f1.c ****   {
 295:lib/ff/sdio_stm32f1.c ****     return (SD_TRANSFER_ERROR);
 296:lib/ff/sdio_stm32f1.c ****   }
 297:lib/ff/sdio_stm32f1.c ****   else
 298:lib/ff/sdio_stm32f1.c ****   {
 299:lib/ff/sdio_stm32f1.c ****     return(SD_TRANSFER_BUSY);
 300:lib/ff/sdio_stm32f1.c ****   }
 301:lib/ff/sdio_stm32f1.c **** }
 302:lib/ff/sdio_stm32f1.c **** 
 303:lib/ff/sdio_stm32f1.c **** 
 304:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 305:lib/ff/sdio_stm32f1.c **** /*! 
 306:lib/ff/sdio_stm32f1.c ****     @brief  Returns the current card's state.
 307:lib/ff/sdio_stm32f1.c **** 	@param  None
 308:lib/ff/sdio_stm32f1.c ****     @retval SDCardState: SD Card Error or SD Card Current State.
 309:lib/ff/sdio_stm32f1.c **** */
 310:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 311:lib/ff/sdio_stm32f1.c **** SDCardState SD_GetState(void)
 312:lib/ff/sdio_stm32f1.c **** {
 313:lib/ff/sdio_stm32f1.c ****   uint32_t resp1 = 0;
 314:lib/ff/sdio_stm32f1.c ****   
 315:lib/ff/sdio_stm32f1.c ****   if(SD_Detect()== SD_PRESENT)
 316:lib/ff/sdio_stm32f1.c ****   {
 317:lib/ff/sdio_stm32f1.c ****     if (SD_SendStatus(&resp1) != SD_OK)
 318:lib/ff/sdio_stm32f1.c ****     {
 319:lib/ff/sdio_stm32f1.c ****       return SD_CARD_ERROR;
 320:lib/ff/sdio_stm32f1.c ****     }
 321:lib/ff/sdio_stm32f1.c ****     else
 322:lib/ff/sdio_stm32f1.c ****     {
 323:lib/ff/sdio_stm32f1.c ****       return (SDCardState)((resp1 >> 9) & 0x0F);
 324:lib/ff/sdio_stm32f1.c ****     }
 325:lib/ff/sdio_stm32f1.c ****   }
 326:lib/ff/sdio_stm32f1.c ****   else
 327:lib/ff/sdio_stm32f1.c ****   {
 328:lib/ff/sdio_stm32f1.c ****     return SD_CARD_ERROR;
 329:lib/ff/sdio_stm32f1.c ****   }
 330:lib/ff/sdio_stm32f1.c **** }
 331:lib/ff/sdio_stm32f1.c **** 
 332:lib/ff/sdio_stm32f1.c **** 
 333:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 334:lib/ff/sdio_stm32f1.c **** /*! 
 335:lib/ff/sdio_stm32f1.c ****     @brief  Detect if SD card is correctly plugged in the memory slot.
 336:lib/ff/sdio_stm32f1.c **** 	@param  None
 337:lib/ff/sdio_stm32f1.c ****     @retval Return if SD is detected or not
 338:lib/ff/sdio_stm32f1.c **** */
 339:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 340:lib/ff/sdio_stm32f1.c **** uint8_t SD_Detect(void)
 341:lib/ff/sdio_stm32f1.c **** {
 342:lib/ff/sdio_stm32f1.c ****   __IO uint8_t status = SD_PRESENT;
 343:lib/ff/sdio_stm32f1.c **** 
 344:lib/ff/sdio_stm32f1.c ****   /*!< Check GPIO to detect SD */
 345:lib/ff/sdio_stm32f1.c ****   /* Nemui added: NO SD_DETECT Pport on@STM32Primer2's MicroSD Card Slot! */
 346:lib/ff/sdio_stm32f1.c ****   /*
 347:lib/ff/sdio_stm32f1.c ****   if (GPIO_ReadInputDataBit(SD_DETECT_GPIO_PORT, SD_DETECT_PIN) != Bit_RESET)
 348:lib/ff/sdio_stm32f1.c ****   {
 349:lib/ff/sdio_stm32f1.c ****     status = SD_NOT_PRESENT;
 350:lib/ff/sdio_stm32f1.c ****   }
 351:lib/ff/sdio_stm32f1.c ****   */
 352:lib/ff/sdio_stm32f1.c ****   return status;
 353:lib/ff/sdio_stm32f1.c **** }
 354:lib/ff/sdio_stm32f1.c **** 
 355:lib/ff/sdio_stm32f1.c **** 
 356:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 357:lib/ff/sdio_stm32f1.c **** /*! 
 358:lib/ff/sdio_stm32f1.c ****     @brief  Enquires cards about their operating voltage and configures 
 359:lib/ff/sdio_stm32f1.c **** 			clock controls.
 360:lib/ff/sdio_stm32f1.c **** 	@param  None
 361:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 362:lib/ff/sdio_stm32f1.c **** */
 363:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 364:lib/ff/sdio_stm32f1.c **** SD_Error SD_PowerON(void)
 365:lib/ff/sdio_stm32f1.c **** {
 366:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 367:lib/ff/sdio_stm32f1.c ****   uint32_t response = 0, count = 0, validvoltage = 0;
 368:lib/ff/sdio_stm32f1.c ****   uint32_t SDType = SD_STD_CAPACITY;
 369:lib/ff/sdio_stm32f1.c **** 
 370:lib/ff/sdio_stm32f1.c ****   /*!< Power ON Sequence -----------------------------------------------------*/
 371:lib/ff/sdio_stm32f1.c ****   /*!< Configure the SDIO peripheral */
 372:lib/ff/sdio_stm32f1.c ****   /*!< SDIOCLK = HCLK, SDIO_CK = HCLK/(2 + SDIO_INIT_CLK_DIV) */
 373:lib/ff/sdio_stm32f1.c ****   /*!< SDIO_CK for initialization should not exceed 400 KHz */  
 374:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockDiv = SDIO_INIT_CLK_DIV;
 375:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 376:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 377:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 378:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_1b;
 379:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 380:lib/ff/sdio_stm32f1.c ****   SDIO_Init(&SDIO_InitStructure);
 381:lib/ff/sdio_stm32f1.c **** 
 382:lib/ff/sdio_stm32f1.c ****   /*!< Set Power State to ON */
 383:lib/ff/sdio_stm32f1.c ****   SDIO_SetPowerState(SDIO_PowerState_ON);
 384:lib/ff/sdio_stm32f1.c **** 
 385:lib/ff/sdio_stm32f1.c ****   /*!< Enable SDIO Clock */
 386:lib/ff/sdio_stm32f1.c ****   SDIO_ClockCmd(ENABLE);
 387:lib/ff/sdio_stm32f1.c **** 
 388:lib/ff/sdio_stm32f1.c ****   /*!< CMD0: GO_IDLE_STATE ---------------------------------------------------*/
 389:lib/ff/sdio_stm32f1.c ****   /*!< No CMD response required */
 390:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 391:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_GO_IDLE_STATE;
 392:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_No;
 393:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 394:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 395:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 396:lib/ff/sdio_stm32f1.c **** 
 397:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdError();
 398:lib/ff/sdio_stm32f1.c **** 
 399:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 400:lib/ff/sdio_stm32f1.c ****   {
 401:lib/ff/sdio_stm32f1.c ****     /*!< CMD Response TimeOut (wait for CMDSENT flag) */
 402:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 403:lib/ff/sdio_stm32f1.c ****   }
 404:lib/ff/sdio_stm32f1.c **** 
 405:lib/ff/sdio_stm32f1.c ****   /*!< CMD8: SEND_IF_COND ----------------------------------------------------*/
 406:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD8 to verify SD card interface operating condition */
 407:lib/ff/sdio_stm32f1.c ****   /*!< Argument: - [31:12]: Reserved (shall be set to '0')
 408:lib/ff/sdio_stm32f1.c ****                - [11:8]: Supply Voltage (VHS) 0x1 (Range: 2.7-3.6 V)
 409:lib/ff/sdio_stm32f1.c ****                - [7:0]: Check Pattern (recommended 0xAA) */
 410:lib/ff/sdio_stm32f1.c ****   /*!< CMD Response: R7 */
 411:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = SD_CHECK_PATTERN;
 412:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SDIO_SEND_IF_COND;
 413:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 414:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 415:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 416:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 417:lib/ff/sdio_stm32f1.c **** 
 418:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp7Error();
 419:lib/ff/sdio_stm32f1.c **** 
 420:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 421:lib/ff/sdio_stm32f1.c ****   {
 422:lib/ff/sdio_stm32f1.c ****     CardType = SDIO_STD_CAPACITY_SD_CARD_V2_0; /*!< SD Card 2.0 */
 423:lib/ff/sdio_stm32f1.c ****     SDType = SD_HIGH_CAPACITY;
 424:lib/ff/sdio_stm32f1.c ****   }
 425:lib/ff/sdio_stm32f1.c ****   else
 426:lib/ff/sdio_stm32f1.c ****   {
 427:lib/ff/sdio_stm32f1.c ****     /*!< CMD55 */
 428:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 429:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 430:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 431:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 432:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 433:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 434:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 435:lib/ff/sdio_stm32f1.c ****   }
 436:lib/ff/sdio_stm32f1.c ****   /*!< CMD55 */
 437:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 438:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 439:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 440:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 441:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 442:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 443:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 444:lib/ff/sdio_stm32f1.c **** 
 445:lib/ff/sdio_stm32f1.c ****   /*!< If errorstatus is Command TimeOut, it is a MMC card */
 446:lib/ff/sdio_stm32f1.c ****   /*!< If errorstatus is SD_OK it is a SD card: SD card 2.0 (voltage range mismatch)
 447:lib/ff/sdio_stm32f1.c ****      or SD card 1.x */
 448:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 449:lib/ff/sdio_stm32f1.c ****   {
 450:lib/ff/sdio_stm32f1.c ****     /*!< SD CARD */
 451:lib/ff/sdio_stm32f1.c ****     /*!< Send ACMD41 SD_APP_OP_COND with Argument 0x80100000 */
 452:lib/ff/sdio_stm32f1.c ****     while ((!validvoltage) && (count < SD_MAX_VOLT_TRIAL))
 453:lib/ff/sdio_stm32f1.c ****     {
 454:lib/ff/sdio_stm32f1.c **** 
 455:lib/ff/sdio_stm32f1.c ****       /*!< SEND CMD55 APP_CMD with RCA as 0 */
 456:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 457:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 458:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 459:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 460:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 461:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 462:lib/ff/sdio_stm32f1.c **** 
 463:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 464:lib/ff/sdio_stm32f1.c **** 
 465:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 466:lib/ff/sdio_stm32f1.c ****       {
 467:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 468:lib/ff/sdio_stm32f1.c ****       }
 469:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = SD_VOLTAGE_WINDOW_SD  		| \
 470:lib/ff/sdio_stm32f1.c **** 											SD_SDXC_XPC_FULLPOWER 		| \
 471:lib/ff/sdio_stm32f1.c **** 											SD_SDXC_S18R_REGULAR_VOLT	| \
 472:lib/ff/sdio_stm32f1.c **** 											SDType;
 473:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_APP_OP_COND;
 474:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 475:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 476:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 477:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 478:lib/ff/sdio_stm32f1.c **** 
 479:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp3Error();
 480:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 481:lib/ff/sdio_stm32f1.c ****       {
 482:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 483:lib/ff/sdio_stm32f1.c ****       }
 484:lib/ff/sdio_stm32f1.c **** 
 485:lib/ff/sdio_stm32f1.c ****       response = SDIO_GetResponse(SDIO_RESP1);
 486:lib/ff/sdio_stm32f1.c ****       validvoltage = (((response >> 31) == 1) ? 1 : 0);
 487:lib/ff/sdio_stm32f1.c ****       count++;
 488:lib/ff/sdio_stm32f1.c ****     }
 489:lib/ff/sdio_stm32f1.c ****     if (count >= SD_MAX_VOLT_TRIAL)
 490:lib/ff/sdio_stm32f1.c ****     {
 491:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_INVALID_VOLTRANGE;
 492:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 493:lib/ff/sdio_stm32f1.c ****     }
 494:lib/ff/sdio_stm32f1.c **** 
 495:lib/ff/sdio_stm32f1.c ****     if (response &= SD_HIGH_CAPACITY)
 496:lib/ff/sdio_stm32f1.c ****     {
 497:lib/ff/sdio_stm32f1.c ****       CardType = SDIO_HIGH_CAPACITY_SD_CARD;
 498:lib/ff/sdio_stm32f1.c ****     }
 499:lib/ff/sdio_stm32f1.c **** 
 500:lib/ff/sdio_stm32f1.c ****   }/*!< else MMC Card */
 501:lib/ff/sdio_stm32f1.c **** 
 502:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 503:lib/ff/sdio_stm32f1.c **** }
 504:lib/ff/sdio_stm32f1.c **** 
 505:lib/ff/sdio_stm32f1.c **** 
 506:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 507:lib/ff/sdio_stm32f1.c **** /*! 
 508:lib/ff/sdio_stm32f1.c ****     @brief  Turns the SDIO output signals off.
 509:lib/ff/sdio_stm32f1.c **** 	@param  None
 510:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 511:lib/ff/sdio_stm32f1.c **** */
 512:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 513:lib/ff/sdio_stm32f1.c **** SD_Error SD_PowerOFF(void)
 514:lib/ff/sdio_stm32f1.c **** {
 515:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 516:lib/ff/sdio_stm32f1.c **** 
 517:lib/ff/sdio_stm32f1.c ****   /*!< Set Power State to OFF */
 518:lib/ff/sdio_stm32f1.c ****   SDIO_SetPowerState(SDIO_PowerState_OFF);
 519:lib/ff/sdio_stm32f1.c **** 
 520:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 521:lib/ff/sdio_stm32f1.c **** }
 522:lib/ff/sdio_stm32f1.c **** 
 523:lib/ff/sdio_stm32f1.c **** 
 524:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 525:lib/ff/sdio_stm32f1.c **** /*! 
 526:lib/ff/sdio_stm32f1.c ****     @brief  Intialises all cards or single card as the case may be Card(s) come 
 527:lib/ff/sdio_stm32f1.c **** 			into standby state.
 528:lib/ff/sdio_stm32f1.c **** 	@param  None
 529:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 530:lib/ff/sdio_stm32f1.c **** */
 531:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 532:lib/ff/sdio_stm32f1.c **** SD_Error SD_InitializeCards(void)
 533:lib/ff/sdio_stm32f1.c **** {
 534:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 535:lib/ff/sdio_stm32f1.c ****   uint16_t rca = 0x01;
 536:lib/ff/sdio_stm32f1.c **** 
 537:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetPowerState() == SDIO_PowerState_OFF)
 538:lib/ff/sdio_stm32f1.c ****   {
 539:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_REQUEST_NOT_APPLICABLE;
 540:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 541:lib/ff/sdio_stm32f1.c ****   }
 542:lib/ff/sdio_stm32f1.c **** 
 543:lib/ff/sdio_stm32f1.c ****   if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)
 544:lib/ff/sdio_stm32f1.c ****   {
 545:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD2 ALL_SEND_CID */
 546:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 547:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_ALL_SEND_CID;
 548:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Long;
 549:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 550:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 551:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 552:lib/ff/sdio_stm32f1.c **** 
 553:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp2Error();
 554:lib/ff/sdio_stm32f1.c **** 
 555:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 556:lib/ff/sdio_stm32f1.c ****     {
 557:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 558:lib/ff/sdio_stm32f1.c ****     }
 559:lib/ff/sdio_stm32f1.c **** 
 560:lib/ff/sdio_stm32f1.c ****     CID_Tab[0] = SDIO_GetResponse(SDIO_RESP1);
 561:lib/ff/sdio_stm32f1.c ****     CID_Tab[1] = SDIO_GetResponse(SDIO_RESP2);
 562:lib/ff/sdio_stm32f1.c ****     CID_Tab[2] = SDIO_GetResponse(SDIO_RESP3);
 563:lib/ff/sdio_stm32f1.c ****     CID_Tab[3] = SDIO_GetResponse(SDIO_RESP4);
 564:lib/ff/sdio_stm32f1.c ****   }
 565:lib/ff/sdio_stm32f1.c ****   if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) ||  (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType)
 566:lib/ff/sdio_stm32f1.c ****       ||  (SDIO_HIGH_CAPACITY_SD_CARD == CardType))
 567:lib/ff/sdio_stm32f1.c ****   {
 568:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD3 SET_REL_ADDR with argument 0 */
 569:lib/ff/sdio_stm32f1.c ****     /*!< SD Card publishes its RCA. */
 570:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 571:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_REL_ADDR;
 572:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 573:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 574:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 575:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 576:lib/ff/sdio_stm32f1.c **** 
 577:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp6Error(SD_CMD_SET_REL_ADDR, &rca);
 578:lib/ff/sdio_stm32f1.c **** 
 579:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 580:lib/ff/sdio_stm32f1.c ****     {
 581:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 582:lib/ff/sdio_stm32f1.c ****     }
 583:lib/ff/sdio_stm32f1.c ****   }
 584:lib/ff/sdio_stm32f1.c **** 
 585:lib/ff/sdio_stm32f1.c ****   if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)
 586:lib/ff/sdio_stm32f1.c ****   {
 587:lib/ff/sdio_stm32f1.c ****     RCA = rca;
 588:lib/ff/sdio_stm32f1.c **** 
 589:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD9 SEND_CSD with argument as card's RCA */
 590:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)(rca << 16);
 591:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_CSD;
 592:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Long;
 593:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 594:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 595:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 596:lib/ff/sdio_stm32f1.c **** 
 597:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp2Error();
 598:lib/ff/sdio_stm32f1.c **** 
 599:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 600:lib/ff/sdio_stm32f1.c ****     {
 601:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 602:lib/ff/sdio_stm32f1.c ****     }
 603:lib/ff/sdio_stm32f1.c **** 
 604:lib/ff/sdio_stm32f1.c ****     CSD_Tab[0] = SDIO_GetResponse(SDIO_RESP1);
 605:lib/ff/sdio_stm32f1.c ****     CSD_Tab[1] = SDIO_GetResponse(SDIO_RESP2);
 606:lib/ff/sdio_stm32f1.c ****     CSD_Tab[2] = SDIO_GetResponse(SDIO_RESP3);
 607:lib/ff/sdio_stm32f1.c ****     CSD_Tab[3] = SDIO_GetResponse(SDIO_RESP4);
 608:lib/ff/sdio_stm32f1.c ****   }
 609:lib/ff/sdio_stm32f1.c **** 
 610:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_OK; /*!< All cards get intialized */
 611:lib/ff/sdio_stm32f1.c **** 
 612:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 613:lib/ff/sdio_stm32f1.c **** }
 614:lib/ff/sdio_stm32f1.c **** 
 615:lib/ff/sdio_stm32f1.c **** 
 616:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 617:lib/ff/sdio_stm32f1.c **** /*! 
 618:lib/ff/sdio_stm32f1.c ****     @brief  Returns information about specific card.
 619:lib/ff/sdio_stm32f1.c **** 	@param  cardinfo: pointer to a SD_CardInfo structure that contains all SD card 
 620:lib/ff/sdio_stm32f1.c **** 			information.
 621:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 622:lib/ff/sdio_stm32f1.c **** */
 623:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 624:lib/ff/sdio_stm32f1.c **** SD_Error SD_GetCardInfo(SD_CardInfo *cardinfo)
 625:lib/ff/sdio_stm32f1.c **** {
 626:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 627:lib/ff/sdio_stm32f1.c ****   uint8_t tmp = 0;
 628:lib/ff/sdio_stm32f1.c **** 
 629:lib/ff/sdio_stm32f1.c ****   cardinfo->CardType = (uint8_t)CardType;
 630:lib/ff/sdio_stm32f1.c ****   cardinfo->RCA = (uint16_t)RCA;
 631:lib/ff/sdio_stm32f1.c **** 
 632:lib/ff/sdio_stm32f1.c ****   /*!< Byte 0 */
 633:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[0] & 0xFF000000) >> 24);
 634:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CSDStruct = (tmp & 0xC0) >> 6;
 635:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.SysSpecVersion = (tmp & 0x3C) >> 2;
 636:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved1 = tmp & 0x03;
 637:lib/ff/sdio_stm32f1.c **** 
 638:lib/ff/sdio_stm32f1.c ****   /*!< Byte 1 */
 639:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[0] & 0x00FF0000) >> 16);
 640:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.TAAC = tmp;
 641:lib/ff/sdio_stm32f1.c **** 
 642:lib/ff/sdio_stm32f1.c ****   /*!< Byte 2 */
 643:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[0] & 0x0000FF00) >> 8);
 644:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.NSAC = tmp;
 645:lib/ff/sdio_stm32f1.c **** 
 646:lib/ff/sdio_stm32f1.c ****   /*!< Byte 3 */
 647:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CSD_Tab[0] & 0x000000FF);
 648:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.MaxBusClkFrec = tmp;
 649:lib/ff/sdio_stm32f1.c **** 
 650:lib/ff/sdio_stm32f1.c ****   /*!< Byte 4 */
 651:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[1] & 0xFF000000) >> 24);
 652:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CardComdClasses = tmp << 4;
 653:lib/ff/sdio_stm32f1.c **** 
 654:lib/ff/sdio_stm32f1.c ****   /*!< Byte 5 */
 655:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[1] & 0x00FF0000) >> 16);
 656:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CardComdClasses |= (tmp & 0xF0) >> 4;
 657:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.RdBlockLen = tmp & 0x0F;
 658:lib/ff/sdio_stm32f1.c **** 
 659:lib/ff/sdio_stm32f1.c ****   /*!< Byte 6 */
 660:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[1] & 0x0000FF00) >> 8);
 661:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.PartBlockRead = (tmp & 0x80) >> 7;
 662:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrBlockMisalign = (tmp & 0x40) >> 6;
 663:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.RdBlockMisalign = (tmp & 0x20) >> 5;
 664:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.DSRImpl = (tmp & 0x10) >> 4;
 665:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved2 = 0; /*!< Reserved */
 666:lib/ff/sdio_stm32f1.c **** 
 667:lib/ff/sdio_stm32f1.c ****   if ((CardType == SDIO_STD_CAPACITY_SD_CARD_V1_1) || (CardType == SDIO_STD_CAPACITY_SD_CARD_V2_0))
 668:lib/ff/sdio_stm32f1.c ****   {
 669:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize = (tmp & 0x03) << 10;
 670:lib/ff/sdio_stm32f1.c **** 
 671:lib/ff/sdio_stm32f1.c ****     /*!< Byte 7 */
 672:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)(CSD_Tab[1] & 0x000000FF);
 673:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp) << 2;
 674:lib/ff/sdio_stm32f1.c **** 
 675:lib/ff/sdio_stm32f1.c ****     /*!< Byte 8 */
 676:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0xFF000000) >> 24);
 677:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp & 0xC0) >> 6;
 678:lib/ff/sdio_stm32f1.c **** 
 679:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxRdCurrentVDDMin = (tmp & 0x38) >> 3;
 680:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxRdCurrentVDDMax = (tmp & 0x07);
 681:lib/ff/sdio_stm32f1.c **** 
 682:lib/ff/sdio_stm32f1.c ****     /*!< Byte 9 */
 683:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x00FF0000) >> 16);
 684:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxWrCurrentVDDMin = (tmp & 0xE0) >> 5;
 685:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxWrCurrentVDDMax = (tmp & 0x1C) >> 2;
 686:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSizeMul = (tmp & 0x03) << 1;
 687:lib/ff/sdio_stm32f1.c ****     /*!< Byte 10 */
 688:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x0000FF00) >> 8);
 689:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSizeMul |= (tmp & 0x80) >> 7;
 690:lib/ff/sdio_stm32f1.c ****     
 691:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity = (cardinfo->SD_csd.DeviceSize + 1) ;
 692:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity *= (1 << (cardinfo->SD_csd.DeviceSizeMul + 2));
 693:lib/ff/sdio_stm32f1.c ****     cardinfo->CardBlockSize = 1 << (cardinfo->SD_csd.RdBlockLen);
 694:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity *= cardinfo->CardBlockSize;
 695:lib/ff/sdio_stm32f1.c ****   }
 696:lib/ff/sdio_stm32f1.c ****   else if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 697:lib/ff/sdio_stm32f1.c ****   {
 698:lib/ff/sdio_stm32f1.c ****     /*!< Byte 7 */
 699:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)(CSD_Tab[1] & 0x000000FF);
 700:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize = (tmp & 0x3F) << 16;
 701:lib/ff/sdio_stm32f1.c **** 
 702:lib/ff/sdio_stm32f1.c ****     /*!< Byte 8 */
 703:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0xFF000000) >> 24);
 704:lib/ff/sdio_stm32f1.c **** 
 705:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp << 8);
 706:lib/ff/sdio_stm32f1.c **** 
 707:lib/ff/sdio_stm32f1.c ****     /*!< Byte 9 */
 708:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x00FF0000) >> 16);
 709:lib/ff/sdio_stm32f1.c **** 
 710:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp);
 711:lib/ff/sdio_stm32f1.c **** 
 712:lib/ff/sdio_stm32f1.c ****     /*!< Byte 10 */
 713:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x0000FF00) >> 8);
 714:lib/ff/sdio_stm32f1.c ****     /* nemui fixed due to SD2.00 Capacity fomula is Size = (C_SIZE+1)~2^19 */
 715:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity = (uint64_t)(cardinfo->SD_csd.DeviceSize + 1) * 512 * 1024;
 716:lib/ff/sdio_stm32f1.c ****     cardinfo->CardBlockSize = 512;    
 717:lib/ff/sdio_stm32f1.c ****   }
 718:lib/ff/sdio_stm32f1.c **** 
 719:lib/ff/sdio_stm32f1.c **** 
 720:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.EraseGrSize = (tmp & 0x40) >> 6;
 721:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.EraseGrMul = (tmp & 0x3F) << 1;
 722:lib/ff/sdio_stm32f1.c **** 
 723:lib/ff/sdio_stm32f1.c ****   /*!< Byte 11 */
 724:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CSD_Tab[2] & 0x000000FF);
 725:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.EraseGrMul |= (tmp & 0x80) >> 7;
 726:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrProtectGrSize = (tmp & 0x7F);
 727:lib/ff/sdio_stm32f1.c **** 
 728:lib/ff/sdio_stm32f1.c ****   /*!< Byte 12 */
 729:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[3] & 0xFF000000) >> 24);
 730:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrProtectGrEnable = (tmp & 0x80) >> 7;
 731:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.ManDeflECC = (tmp & 0x60) >> 5;
 732:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrSpeedFact = (tmp & 0x1C) >> 2;
 733:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.MaxWrBlockLen = (tmp & 0x03) << 2;
 734:lib/ff/sdio_stm32f1.c **** 
 735:lib/ff/sdio_stm32f1.c ****   /*!< Byte 13 */
 736:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[3] & 0x00FF0000) >> 16);
 737:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.MaxWrBlockLen |= (tmp & 0xC0) >> 6;
 738:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WriteBlockPaPartial = (tmp & 0x20) >> 5;
 739:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved3 = 0;
 740:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.ContentProtectAppli = (tmp & 0x01);
 741:lib/ff/sdio_stm32f1.c **** 
 742:lib/ff/sdio_stm32f1.c ****   /*!< Byte 14 */
 743:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[3] & 0x0000FF00) >> 8);
 744:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.FileFormatGrouop = (tmp & 0x80) >> 7;
 745:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CopyFlag = (tmp & 0x40) >> 6;
 746:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.PermWrProtect = (tmp & 0x20) >> 5;
 747:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.TempWrProtect = (tmp & 0x10) >> 4;
 748:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.FileFormat = (tmp & 0x0C) >> 2;
 749:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.ECC = (tmp & 0x03);
 750:lib/ff/sdio_stm32f1.c **** 
 751:lib/ff/sdio_stm32f1.c ****   /*!< Byte 15 */
 752:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CSD_Tab[3] & 0x000000FF);
 753:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CSD_CRC = (tmp & 0xFE) >> 1;
 754:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved4 = 1;
 755:lib/ff/sdio_stm32f1.c **** 
 756:lib/ff/sdio_stm32f1.c **** 
 757:lib/ff/sdio_stm32f1.c ****   /*!< Byte 0 */
 758:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[0] & 0xFF000000) >> 24);
 759:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufacturerID = tmp;
 760:lib/ff/sdio_stm32f1.c **** 
 761:lib/ff/sdio_stm32f1.c ****   /*!< Byte 1 */
 762:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[0] & 0x00FF0000) >> 16);
 763:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.OEM_AppliID = tmp << 8;
 764:lib/ff/sdio_stm32f1.c **** 
 765:lib/ff/sdio_stm32f1.c ****   /*!< Byte 2 */
 766:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[0] & 0x000000FF00) >> 8);
 767:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.OEM_AppliID |= tmp;
 768:lib/ff/sdio_stm32f1.c **** 
 769:lib/ff/sdio_stm32f1.c ****   /*!< Byte 3 */
 770:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CID_Tab[0] & 0x000000FF);
 771:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 = tmp << 24;
 772:lib/ff/sdio_stm32f1.c **** 
 773:lib/ff/sdio_stm32f1.c ****   /*!< Byte 4 */
 774:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[1] & 0xFF000000) >> 24);
 775:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp << 16;
 776:lib/ff/sdio_stm32f1.c **** 
 777:lib/ff/sdio_stm32f1.c ****   /*!< Byte 5 */
 778:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[1] & 0x00FF0000) >> 16);
 779:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp << 8;
 780:lib/ff/sdio_stm32f1.c **** 
 781:lib/ff/sdio_stm32f1.c ****   /*!< Byte 6 */
 782:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[1] & 0x0000FF00) >> 8);
 783:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp;
 784:lib/ff/sdio_stm32f1.c **** 
 785:lib/ff/sdio_stm32f1.c ****   /*!< Byte 7 */
 786:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CID_Tab[1] & 0x000000FF);
 787:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName2 = tmp;
 788:lib/ff/sdio_stm32f1.c **** 
 789:lib/ff/sdio_stm32f1.c ****   /*!< Byte 8 */
 790:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[2] & 0xFF000000) >> 24);
 791:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdRev = tmp;
 792:lib/ff/sdio_stm32f1.c **** 
 793:lib/ff/sdio_stm32f1.c ****   /*!< Byte 9 */
 794:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[2] & 0x00FF0000) >> 16);
 795:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN = tmp << 24;
 796:lib/ff/sdio_stm32f1.c **** 
 797:lib/ff/sdio_stm32f1.c ****   /*!< Byte 10 */
 798:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[2] & 0x0000FF00) >> 8);
 799:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp << 16;
 800:lib/ff/sdio_stm32f1.c **** 
 801:lib/ff/sdio_stm32f1.c ****   /*!< Byte 11 */
 802:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CID_Tab[2] & 0x000000FF);
 803:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp << 8;
 804:lib/ff/sdio_stm32f1.c **** 
 805:lib/ff/sdio_stm32f1.c ****   /*!< Byte 12 */
 806:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[3] & 0xFF000000) >> 24);
 807:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp;
 808:lib/ff/sdio_stm32f1.c **** 
 809:lib/ff/sdio_stm32f1.c ****   /*!< Byte 13 */
 810:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[3] & 0x00FF0000) >> 16);
 811:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.Reserved1 |= (tmp & 0xF0) >> 4;
 812:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufactDate = (tmp & 0x0F) << 8;
 813:lib/ff/sdio_stm32f1.c **** 
 814:lib/ff/sdio_stm32f1.c ****   /*!< Byte 14 */
 815:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[3] & 0x0000FF00) >> 8);
 816:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufactDate |= tmp;
 817:lib/ff/sdio_stm32f1.c **** 
 818:lib/ff/sdio_stm32f1.c ****   /*!< Byte 15 */
 819:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CID_Tab[3] & 0x000000FF);
 820:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.CID_CRC = (tmp & 0xFE) >> 1;
 821:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.Reserved2 = 1;
 822:lib/ff/sdio_stm32f1.c ****   
 823:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 824:lib/ff/sdio_stm32f1.c **** }
 825:lib/ff/sdio_stm32f1.c **** 
 826:lib/ff/sdio_stm32f1.c **** 
 827:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 828:lib/ff/sdio_stm32f1.c **** /*! 
 829:lib/ff/sdio_stm32f1.c **** 	@brief  Enables wide bus opeartion for the requeseted card if supported by 
 830:lib/ff/sdio_stm32f1.c **** 			card.
 831:lib/ff/sdio_stm32f1.c **** 	@param  WideMode: Specifies the SD card wide bus mode. 
 832:lib/ff/sdio_stm32f1.c **** 		This parameter can be one of the following values:
 833:lib/ff/sdio_stm32f1.c **** 		@arg SDIO_BusWide_8b: 8-bit data transfer (Only for MMC)
 834:lib/ff/sdio_stm32f1.c **** 		@arg SDIO_BusWide_4b: 4-bit data transfer
 835:lib/ff/sdio_stm32f1.c **** 		@arg SDIO_BusWide_1b: 1-bit data transfer
 836:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 837:lib/ff/sdio_stm32f1.c **** */
 838:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 839:lib/ff/sdio_stm32f1.c **** SD_Error SD_EnableWideBusOperation(uint32_t WideMode)
 840:lib/ff/sdio_stm32f1.c **** {
 841:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 842:lib/ff/sdio_stm32f1.c **** 
 843:lib/ff/sdio_stm32f1.c ****   /*!< MMC Card doesn't support this feature */
 844:lib/ff/sdio_stm32f1.c ****   if (SDIO_MULTIMEDIA_CARD == CardType)
 845:lib/ff/sdio_stm32f1.c ****   {
 846:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_UNSUPPORTED_FEATURE;
 847:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 848:lib/ff/sdio_stm32f1.c ****   }
 849:lib/ff/sdio_stm32f1.c ****   else if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardT
 850:lib/ff/sdio_stm32f1.c ****   {
 851:lib/ff/sdio_stm32f1.c ****     if (SDIO_BusWide_8b == WideMode)
 852:lib/ff/sdio_stm32f1.c ****     {
 853:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_UNSUPPORTED_FEATURE;
 854:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 855:lib/ff/sdio_stm32f1.c ****     }
 856:lib/ff/sdio_stm32f1.c ****     else if (SDIO_BusWide_4b == WideMode)
 857:lib/ff/sdio_stm32f1.c ****     {
 858:lib/ff/sdio_stm32f1.c ****       errorstatus = SDEnWideBus(ENABLE);
 859:lib/ff/sdio_stm32f1.c **** 
 860:lib/ff/sdio_stm32f1.c ****       if (SD_OK == errorstatus)
 861:lib/ff/sdio_stm32f1.c ****       {
 862:lib/ff/sdio_stm32f1.c ****         /*!< Configure the SDIO peripheral */
 863:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockDiv = SDIO_TRANSFER_CLK_DIV; 
 864:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 865:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 866:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 867:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_4b;
 868:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 869:lib/ff/sdio_stm32f1.c ****         SDIO_Init(&SDIO_InitStructure);
 870:lib/ff/sdio_stm32f1.c ****       }
 871:lib/ff/sdio_stm32f1.c ****     }
 872:lib/ff/sdio_stm32f1.c ****     else
 873:lib/ff/sdio_stm32f1.c ****     {
 874:lib/ff/sdio_stm32f1.c ****       errorstatus = SDEnWideBus(DISABLE);
 875:lib/ff/sdio_stm32f1.c **** 
 876:lib/ff/sdio_stm32f1.c ****       if (SD_OK == errorstatus)
 877:lib/ff/sdio_stm32f1.c ****       {
 878:lib/ff/sdio_stm32f1.c ****         /*!< Configure the SDIO peripheral */
 879:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockDiv = SDIO_TRANSFER_CLK_DIV; 
 880:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 881:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 882:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 883:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_1b;
 884:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 885:lib/ff/sdio_stm32f1.c ****         SDIO_Init(&SDIO_InitStructure);
 886:lib/ff/sdio_stm32f1.c ****       }
 887:lib/ff/sdio_stm32f1.c ****     }
 888:lib/ff/sdio_stm32f1.c ****   }
 889:lib/ff/sdio_stm32f1.c **** 
 890:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 891:lib/ff/sdio_stm32f1.c **** }
 892:lib/ff/sdio_stm32f1.c **** 
 893:lib/ff/sdio_stm32f1.c **** 
 894:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 895:lib/ff/sdio_stm32f1.c **** /*! 
 896:lib/ff/sdio_stm32f1.c **** 	@brief  Sets device mode whether to operate in Polling, Interrupt or DMA mode.
 897:lib/ff/sdio_stm32f1.c **** 	@param  Mode: Specifies the Data Transfer mode.
 898:lib/ff/sdio_stm32f1.c **** 		This parameter can be one of the following values:
 899:lib/ff/sdio_stm32f1.c **** 		@arg SD_DMA_MODE: Data transfer using DMA.
 900:lib/ff/sdio_stm32f1.c **** 		@arg SD_INTERRUPT_MODE: Data transfer using interrupts.
 901:lib/ff/sdio_stm32f1.c **** 		@arg SD_POLLING_MODE: Data transfer using flags.
 902:lib/ff/sdio_stm32f1.c ****     @retval SD_Error: SD Card Error code.
 903:lib/ff/sdio_stm32f1.c **** */
 904:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 905:lib/ff/sdio_stm32f1.c **** SD_Error SD_SetDeviceMode(uint32_t Mode)
 906:lib/ff/sdio_stm32f1.c **** {
 907:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 908:lib/ff/sdio_stm32f1.c **** 
 909:lib/ff/sdio_stm32f1.c ****   if ((Mode == SD_DMA_MODE) || (Mode == SD_INTERRUPT_MODE) || (Mode == SD_POLLING_MODE))
 910:lib/ff/sdio_stm32f1.c ****   {
 911:lib/ff/sdio_stm32f1.c ****     DeviceMode = Mode;
 912:lib/ff/sdio_stm32f1.c ****   }
 913:lib/ff/sdio_stm32f1.c ****   else
 914:lib/ff/sdio_stm32f1.c ****   {
 915:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
 916:lib/ff/sdio_stm32f1.c ****   }
 917:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 918:lib/ff/sdio_stm32f1.c **** 
 919:lib/ff/sdio_stm32f1.c **** }
 920:lib/ff/sdio_stm32f1.c **** 
 921:lib/ff/sdio_stm32f1.c **** 
 922:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 923:lib/ff/sdio_stm32f1.c **** /*! 
 924:lib/ff/sdio_stm32f1.c **** 	@brief  Selects od Deselects the corresponding card.
 925:lib/ff/sdio_stm32f1.c **** 	@param  addr: Address of the Card to be selected.
 926:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
 927:lib/ff/sdio_stm32f1.c **** */
 928:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 929:lib/ff/sdio_stm32f1.c **** SD_Error SD_SelectDeselect(uint32_t addr)
 930:lib/ff/sdio_stm32f1.c **** {
 931:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 932:lib/ff/sdio_stm32f1.c **** 
 933:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD7 SDIO_SEL_DESEL_CARD */
 934:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument =  addr;
 935:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEL_DESEL_CARD;
 936:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 937:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 938:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 939:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 940:lib/ff/sdio_stm32f1.c **** 
 941:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 942:lib/ff/sdio_stm32f1.c **** 
 943:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 944:lib/ff/sdio_stm32f1.c **** }
 945:lib/ff/sdio_stm32f1.c **** 
 946:lib/ff/sdio_stm32f1.c **** 
 947:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 948:lib/ff/sdio_stm32f1.c **** /*! 
 949:lib/ff/sdio_stm32f1.c **** 	@brief  Allows to read one block from a specified address in a card.
 950:lib/ff/sdio_stm32f1.c **** 	@param  readbuff: pointer to the buffer that will contain the received data
 951:lib/ff/sdio_stm32f1.c **** 	@param  ReadAddr: Address from where data are to be read.  
 952:lib/ff/sdio_stm32f1.c **** 	@param  BlockSize: the SD card Data block size.
 953:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
 954:lib/ff/sdio_stm32f1.c **** */
 955:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
 956:lib/ff/sdio_stm32f1.c **** SD_Error SD_ReadBlock(uint8_t *readbuff, uint32_t ReadAddr, uint16_t BlockSize)
 957:lib/ff/sdio_stm32f1.c **** {
 958:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 959:lib/ff/sdio_stm32f1.c ****   uint32_t count = 0, *tempbuff = (uint32_t *)readbuff;
 960:lib/ff/sdio_stm32f1.c ****   uint8_t power = 0;
 961:lib/ff/sdio_stm32f1.c **** 
 962:lib/ff/sdio_stm32f1.c ****   if (NULL == readbuff)
 963:lib/ff/sdio_stm32f1.c ****   {
 964:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
 965:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 966:lib/ff/sdio_stm32f1.c ****   }
 967:lib/ff/sdio_stm32f1.c **** 
 968:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
 969:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
 970:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
 971:lib/ff/sdio_stm32f1.c **** 
 972:lib/ff/sdio_stm32f1.c ****   /*!< Clear all DPSM configuration */
 973:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 974:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
 975:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
 976:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 977:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 978:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
 979:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 980:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
 981:lib/ff/sdio_stm32f1.c **** 
 982:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 983:lib/ff/sdio_stm32f1.c ****   {
 984:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
 985:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 986:lib/ff/sdio_stm32f1.c ****   }
 987:lib/ff/sdio_stm32f1.c ****   
 988:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 989:lib/ff/sdio_stm32f1.c ****   {
 990:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
 991:lib/ff/sdio_stm32f1.c ****     ReadAddr /= 512;
 992:lib/ff/sdio_stm32f1.c ****   }
 993:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 994:lib/ff/sdio_stm32f1.c ****   {
 995:lib/ff/sdio_stm32f1.c ****     power = convert_from_bytes_to_power_of_two(BlockSize);
 996:lib/ff/sdio_stm32f1.c **** 
 997:lib/ff/sdio_stm32f1.c ****     /*!< Set Block Size for Card */
 998:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
 999:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
1000:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1001:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1002:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1003:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1004:lib/ff/sdio_stm32f1.c **** 
1005:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
1006:lib/ff/sdio_stm32f1.c **** 
1007:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
1008:lib/ff/sdio_stm32f1.c ****     {
1009:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1010:lib/ff/sdio_stm32f1.c ****     }
1011:lib/ff/sdio_stm32f1.c ****   }
1012:lib/ff/sdio_stm32f1.c ****   else
1013:lib/ff/sdio_stm32f1.c ****   {
1014:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1015:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1016:lib/ff/sdio_stm32f1.c ****   }
1017:lib/ff/sdio_stm32f1.c **** 
1018:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1019:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = BlockSize;
1020:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
1021:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
1022:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1023:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
1024:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
1025:lib/ff/sdio_stm32f1.c **** 
1026:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = BlockSize;
1027:lib/ff/sdio_stm32f1.c ****   StopCondition = 0;
1028:lib/ff/sdio_stm32f1.c ****   DestBuffer = (uint32_t *)readbuff;
1029:lib/ff/sdio_stm32f1.c **** 
1030:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD17 READ_SINGLE_BLOCK */
1031:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)ReadAddr;
1032:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_READ_SINGLE_BLOCK;
1033:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1034:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1035:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1036:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
1037:lib/ff/sdio_stm32f1.c **** 
1038:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_READ_SINGLE_BLOCK);
1039:lib/ff/sdio_stm32f1.c **** 
1040:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
1041:lib/ff/sdio_stm32f1.c ****   {
1042:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1043:lib/ff/sdio_stm32f1.c ****   }
1044:lib/ff/sdio_stm32f1.c ****   /*!< In case of single block transfer, no need of stop transfer at all.*/
1045:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_POLLING_MODE)
1046:lib/ff/sdio_stm32f1.c ****   {
1047:lib/ff/sdio_stm32f1.c ****     /*!< Polling mode */
1048:lib/ff/sdio_stm32f1.c ****     while (!(SDIO->STA &(SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DB
1049:lib/ff/sdio_stm32f1.c ****     {
1050:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_RXFIFOHF) != RESET)
1051:lib/ff/sdio_stm32f1.c ****       {
1052:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < 8; count++)
1053:lib/ff/sdio_stm32f1.c ****         {
1054:lib/ff/sdio_stm32f1.c ****           *(tempbuff + count) = SDIO_ReadData();
1055:lib/ff/sdio_stm32f1.c ****         }
1056:lib/ff/sdio_stm32f1.c ****         tempbuff += 8;
1057:lib/ff/sdio_stm32f1.c ****       }
1058:lib/ff/sdio_stm32f1.c ****     }
1059:lib/ff/sdio_stm32f1.c **** 
1060:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
1061:lib/ff/sdio_stm32f1.c ****     {
1062:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
1063:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_DATA_TIMEOUT;
1064:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1065:lib/ff/sdio_stm32f1.c ****     }
1066:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
1067:lib/ff/sdio_stm32f1.c ****     {
1068:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
1069:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_DATA_CRC_FAIL;
1070:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1071:lib/ff/sdio_stm32f1.c ****     }
1072:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
1073:lib/ff/sdio_stm32f1.c ****     {
1074:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
1075:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_RX_OVERRUN;
1076:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1077:lib/ff/sdio_stm32f1.c ****     }
1078:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
1079:lib/ff/sdio_stm32f1.c ****     {
1080:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_STBITERR);
1081:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_START_BIT_ERR;
1082:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1083:lib/ff/sdio_stm32f1.c ****     }
1084:lib/ff/sdio_stm32f1.c ****     while (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
1085:lib/ff/sdio_stm32f1.c ****     {
1086:lib/ff/sdio_stm32f1.c ****       *tempbuff = SDIO_ReadData();
1087:lib/ff/sdio_stm32f1.c ****       tempbuff++;
1088:lib/ff/sdio_stm32f1.c ****     }
1089:lib/ff/sdio_stm32f1.c **** 
1090:lib/ff/sdio_stm32f1.c ****     /*!< Clear all the static flags */
1091:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_STATIC_FLAGS);
1092:lib/ff/sdio_stm32f1.c ****   }
1093:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_INTERRUPT_MODE)
1094:lib/ff/sdio_stm32f1.c ****   {
1095:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_IT
1096:lib/ff/sdio_stm32f1.c ****     while ((TransferEnd == 0) && (TransferError == SD_OK))
1097:lib/ff/sdio_stm32f1.c ****     {}
1098:lib/ff/sdio_stm32f1.c ****     if (TransferError != SD_OK)
1099:lib/ff/sdio_stm32f1.c ****     {
1100:lib/ff/sdio_stm32f1.c ****       return(TransferError);
1101:lib/ff/sdio_stm32f1.c ****     }
1102:lib/ff/sdio_stm32f1.c ****   }
1103:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_DMA_MODE)
1104:lib/ff/sdio_stm32f1.c ****   {
1105:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_IT
1106:lib/ff/sdio_stm32f1.c ****     SDIO_DMACmd(ENABLE);
1107:lib/ff/sdio_stm32f1.c ****     SD_LowLevel_DMA_RxConfig((uint32_t *)readbuff, BlockSize);
1108:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
1109:lib/ff/sdio_stm32f1.c ****     {}
1110:lib/ff/sdio_stm32f1.c ****     if (TransferError != SD_OK)
1111:lib/ff/sdio_stm32f1.c ****     {
1112:lib/ff/sdio_stm32f1.c ****       return(TransferError);
1113:lib/ff/sdio_stm32f1.c ****     }
1114:lib/ff/sdio_stm32f1.c ****   }
1115:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
1116:lib/ff/sdio_stm32f1.c **** }
1117:lib/ff/sdio_stm32f1.c **** 
1118:lib/ff/sdio_stm32f1.c **** 
1119:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1120:lib/ff/sdio_stm32f1.c **** /*! 
1121:lib/ff/sdio_stm32f1.c **** 	@brief  Allows to read blocks from a specified address  in a card.
1122:lib/ff/sdio_stm32f1.c **** 	@param  readbuff: pointer to the buffer that will contain the received data.
1123:lib/ff/sdio_stm32f1.c **** 	@param  ReadAddr: Address from where data are to be read.
1124:lib/ff/sdio_stm32f1.c **** 	@param  BlockSize: the SD card Data block size.
1125:lib/ff/sdio_stm32f1.c **** 	@param  NumberOfBlocks: number of blocks to be read.
1126:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
1127:lib/ff/sdio_stm32f1.c **** */
1128:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1129:lib/ff/sdio_stm32f1.c **** SD_Error SD_ReadMultiBlocks(uint8_t *readbuff, uint32_t ReadAddr, uint16_t BlockSize, uint32_t Numb
1130:lib/ff/sdio_stm32f1.c **** {
1131:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
1132:lib/ff/sdio_stm32f1.c ****   uint32_t count = 0, *tempbuff = (uint32_t *)readbuff;
1133:lib/ff/sdio_stm32f1.c ****   uint8_t power = 0;
1134:lib/ff/sdio_stm32f1.c **** 
1135:lib/ff/sdio_stm32f1.c ****   if (NULL == readbuff)
1136:lib/ff/sdio_stm32f1.c ****   {
1137:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1138:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1139:lib/ff/sdio_stm32f1.c ****   }
1140:lib/ff/sdio_stm32f1.c **** 
1141:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
1142:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
1143:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
1144:lib/ff/sdio_stm32f1.c **** 
1145:lib/ff/sdio_stm32f1.c ****   /*!< Clear all DPSM configuration */
1146:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1147:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
1148:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
1149:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
1150:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1151:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
1152:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
1153:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
1154:lib/ff/sdio_stm32f1.c **** 
1155:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
1156:lib/ff/sdio_stm32f1.c ****   {
1157:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
1158:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1159:lib/ff/sdio_stm32f1.c ****   }
1160:lib/ff/sdio_stm32f1.c **** 
1161:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
1162:lib/ff/sdio_stm32f1.c ****   {
1163:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
1164:lib/ff/sdio_stm32f1.c ****     ReadAddr /= 512;
1165:lib/ff/sdio_stm32f1.c ****   }
1166:lib/ff/sdio_stm32f1.c ****   
1167:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && (0 == (BlockSize & (BlockSize - 1))))
1168:lib/ff/sdio_stm32f1.c ****   {
1169:lib/ff/sdio_stm32f1.c ****     power = convert_from_bytes_to_power_of_two(BlockSize);
1170:lib/ff/sdio_stm32f1.c **** 
1171:lib/ff/sdio_stm32f1.c ****     /*!< Set Block Size for Card */
1172:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
1173:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
1174:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1175:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1176:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1177:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1178:lib/ff/sdio_stm32f1.c **** 
1179:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
1180:lib/ff/sdio_stm32f1.c **** 
1181:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
1182:lib/ff/sdio_stm32f1.c ****     {
1183:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1184:lib/ff/sdio_stm32f1.c ****     }
1185:lib/ff/sdio_stm32f1.c ****   }
1186:lib/ff/sdio_stm32f1.c ****   else
1187:lib/ff/sdio_stm32f1.c ****   {
1188:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1189:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1190:lib/ff/sdio_stm32f1.c ****   }
1191:lib/ff/sdio_stm32f1.c **** 
1192:lib/ff/sdio_stm32f1.c ****   if (NumberOfBlocks > 1)
1193:lib/ff/sdio_stm32f1.c ****   {
1194:lib/ff/sdio_stm32f1.c ****     /*!< Common to all modes */
1195:lib/ff/sdio_stm32f1.c ****     if (NumberOfBlocks * BlockSize > SD_MAX_DATA_LENGTH)
1196:lib/ff/sdio_stm32f1.c ****     {
1197:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_INVALID_PARAMETER;
1198:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1199:lib/ff/sdio_stm32f1.c ****     }
1200:lib/ff/sdio_stm32f1.c **** 
1201:lib/ff/sdio_stm32f1.c ****     TotalNumberOfBytes = NumberOfBlocks * BlockSize;
1202:lib/ff/sdio_stm32f1.c ****     StopCondition = 1;
1203:lib/ff/sdio_stm32f1.c ****     DestBuffer = (uint32_t *)readbuff;
1204:lib/ff/sdio_stm32f1.c **** 
1205:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1206:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataLength = NumberOfBlocks * BlockSize;
1207:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
1208:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
1209:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1210:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
1211:lib/ff/sdio_stm32f1.c ****     SDIO_DataConfig(&SDIO_DataInitStructure);
1212:lib/ff/sdio_stm32f1.c **** 
1213:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD18 READ_MULT_BLOCK with argument data address */
1214:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)ReadAddr;
1215:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_READ_MULT_BLOCK;
1216:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1217:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1218:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1219:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1220:lib/ff/sdio_stm32f1.c **** 
1221:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_READ_MULT_BLOCK);
1222:lib/ff/sdio_stm32f1.c **** 
1223:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
1224:lib/ff/sdio_stm32f1.c ****     {
1225:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1226:lib/ff/sdio_stm32f1.c ****     }
1227:lib/ff/sdio_stm32f1.c **** 
1228:lib/ff/sdio_stm32f1.c ****     if (DeviceMode == SD_POLLING_MODE)
1229:lib/ff/sdio_stm32f1.c ****     {
1230:lib/ff/sdio_stm32f1.c ****       /*!< Polling mode */
1231:lib/ff/sdio_stm32f1.c ****       while (!(SDIO->STA &(SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DATAEND | SDIO_FLAG_D
1232:lib/ff/sdio_stm32f1.c ****       {
1233:lib/ff/sdio_stm32f1.c ****         if (SDIO_GetFlagStatus(SDIO_FLAG_RXFIFOHF) != RESET)
1234:lib/ff/sdio_stm32f1.c ****         {
1235:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < SD_HALFFIFO; count++)
1236:lib/ff/sdio_stm32f1.c ****           {
1237:lib/ff/sdio_stm32f1.c ****             *(tempbuff + count) = SDIO_ReadData();
1238:lib/ff/sdio_stm32f1.c ****           }
1239:lib/ff/sdio_stm32f1.c ****           tempbuff += SD_HALFFIFO;
1240:lib/ff/sdio_stm32f1.c ****         }
1241:lib/ff/sdio_stm32f1.c ****       }
1242:lib/ff/sdio_stm32f1.c **** 
1243:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
1244:lib/ff/sdio_stm32f1.c ****       {
1245:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
1246:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_DATA_TIMEOUT;
1247:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1248:lib/ff/sdio_stm32f1.c ****       }
1249:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
1250:lib/ff/sdio_stm32f1.c ****       {
1251:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
1252:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_DATA_CRC_FAIL;
1253:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1254:lib/ff/sdio_stm32f1.c ****       }
1255:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
1256:lib/ff/sdio_stm32f1.c ****       {
1257:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
1258:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_RX_OVERRUN;
1259:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1260:lib/ff/sdio_stm32f1.c ****       }
1261:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
1262:lib/ff/sdio_stm32f1.c ****       {
1263:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_STBITERR);
1264:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_START_BIT_ERR;
1265:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1266:lib/ff/sdio_stm32f1.c ****       }
1267:lib/ff/sdio_stm32f1.c ****       while (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
1268:lib/ff/sdio_stm32f1.c ****       {
1269:lib/ff/sdio_stm32f1.c ****         *tempbuff = SDIO_ReadData();
1270:lib/ff/sdio_stm32f1.c ****         tempbuff++;
1271:lib/ff/sdio_stm32f1.c ****       }
1272:lib/ff/sdio_stm32f1.c **** 
1273:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DATAEND) != RESET)
1274:lib/ff/sdio_stm32f1.c ****       {
1275:lib/ff/sdio_stm32f1.c ****         /*!< In Case Of SD-CARD Send Command STOP_TRANSMISSION */
1276:lib/ff/sdio_stm32f1.c ****         if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_HIGH_CAPACITY_SD_CARD == CardType
1277:lib/ff/sdio_stm32f1.c ****         {
1278:lib/ff/sdio_stm32f1.c ****           /*!< Send CMD12 STOP_TRANSMISSION */
1279:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Argument = 0x0;
1280:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_STOP_TRANSMISSION;
1281:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1282:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1283:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1284:lib/ff/sdio_stm32f1.c ****           SDIO_SendCommand(&SDIO_CmdInitStructure);
1285:lib/ff/sdio_stm32f1.c **** 
1286:lib/ff/sdio_stm32f1.c ****           errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
1287:lib/ff/sdio_stm32f1.c **** 
1288:lib/ff/sdio_stm32f1.c ****           if (errorstatus != SD_OK)
1289:lib/ff/sdio_stm32f1.c ****           {
1290:lib/ff/sdio_stm32f1.c ****             return(errorstatus);
1291:lib/ff/sdio_stm32f1.c ****           }
1292:lib/ff/sdio_stm32f1.c ****         }
1293:lib/ff/sdio_stm32f1.c ****       }
1294:lib/ff/sdio_stm32f1.c ****       /*!< Clear all the static flags */
1295:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_STATIC_FLAGS);
1296:lib/ff/sdio_stm32f1.c ****     }
1297:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_INTERRUPT_MODE)
1298:lib/ff/sdio_stm32f1.c ****     {
1299:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_
1300:lib/ff/sdio_stm32f1.c ****       while ((TransferEnd == 0) && (TransferError == SD_OK))
1301:lib/ff/sdio_stm32f1.c ****       {}
1302:lib/ff/sdio_stm32f1.c ****       if (TransferError != SD_OK)
1303:lib/ff/sdio_stm32f1.c ****       {
1304:lib/ff/sdio_stm32f1.c ****         return(TransferError);
1305:lib/ff/sdio_stm32f1.c ****       }
1306:lib/ff/sdio_stm32f1.c ****     }
1307:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_DMA_MODE)
1308:lib/ff/sdio_stm32f1.c ****     {
1309:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_
1310:lib/ff/sdio_stm32f1.c ****       SDIO_DMACmd(ENABLE);
1311:lib/ff/sdio_stm32f1.c ****       SD_LowLevel_DMA_RxConfig((uint32_t *)readbuff, (NumberOfBlocks * BlockSize));
1312:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
1313:lib/ff/sdio_stm32f1.c ****       {}
1314:lib/ff/sdio_stm32f1.c ****       if (TransferError != SD_OK)
1315:lib/ff/sdio_stm32f1.c ****       {
1316:lib/ff/sdio_stm32f1.c ****         return(TransferError);
1317:lib/ff/sdio_stm32f1.c ****       }
1318:lib/ff/sdio_stm32f1.c ****     }
1319:lib/ff/sdio_stm32f1.c ****   }
1320:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
1321:lib/ff/sdio_stm32f1.c **** }
1322:lib/ff/sdio_stm32f1.c **** 
1323:lib/ff/sdio_stm32f1.c **** 
1324:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1325:lib/ff/sdio_stm32f1.c **** /*! 
1326:lib/ff/sdio_stm32f1.c **** 	@brief  Allows to write one block starting from a specified address in a card.
1327:lib/ff/sdio_stm32f1.c **** 	@param  writebuff: pointer to the buffer that contain the data to be transferred.
1328:lib/ff/sdio_stm32f1.c **** 	@param  WriteAddr: Address from where data are to be read.   
1329:lib/ff/sdio_stm32f1.c **** 	@param  BlockSize: the SD card Data block size.
1330:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
1331:lib/ff/sdio_stm32f1.c **** */
1332:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1333:lib/ff/sdio_stm32f1.c **** SD_Error SD_WriteBlock(uint8_t *writebuff, uint32_t WriteAddr, uint16_t BlockSize)
1334:lib/ff/sdio_stm32f1.c **** {
1335:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
1336:lib/ff/sdio_stm32f1.c ****   uint8_t  power = 0, cardstate = 0;
1337:lib/ff/sdio_stm32f1.c ****   uint32_t timeout = 0, bytestransferred = 0;
1338:lib/ff/sdio_stm32f1.c ****   uint32_t cardstatus = 0, count = 0, restwords = 0;
1339:lib/ff/sdio_stm32f1.c ****   uint32_t *tempbuff = (uint32_t *)writebuff;
1340:lib/ff/sdio_stm32f1.c **** 
1341:lib/ff/sdio_stm32f1.c ****   if (writebuff == NULL)
1342:lib/ff/sdio_stm32f1.c ****   {
1343:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1344:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1345:lib/ff/sdio_stm32f1.c ****   }
1346:lib/ff/sdio_stm32f1.c **** 
1347:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
1348:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
1349:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
1350:lib/ff/sdio_stm32f1.c **** 
1351:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1352:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
1353:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
1354:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
1355:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1356:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
1357:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
1358:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
1359:lib/ff/sdio_stm32f1.c **** 
1360:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
1361:lib/ff/sdio_stm32f1.c ****   {
1362:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
1363:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1364:lib/ff/sdio_stm32f1.c ****   }
1365:lib/ff/sdio_stm32f1.c **** 
1366:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
1367:lib/ff/sdio_stm32f1.c ****   {
1368:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
1369:lib/ff/sdio_stm32f1.c ****     WriteAddr /= 512;
1370:lib/ff/sdio_stm32f1.c ****   }
1371:lib/ff/sdio_stm32f1.c ****   
1372:lib/ff/sdio_stm32f1.c ****   /*!< Set the block size, both on controller and card */
1373:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
1374:lib/ff/sdio_stm32f1.c ****   {
1375:lib/ff/sdio_stm32f1.c ****     power = convert_from_bytes_to_power_of_two(BlockSize);
1376:lib/ff/sdio_stm32f1.c **** 
1377:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
1378:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
1379:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1380:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1381:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1382:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1383:lib/ff/sdio_stm32f1.c **** 
1384:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
1385:lib/ff/sdio_stm32f1.c **** 
1386:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
1387:lib/ff/sdio_stm32f1.c ****     {
1388:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1389:lib/ff/sdio_stm32f1.c ****     }
1390:lib/ff/sdio_stm32f1.c ****   }
1391:lib/ff/sdio_stm32f1.c ****   else
1392:lib/ff/sdio_stm32f1.c ****   {
1393:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1394:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1395:lib/ff/sdio_stm32f1.c ****   }
1396:lib/ff/sdio_stm32f1.c **** 
1397:lib/ff/sdio_stm32f1.c ****   /*!< Wait till card is ready for data Added */
1398:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
1399:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
1400:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1401:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1402:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1403:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
1404:lib/ff/sdio_stm32f1.c **** 
1405:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
1406:lib/ff/sdio_stm32f1.c **** 
1407:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
1408:lib/ff/sdio_stm32f1.c ****   {
1409:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1410:lib/ff/sdio_stm32f1.c ****   }
1411:lib/ff/sdio_stm32f1.c **** 
1412:lib/ff/sdio_stm32f1.c ****   cardstatus = SDIO_GetResponse(SDIO_RESP1);
1413:lib/ff/sdio_stm32f1.c **** 
1414:lib/ff/sdio_stm32f1.c ****   timeout = SD_DATATIMEOUT;
1415:lib/ff/sdio_stm32f1.c **** 
1416:lib/ff/sdio_stm32f1.c ****   while (((cardstatus & 0x00000100) == 0) && (timeout > 0))
1417:lib/ff/sdio_stm32f1.c ****   {
1418:lib/ff/sdio_stm32f1.c ****     timeout--;
1419:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
1420:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
1421:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1422:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1423:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1424:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1425:lib/ff/sdio_stm32f1.c **** 
1426:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
1427:lib/ff/sdio_stm32f1.c **** 
1428:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
1429:lib/ff/sdio_stm32f1.c ****     {
1430:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1431:lib/ff/sdio_stm32f1.c ****     }
1432:lib/ff/sdio_stm32f1.c ****     cardstatus = SDIO_GetResponse(SDIO_RESP1);
1433:lib/ff/sdio_stm32f1.c ****   }
1434:lib/ff/sdio_stm32f1.c **** 
1435:lib/ff/sdio_stm32f1.c ****   if (timeout == 0)
1436:lib/ff/sdio_stm32f1.c ****   {
1437:lib/ff/sdio_stm32f1.c ****     return(SD_ERROR);
1438:lib/ff/sdio_stm32f1.c ****   }
1439:lib/ff/sdio_stm32f1.c **** 
1440:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD24 WRITE_SINGLE_BLOCK */
1441:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = WriteAddr;
1442:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_WRITE_SINGLE_BLOCK;
1443:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1444:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1445:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1446:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
1447:lib/ff/sdio_stm32f1.c **** 
1448:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_WRITE_SINGLE_BLOCK);
1449:lib/ff/sdio_stm32f1.c **** 
1450:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
1451:lib/ff/sdio_stm32f1.c ****   {
1452:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1453:lib/ff/sdio_stm32f1.c ****   }
1454:lib/ff/sdio_stm32f1.c **** 
1455:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = BlockSize;
1456:lib/ff/sdio_stm32f1.c ****   StopCondition = 0;
1457:lib/ff/sdio_stm32f1.c ****   SrcBuffer = (uint32_t *)writebuff;
1458:lib/ff/sdio_stm32f1.c **** 
1459:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1460:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = BlockSize;
1461:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
1462:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
1463:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1464:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
1465:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
1466:lib/ff/sdio_stm32f1.c **** 
1467:lib/ff/sdio_stm32f1.c ****   /*!< In case of single data block transfer no need of stop command at all */
1468:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_POLLING_MODE)
1469:lib/ff/sdio_stm32f1.c ****   {
1470:lib/ff/sdio_stm32f1.c ****     while (!(SDIO->STA & (SDIO_FLAG_DBCKEND | SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_D
1471:lib/ff/sdio_stm32f1.c ****     {
1472:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_TXFIFOHE) != RESET)
1473:lib/ff/sdio_stm32f1.c ****       {
1474:lib/ff/sdio_stm32f1.c ****         if ((TotalNumberOfBytes - bytestransferred) < 32)
1475:lib/ff/sdio_stm32f1.c ****         {
1476:lib/ff/sdio_stm32f1.c ****           restwords = ((TotalNumberOfBytes - bytestransferred) % 4 == 0) ? ((TotalNumberOfBytes - b
1477:lib/ff/sdio_stm32f1.c **** 
1478:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
1479:lib/ff/sdio_stm32f1.c ****           {
1480:lib/ff/sdio_stm32f1.c ****             SDIO_WriteData(*tempbuff);
1481:lib/ff/sdio_stm32f1.c ****           }
1482:lib/ff/sdio_stm32f1.c ****         }
1483:lib/ff/sdio_stm32f1.c ****         else
1484:lib/ff/sdio_stm32f1.c ****         {
1485:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < 8; count++)
1486:lib/ff/sdio_stm32f1.c ****           {
1487:lib/ff/sdio_stm32f1.c ****             SDIO_WriteData(*(tempbuff + count));
1488:lib/ff/sdio_stm32f1.c ****           }
1489:lib/ff/sdio_stm32f1.c ****           tempbuff += 8;
1490:lib/ff/sdio_stm32f1.c ****           bytestransferred += 32;
1491:lib/ff/sdio_stm32f1.c ****         }
1492:lib/ff/sdio_stm32f1.c ****       }
1493:lib/ff/sdio_stm32f1.c ****     }
1494:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
1495:lib/ff/sdio_stm32f1.c ****     {
1496:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
1497:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_DATA_TIMEOUT;
1498:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1499:lib/ff/sdio_stm32f1.c ****     }
1500:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
1501:lib/ff/sdio_stm32f1.c ****     {
1502:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
1503:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_DATA_CRC_FAIL;
1504:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1505:lib/ff/sdio_stm32f1.c ****     }
1506:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_TXUNDERR) != RESET)
1507:lib/ff/sdio_stm32f1.c ****     {
1508:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_TXUNDERR);
1509:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_TX_UNDERRUN;
1510:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1511:lib/ff/sdio_stm32f1.c ****     }
1512:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
1513:lib/ff/sdio_stm32f1.c ****     {
1514:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_STBITERR);
1515:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_START_BIT_ERR;
1516:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1517:lib/ff/sdio_stm32f1.c ****     }
1518:lib/ff/sdio_stm32f1.c ****   }
1519:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_INTERRUPT_MODE)
1520:lib/ff/sdio_stm32f1.c ****   {
1521:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_FLAG_TXFIFOHE | SDIO
1522:lib/ff/sdio_stm32f1.c ****     while ((TransferEnd == 0) && (TransferError == SD_OK))
1523:lib/ff/sdio_stm32f1.c ****     {}
1524:lib/ff/sdio_stm32f1.c ****     if (TransferError != SD_OK)
1525:lib/ff/sdio_stm32f1.c ****     {
1526:lib/ff/sdio_stm32f1.c ****       return(TransferError);
1527:lib/ff/sdio_stm32f1.c ****     }
1528:lib/ff/sdio_stm32f1.c ****   }
1529:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_DMA_MODE)
1530:lib/ff/sdio_stm32f1.c ****   {
1531:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_TXUNDERR | SDIO_I
1532:lib/ff/sdio_stm32f1.c ****     SD_LowLevel_DMA_TxConfig((uint32_t *)writebuff, BlockSize);
1533:lib/ff/sdio_stm32f1.c ****     SDIO_DMACmd(ENABLE);
1534:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
1535:lib/ff/sdio_stm32f1.c ****     {}
1536:lib/ff/sdio_stm32f1.c ****     if (TransferError != SD_OK)
1537:lib/ff/sdio_stm32f1.c ****     {
1538:lib/ff/sdio_stm32f1.c ****       return(TransferError);
1539:lib/ff/sdio_stm32f1.c ****     }
1540:lib/ff/sdio_stm32f1.c ****   }
1541:lib/ff/sdio_stm32f1.c **** 
1542:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
1543:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
1544:lib/ff/sdio_stm32f1.c **** 
1545:lib/ff/sdio_stm32f1.c ****   /*!< Wait till the card is in programming state */
1546:lib/ff/sdio_stm32f1.c ****   errorstatus = IsCardProgramming(&cardstate);
1547:lib/ff/sdio_stm32f1.c **** 
1548:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_REC
1549:lib/ff/sdio_stm32f1.c ****   {
1550:lib/ff/sdio_stm32f1.c ****     errorstatus = IsCardProgramming(&cardstate);
1551:lib/ff/sdio_stm32f1.c ****   }
1552:lib/ff/sdio_stm32f1.c **** 
1553:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
1554:lib/ff/sdio_stm32f1.c **** }
1555:lib/ff/sdio_stm32f1.c **** 
1556:lib/ff/sdio_stm32f1.c **** 
1557:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1558:lib/ff/sdio_stm32f1.c **** /*! 
1559:lib/ff/sdio_stm32f1.c **** 	@brief  Allows to write blocks starting from a specified address in a card.
1560:lib/ff/sdio_stm32f1.c **** 	@param  WriteAddr: Address from where data are to be read.
1561:lib/ff/sdio_stm32f1.c **** 	@param  writebuff: pointer to the buffer that contain the data to be transferred.
1562:lib/ff/sdio_stm32f1.c **** 	@param  BlockSize: the SD card Data block size.
1563:lib/ff/sdio_stm32f1.c **** 	@param  NumberOfBlocks: number of blocks to be written.
1564:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
1565:lib/ff/sdio_stm32f1.c **** */
1566:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1567:lib/ff/sdio_stm32f1.c **** SD_Error SD_WriteMultiBlocks(uint8_t *writebuff, uint32_t WriteAddr, uint16_t BlockSize, uint32_t N
1568:lib/ff/sdio_stm32f1.c **** {
1569:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
1570:lib/ff/sdio_stm32f1.c ****   uint8_t  power = 0, cardstate = 0;
1571:lib/ff/sdio_stm32f1.c ****   uint32_t bytestransferred = 0;
1572:lib/ff/sdio_stm32f1.c ****   uint32_t restwords = 0;
1573:lib/ff/sdio_stm32f1.c ****   uint32_t *tempbuff = (uint32_t *)writebuff;
1574:lib/ff/sdio_stm32f1.c ****   __IO uint32_t count = 0;
1575:lib/ff/sdio_stm32f1.c ****   
1576:lib/ff/sdio_stm32f1.c ****   if (writebuff == NULL)
1577:lib/ff/sdio_stm32f1.c ****   {
1578:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1579:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1580:lib/ff/sdio_stm32f1.c ****   }
1581:lib/ff/sdio_stm32f1.c **** 
1582:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
1583:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
1584:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
1585:lib/ff/sdio_stm32f1.c **** 
1586:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1587:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
1588:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
1589:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
1590:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1591:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
1592:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
1593:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
1594:lib/ff/sdio_stm32f1.c **** 
1595:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
1596:lib/ff/sdio_stm32f1.c ****   {
1597:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
1598:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1599:lib/ff/sdio_stm32f1.c ****   }
1600:lib/ff/sdio_stm32f1.c **** 
1601:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
1602:lib/ff/sdio_stm32f1.c ****   {
1603:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
1604:lib/ff/sdio_stm32f1.c ****     WriteAddr /= 512;
1605:lib/ff/sdio_stm32f1.c ****   }
1606:lib/ff/sdio_stm32f1.c ****   
1607:lib/ff/sdio_stm32f1.c ****   /*!< Set the block size, both on controller and card */
1608:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
1609:lib/ff/sdio_stm32f1.c ****   {
1610:lib/ff/sdio_stm32f1.c ****     power = convert_from_bytes_to_power_of_two(BlockSize);
1611:lib/ff/sdio_stm32f1.c **** 
1612:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
1613:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
1614:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1615:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1616:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1617:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1618:lib/ff/sdio_stm32f1.c **** 
1619:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
1620:lib/ff/sdio_stm32f1.c **** 
1621:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
1622:lib/ff/sdio_stm32f1.c ****     {
1623:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1624:lib/ff/sdio_stm32f1.c ****     }
1625:lib/ff/sdio_stm32f1.c ****   }
1626:lib/ff/sdio_stm32f1.c ****   else
1627:lib/ff/sdio_stm32f1.c ****   {
1628:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1629:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1630:lib/ff/sdio_stm32f1.c ****   }
1631:lib/ff/sdio_stm32f1.c **** 
1632:lib/ff/sdio_stm32f1.c ****   /*!< Wait till card is ready for data Added */
1633:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
1634:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
1635:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1636:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1637:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1638:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
1639:lib/ff/sdio_stm32f1.c **** 
1640:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
1641:lib/ff/sdio_stm32f1.c **** 
1642:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
1643:lib/ff/sdio_stm32f1.c ****   {
1644:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1645:lib/ff/sdio_stm32f1.c ****   }
1646:lib/ff/sdio_stm32f1.c **** 
1647:lib/ff/sdio_stm32f1.c ****   if (NumberOfBlocks > 1)
1648:lib/ff/sdio_stm32f1.c ****   {
1649:lib/ff/sdio_stm32f1.c ****     /*!< Common to all modes */
1650:lib/ff/sdio_stm32f1.c ****     if (NumberOfBlocks * BlockSize > SD_MAX_DATA_LENGTH)
1651:lib/ff/sdio_stm32f1.c ****     {
1652:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_INVALID_PARAMETER;
1653:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1654:lib/ff/sdio_stm32f1.c ****     }
1655:lib/ff/sdio_stm32f1.c **** 
1656:lib/ff/sdio_stm32f1.c ****     if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType
1657:lib/ff/sdio_stm32f1.c ****     {
1658:lib/ff/sdio_stm32f1.c ****       /*!< To improve performance */
1659:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
1660:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
1661:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1662:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1663:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1664:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
1665:lib/ff/sdio_stm32f1.c **** 
1666:lib/ff/sdio_stm32f1.c **** 
1667:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
1668:lib/ff/sdio_stm32f1.c **** 
1669:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
1670:lib/ff/sdio_stm32f1.c ****       {
1671:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1672:lib/ff/sdio_stm32f1.c ****       }
1673:lib/ff/sdio_stm32f1.c ****       /*!< To improve performance */
1674:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)NumberOfBlocks;
1675:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCK_COUNT;
1676:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1677:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1678:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1679:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
1680:lib/ff/sdio_stm32f1.c **** 
1681:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_SET_BLOCK_COUNT);
1682:lib/ff/sdio_stm32f1.c **** 
1683:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
1684:lib/ff/sdio_stm32f1.c ****       {
1685:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1686:lib/ff/sdio_stm32f1.c ****       }
1687:lib/ff/sdio_stm32f1.c ****     }
1688:lib/ff/sdio_stm32f1.c **** 
1689:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD25 WRITE_MULT_BLOCK with argument data address */
1690:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)WriteAddr;
1691:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_WRITE_MULT_BLOCK;
1692:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1693:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1694:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1695:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1696:lib/ff/sdio_stm32f1.c **** 
1697:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_WRITE_MULT_BLOCK);
1698:lib/ff/sdio_stm32f1.c **** 
1699:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
1700:lib/ff/sdio_stm32f1.c ****     {
1701:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1702:lib/ff/sdio_stm32f1.c ****     }
1703:lib/ff/sdio_stm32f1.c **** 
1704:lib/ff/sdio_stm32f1.c ****     TotalNumberOfBytes = NumberOfBlocks * BlockSize;
1705:lib/ff/sdio_stm32f1.c ****     StopCondition = 1;
1706:lib/ff/sdio_stm32f1.c ****     SrcBuffer = (uint32_t *)writebuff;
1707:lib/ff/sdio_stm32f1.c **** 
1708:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
1709:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataLength = NumberOfBlocks * BlockSize;
1710:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
1711:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
1712:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
1713:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
1714:lib/ff/sdio_stm32f1.c ****     SDIO_DataConfig(&SDIO_DataInitStructure);
1715:lib/ff/sdio_stm32f1.c **** 
1716:lib/ff/sdio_stm32f1.c ****     if (DeviceMode == SD_POLLING_MODE)
1717:lib/ff/sdio_stm32f1.c ****     {
1718:lib/ff/sdio_stm32f1.c ****       while (!(SDIO->STA & (SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DATAEND | SDIO_FLAG
1719:lib/ff/sdio_stm32f1.c ****       {
1720:lib/ff/sdio_stm32f1.c ****         if (SDIO_GetFlagStatus(SDIO_FLAG_TXFIFOHE) != RESET)
1721:lib/ff/sdio_stm32f1.c ****         {
1722:lib/ff/sdio_stm32f1.c ****           if (!((TotalNumberOfBytes - bytestransferred) < SD_HALFFIFOBYTES))
1723:lib/ff/sdio_stm32f1.c ****           {
1724:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < SD_HALFFIFO; count++)
1725:lib/ff/sdio_stm32f1.c ****             {
1726:lib/ff/sdio_stm32f1.c ****               SDIO_WriteData(*(tempbuff + count));
1727:lib/ff/sdio_stm32f1.c ****             }
1728:lib/ff/sdio_stm32f1.c ****             tempbuff += SD_HALFFIFO;
1729:lib/ff/sdio_stm32f1.c ****             bytestransferred += SD_HALFFIFOBYTES;
1730:lib/ff/sdio_stm32f1.c ****           }
1731:lib/ff/sdio_stm32f1.c ****           else
1732:lib/ff/sdio_stm32f1.c ****           {
1733:lib/ff/sdio_stm32f1.c ****             restwords = ((TotalNumberOfBytes - bytestransferred) % 4 == 0) ? ((TotalNumberOfBytes -
1734:lib/ff/sdio_stm32f1.c ****                         ((TotalNumberOfBytes - bytestransferred) / 4 + 1);
1735:lib/ff/sdio_stm32f1.c **** 
1736:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
1737:lib/ff/sdio_stm32f1.c ****             {
1738:lib/ff/sdio_stm32f1.c ****               SDIO_WriteData(*tempbuff);
1739:lib/ff/sdio_stm32f1.c ****             }
1740:lib/ff/sdio_stm32f1.c ****           }
1741:lib/ff/sdio_stm32f1.c ****         }
1742:lib/ff/sdio_stm32f1.c ****       }
1743:lib/ff/sdio_stm32f1.c **** 
1744:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
1745:lib/ff/sdio_stm32f1.c ****       {
1746:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
1747:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_DATA_TIMEOUT;
1748:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1749:lib/ff/sdio_stm32f1.c ****       }
1750:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
1751:lib/ff/sdio_stm32f1.c ****       {
1752:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
1753:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_DATA_CRC_FAIL;
1754:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1755:lib/ff/sdio_stm32f1.c ****       }
1756:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_TXUNDERR) != RESET)
1757:lib/ff/sdio_stm32f1.c ****       {
1758:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_TXUNDERR);
1759:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_TX_UNDERRUN;
1760:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1761:lib/ff/sdio_stm32f1.c ****       }
1762:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
1763:lib/ff/sdio_stm32f1.c ****       {
1764:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_STBITERR);
1765:lib/ff/sdio_stm32f1.c ****         errorstatus = SD_START_BIT_ERR;
1766:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
1767:lib/ff/sdio_stm32f1.c ****       }
1768:lib/ff/sdio_stm32f1.c **** 
1769:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DATAEND) != RESET)
1770:lib/ff/sdio_stm32f1.c ****       {
1771:lib/ff/sdio_stm32f1.c ****        if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardT
1772:lib/ff/sdio_stm32f1.c ****         {
1773:lib/ff/sdio_stm32f1.c ****           /*!< Send CMD12 STOP_TRANSMISSION */
1774:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Argument = 0x0;
1775:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_STOP_TRANSMISSION;
1776:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1777:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1778:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1779:lib/ff/sdio_stm32f1.c ****           SDIO_SendCommand(&SDIO_CmdInitStructure);
1780:lib/ff/sdio_stm32f1.c **** 
1781:lib/ff/sdio_stm32f1.c **** 
1782:lib/ff/sdio_stm32f1.c ****           errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
1783:lib/ff/sdio_stm32f1.c **** 
1784:lib/ff/sdio_stm32f1.c ****           if (errorstatus != SD_OK)
1785:lib/ff/sdio_stm32f1.c ****           {
1786:lib/ff/sdio_stm32f1.c ****             return(errorstatus);
1787:lib/ff/sdio_stm32f1.c ****           }
1788:lib/ff/sdio_stm32f1.c ****         }
1789:lib/ff/sdio_stm32f1.c ****       }
1790:lib/ff/sdio_stm32f1.c ****     }
1791:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_INTERRUPT_MODE)
1792:lib/ff/sdio_stm32f1.c ****     {
1793:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_TXFIFOHE | SDIO
1794:lib/ff/sdio_stm32f1.c ****       while ((TransferEnd == 0) && (TransferError == SD_OK))
1795:lib/ff/sdio_stm32f1.c ****       {}
1796:lib/ff/sdio_stm32f1.c ****       if (TransferError != SD_OK)
1797:lib/ff/sdio_stm32f1.c ****       {
1798:lib/ff/sdio_stm32f1.c ****         return(TransferError);
1799:lib/ff/sdio_stm32f1.c ****       }
1800:lib/ff/sdio_stm32f1.c ****     }
1801:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_DMA_MODE)
1802:lib/ff/sdio_stm32f1.c ****     {
1803:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_TXUNDERR | SDIO
1804:lib/ff/sdio_stm32f1.c ****       SDIO_DMACmd(ENABLE);
1805:lib/ff/sdio_stm32f1.c ****       SD_LowLevel_DMA_TxConfig((uint32_t *)writebuff, (NumberOfBlocks * BlockSize));
1806:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
1807:lib/ff/sdio_stm32f1.c ****       {}
1808:lib/ff/sdio_stm32f1.c ****       if (TransferError != SD_OK)
1809:lib/ff/sdio_stm32f1.c ****       {
1810:lib/ff/sdio_stm32f1.c ****         return(TransferError);
1811:lib/ff/sdio_stm32f1.c ****       }
1812:lib/ff/sdio_stm32f1.c ****     }
1813:lib/ff/sdio_stm32f1.c ****   }
1814:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
1815:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
1816:lib/ff/sdio_stm32f1.c ****   
1817:lib/ff/sdio_stm32f1.c ****   /*!< Add some delay before checking the Card Status */
1818:lib/ff/sdio_stm32f1.c ****   for(count = 0; count < 0xFFFF; count++)
1819:lib/ff/sdio_stm32f1.c ****   {
1820:lib/ff/sdio_stm32f1.c ****   }
1821:lib/ff/sdio_stm32f1.c ****   /*!< Wait till the card is in programming state */
1822:lib/ff/sdio_stm32f1.c ****   errorstatus = IsCardProgramming(&cardstate);
1823:lib/ff/sdio_stm32f1.c **** 
1824:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_REC
1825:lib/ff/sdio_stm32f1.c ****   {
1826:lib/ff/sdio_stm32f1.c ****     errorstatus = IsCardProgramming(&cardstate);
1827:lib/ff/sdio_stm32f1.c ****   }
1828:lib/ff/sdio_stm32f1.c **** 
1829:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
1830:lib/ff/sdio_stm32f1.c **** }
1831:lib/ff/sdio_stm32f1.c **** 
1832:lib/ff/sdio_stm32f1.c **** 
1833:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1834:lib/ff/sdio_stm32f1.c **** /*! 
1835:lib/ff/sdio_stm32f1.c **** 	@brief  Gets the cuurent data transfer state.
1836:lib/ff/sdio_stm32f1.c **** 	@param  None
1837:lib/ff/sdio_stm32f1.c **** 	@retval SDTransferState: Data Transfer state.
1838:lib/ff/sdio_stm32f1.c **** 			This value can be: 
1839:lib/ff/sdio_stm32f1.c **** 			- SD_TRANSFER_OK: No data transfer is acting
1840:lib/ff/sdio_stm32f1.c **** 			- SD_TRANSFER_BUSY: Data transfer is acting
1841:lib/ff/sdio_stm32f1.c **** */
1842:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1843:lib/ff/sdio_stm32f1.c **** SDTransferState SD_GetTransferState(void)
1844:lib/ff/sdio_stm32f1.c **** {
1845:lib/ff/sdio_stm32f1.c ****   if (SDIO->STA & (SDIO_FLAG_TXACT | SDIO_FLAG_RXACT))
1846:lib/ff/sdio_stm32f1.c ****   {
1847:lib/ff/sdio_stm32f1.c ****     return(SD_TRANSFER_BUSY);
1848:lib/ff/sdio_stm32f1.c ****   }
1849:lib/ff/sdio_stm32f1.c ****   else
1850:lib/ff/sdio_stm32f1.c ****   {
1851:lib/ff/sdio_stm32f1.c ****     return(SD_TRANSFER_OK);
1852:lib/ff/sdio_stm32f1.c ****   }
1853:lib/ff/sdio_stm32f1.c **** }
1854:lib/ff/sdio_stm32f1.c **** 
1855:lib/ff/sdio_stm32f1.c **** 
1856:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1857:lib/ff/sdio_stm32f1.c **** /*! 
1858:lib/ff/sdio_stm32f1.c **** 	@brief  Aborts an ongoing data transfer.
1859:lib/ff/sdio_stm32f1.c **** 	@param  None
1860:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
1861:lib/ff/sdio_stm32f1.c **** */
1862:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1863:lib/ff/sdio_stm32f1.c **** SD_Error SD_StopTransfer(void)
1864:lib/ff/sdio_stm32f1.c **** {
1865:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
1866:lib/ff/sdio_stm32f1.c **** 
1867:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD12 STOP_TRANSMISSION  */
1868:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x0;
1869:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_STOP_TRANSMISSION;
1870:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1871:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1872:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1873:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
1874:lib/ff/sdio_stm32f1.c **** 
1875:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
1876:lib/ff/sdio_stm32f1.c **** 
1877:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
1878:lib/ff/sdio_stm32f1.c **** }
1879:lib/ff/sdio_stm32f1.c **** 
1880:lib/ff/sdio_stm32f1.c **** 
1881:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1882:lib/ff/sdio_stm32f1.c **** /*! 
1883:lib/ff/sdio_stm32f1.c **** 	@brief  Allows to erase memory area specified for the given card.
1884:lib/ff/sdio_stm32f1.c **** 	@param  startaddr: the start address.
1885:lib/ff/sdio_stm32f1.c **** 	@param  endaddr: the end address.
1886:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
1887:lib/ff/sdio_stm32f1.c **** */
1888:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1889:lib/ff/sdio_stm32f1.c **** SD_Error SD_Erase(uint32_t startaddr, uint32_t endaddr)
1890:lib/ff/sdio_stm32f1.c **** {
1891:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
1892:lib/ff/sdio_stm32f1.c ****   uint32_t delay = 0;
1893:lib/ff/sdio_stm32f1.c ****   __IO uint32_t maxdelay = 0;
1894:lib/ff/sdio_stm32f1.c ****   uint8_t cardstate = 0;
1895:lib/ff/sdio_stm32f1.c **** 
1896:lib/ff/sdio_stm32f1.c ****   /*!< Check if the card coomnd class supports erase command */
1897:lib/ff/sdio_stm32f1.c ****   if (((CSD_Tab[1] >> 20) & SD_CCCC_ERASE) == 0)
1898:lib/ff/sdio_stm32f1.c ****   {
1899:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_REQUEST_NOT_APPLICABLE;
1900:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1901:lib/ff/sdio_stm32f1.c ****   }
1902:lib/ff/sdio_stm32f1.c **** 
1903:lib/ff/sdio_stm32f1.c ****   maxdelay = 120000 / ((SDIO->CLKCR & 0xFF) + 2);
1904:lib/ff/sdio_stm32f1.c **** 
1905:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
1906:lib/ff/sdio_stm32f1.c ****   {
1907:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
1908:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1909:lib/ff/sdio_stm32f1.c ****   }
1910:lib/ff/sdio_stm32f1.c **** 
1911:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
1912:lib/ff/sdio_stm32f1.c ****   {
1913:lib/ff/sdio_stm32f1.c ****     startaddr /= 512;
1914:lib/ff/sdio_stm32f1.c ****     endaddr /= 512;
1915:lib/ff/sdio_stm32f1.c ****   }
1916:lib/ff/sdio_stm32f1.c ****   
1917:lib/ff/sdio_stm32f1.c ****   /*!< According to sd-card spec 1.0 ERASE_GROUP_START (CMD32) and erase_group_end(CMD33) */
1918:lib/ff/sdio_stm32f1.c ****   if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType) 
1919:lib/ff/sdio_stm32f1.c ****   {
1920:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD32 SD_ERASE_GRP_START with argument as addr  */
1921:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = startaddr;
1922:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_ERASE_GRP_START;
1923:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1924:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1925:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1926:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1927:lib/ff/sdio_stm32f1.c **** 
1928:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SD_ERASE_GRP_START);
1929:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
1930:lib/ff/sdio_stm32f1.c ****     {
1931:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1932:lib/ff/sdio_stm32f1.c ****     }
1933:lib/ff/sdio_stm32f1.c **** 
1934:lib/ff/sdio_stm32f1.c ****     /*!< Send CMD33 SD_ERASE_GRP_END with argument as addr  */
1935:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = endaddr;
1936:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_ERASE_GRP_END;
1937:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1938:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1939:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1940:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
1941:lib/ff/sdio_stm32f1.c **** 
1942:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SD_ERASE_GRP_END);
1943:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
1944:lib/ff/sdio_stm32f1.c ****     {
1945:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
1946:lib/ff/sdio_stm32f1.c ****     }
1947:lib/ff/sdio_stm32f1.c ****   }
1948:lib/ff/sdio_stm32f1.c **** 
1949:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD38 ERASE */
1950:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0;
1951:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_ERASE;
1952:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
1953:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
1954:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
1955:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
1956:lib/ff/sdio_stm32f1.c **** 
1957:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_ERASE);
1958:lib/ff/sdio_stm32f1.c **** 
1959:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
1960:lib/ff/sdio_stm32f1.c ****   {
1961:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1962:lib/ff/sdio_stm32f1.c ****   }
1963:lib/ff/sdio_stm32f1.c **** 
1964:lib/ff/sdio_stm32f1.c ****   for (delay = 0; delay < maxdelay; delay++)
1965:lib/ff/sdio_stm32f1.c ****   {}
1966:lib/ff/sdio_stm32f1.c **** 
1967:lib/ff/sdio_stm32f1.c ****   /*!< Wait till the card is in programming state */
1968:lib/ff/sdio_stm32f1.c ****   errorstatus = IsCardProgramming(&cardstate);
1969:lib/ff/sdio_stm32f1.c **** 
1970:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((SD_CARD_PROGRAMMING == cardstate) || (SD_CARD_RECEIVING == car
1971:lib/ff/sdio_stm32f1.c ****   {
1972:lib/ff/sdio_stm32f1.c ****     errorstatus = IsCardProgramming(&cardstate);
1973:lib/ff/sdio_stm32f1.c ****   }
1974:lib/ff/sdio_stm32f1.c **** 
1975:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
1976:lib/ff/sdio_stm32f1.c **** }
1977:lib/ff/sdio_stm32f1.c **** 
1978:lib/ff/sdio_stm32f1.c **** 
1979:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1980:lib/ff/sdio_stm32f1.c **** /*! 
1981:lib/ff/sdio_stm32f1.c **** 	@brief  Returns the current card's status.
1982:lib/ff/sdio_stm32f1.c **** 	@param  pcardstatus: pointer to the buffer that will contain the SD card 
1983:lib/ff/sdio_stm32f1.c **** 			status (Card Status register).
1984:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
1985:lib/ff/sdio_stm32f1.c **** */
1986:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
1987:lib/ff/sdio_stm32f1.c **** SD_Error SD_SendStatus(uint32_t *pcardstatus)
1988:lib/ff/sdio_stm32f1.c **** {
1989:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
1990:lib/ff/sdio_stm32f1.c **** 
1991:lib/ff/sdio_stm32f1.c ****   if (pcardstatus == NULL)
1992:lib/ff/sdio_stm32f1.c ****   {
1993:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
1994:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
1995:lib/ff/sdio_stm32f1.c ****   }
1996:lib/ff/sdio_stm32f1.c **** 
1997:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
1998:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
1999:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2000:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2001:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2002:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2003:lib/ff/sdio_stm32f1.c **** 
2004:lib/ff/sdio_stm32f1.c **** 
2005:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
2006:lib/ff/sdio_stm32f1.c **** 
2007:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2008:lib/ff/sdio_stm32f1.c ****   {
2009:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2010:lib/ff/sdio_stm32f1.c ****   }
2011:lib/ff/sdio_stm32f1.c **** 
2012:lib/ff/sdio_stm32f1.c ****   *pcardstatus = SDIO_GetResponse(SDIO_RESP1);
2013:lib/ff/sdio_stm32f1.c **** 
2014:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2015:lib/ff/sdio_stm32f1.c **** }
2016:lib/ff/sdio_stm32f1.c **** 
2017:lib/ff/sdio_stm32f1.c **** 
2018:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2019:lib/ff/sdio_stm32f1.c **** /*! 
2020:lib/ff/sdio_stm32f1.c **** 	@brief  Returns the current SD card's status.
2021:lib/ff/sdio_stm32f1.c **** 	@param  psdstatus: pointer to the buffer that will contain the SD card status 
2022:lib/ff/sdio_stm32f1.c **** 			(SD Status register).
2023:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2024:lib/ff/sdio_stm32f1.c **** */
2025:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2026:lib/ff/sdio_stm32f1.c **** SD_Error SD_SendSDStatus(uint32_t *psdstatus)
2027:lib/ff/sdio_stm32f1.c **** {
2028:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2029:lib/ff/sdio_stm32f1.c ****   uint32_t count = 0;
2030:lib/ff/sdio_stm32f1.c **** 
2031:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
2032:lib/ff/sdio_stm32f1.c ****   {
2033:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
2034:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2035:lib/ff/sdio_stm32f1.c ****   }
2036:lib/ff/sdio_stm32f1.c **** 
2037:lib/ff/sdio_stm32f1.c ****   /*!< Set block size for card if it is not equal to current block size for card. */
2038:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 64;
2039:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
2040:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2041:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2042:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2043:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2044:lib/ff/sdio_stm32f1.c **** 
2045:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
2046:lib/ff/sdio_stm32f1.c **** 
2047:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2048:lib/ff/sdio_stm32f1.c ****   {
2049:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2050:lib/ff/sdio_stm32f1.c ****   }
2051:lib/ff/sdio_stm32f1.c **** 
2052:lib/ff/sdio_stm32f1.c ****   /*!< CMD55 */
2053:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
2054:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
2055:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2056:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2057:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2058:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2059:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
2060:lib/ff/sdio_stm32f1.c **** 
2061:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2062:lib/ff/sdio_stm32f1.c ****   {
2063:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2064:lib/ff/sdio_stm32f1.c ****   }
2065:lib/ff/sdio_stm32f1.c **** 
2066:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
2067:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 64;
2068:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_64b;
2069:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
2070:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
2071:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
2072:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
2073:lib/ff/sdio_stm32f1.c **** 
2074:lib/ff/sdio_stm32f1.c ****   /*!< Send ACMD13 SD_APP_STAUS  with argument as card's RCA.*/
2075:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0;
2076:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_APP_STAUS;
2077:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2078:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2079:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2080:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2081:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SD_APP_STAUS);
2082:lib/ff/sdio_stm32f1.c **** 
2083:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2084:lib/ff/sdio_stm32f1.c ****   {
2085:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2086:lib/ff/sdio_stm32f1.c ****   }
2087:lib/ff/sdio_stm32f1.c **** 
2088:lib/ff/sdio_stm32f1.c ****   while (!(SDIO->STA &(SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DBCK
2089:lib/ff/sdio_stm32f1.c ****   {
2090:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_RXFIFOHF) != RESET)
2091:lib/ff/sdio_stm32f1.c ****     {
2092:lib/ff/sdio_stm32f1.c ****       for (count = 0; count < 8; count++)
2093:lib/ff/sdio_stm32f1.c ****       {
2094:lib/ff/sdio_stm32f1.c ****         *(psdstatus + count) = SDIO_ReadData();
2095:lib/ff/sdio_stm32f1.c ****       }
2096:lib/ff/sdio_stm32f1.c ****       psdstatus += 8;
2097:lib/ff/sdio_stm32f1.c ****     }
2098:lib/ff/sdio_stm32f1.c ****   }
2099:lib/ff/sdio_stm32f1.c **** 
2100:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
2101:lib/ff/sdio_stm32f1.c ****   {
2102:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
2103:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_DATA_TIMEOUT;
2104:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2105:lib/ff/sdio_stm32f1.c ****   }
2106:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
2107:lib/ff/sdio_stm32f1.c ****   {
2108:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
2109:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_DATA_CRC_FAIL;
2110:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2111:lib/ff/sdio_stm32f1.c ****   }
2112:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
2113:lib/ff/sdio_stm32f1.c ****   {
2114:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
2115:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_RX_OVERRUN;
2116:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2117:lib/ff/sdio_stm32f1.c ****   }
2118:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
2119:lib/ff/sdio_stm32f1.c ****   {
2120:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_STBITERR);
2121:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_START_BIT_ERR;
2122:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2123:lib/ff/sdio_stm32f1.c ****   }
2124:lib/ff/sdio_stm32f1.c **** 
2125:lib/ff/sdio_stm32f1.c ****   while (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
2126:lib/ff/sdio_stm32f1.c ****   {
2127:lib/ff/sdio_stm32f1.c ****     *psdstatus = SDIO_ReadData();
2128:lib/ff/sdio_stm32f1.c ****     psdstatus++;
2129:lib/ff/sdio_stm32f1.c ****   }
2130:lib/ff/sdio_stm32f1.c **** 
2131:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static status flags*/
2132:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
2133:lib/ff/sdio_stm32f1.c ****   psdstatus -= 16;
2134:lib/ff/sdio_stm32f1.c ****   for (count = 0; count < 16; count++)
2135:lib/ff/sdio_stm32f1.c ****   {
2136:lib/ff/sdio_stm32f1.c ****     psdstatus[count] = ((psdstatus[count] & SD_0TO7BITS) << 24) |((psdstatus[count] & SD_8TO15BITS)
2137:lib/ff/sdio_stm32f1.c ****                        ((psdstatus[count] & SD_16TO23BITS) >> 8) |((psdstatus[count] & SD_24TO31BIT
2138:lib/ff/sdio_stm32f1.c ****   }
2139:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2140:lib/ff/sdio_stm32f1.c **** }
2141:lib/ff/sdio_stm32f1.c **** 
2142:lib/ff/sdio_stm32f1.c **** 
2143:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2144:lib/ff/sdio_stm32f1.c **** /*! 
2145:lib/ff/sdio_stm32f1.c **** 	@brief  Allows to process all the interrupts that are high.
2146:lib/ff/sdio_stm32f1.c **** 	@param  None
2147:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2148:lib/ff/sdio_stm32f1.c **** */
2149:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2150:lib/ff/sdio_stm32f1.c **** SD_Error SD_ProcessIRQSrc(void)
2151:lib/ff/sdio_stm32f1.c **** {
2152:lib/ff/sdio_stm32f1.c ****   uint32_t count = 0, restwords = 0;
2153:lib/ff/sdio_stm32f1.c **** 
2154:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_INTERRUPT_MODE)
2155:lib/ff/sdio_stm32f1.c ****   {
2156:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetITStatus(SDIO_IT_RXFIFOHF) != RESET)
2157:lib/ff/sdio_stm32f1.c ****     {
2158:lib/ff/sdio_stm32f1.c ****       for (count = 0; count < SD_HALFFIFO; count++)
2159:lib/ff/sdio_stm32f1.c ****       {
2160:lib/ff/sdio_stm32f1.c ****         *(DestBuffer + count) = SDIO_ReadData();
2161:lib/ff/sdio_stm32f1.c ****       }
2162:lib/ff/sdio_stm32f1.c ****       DestBuffer += SD_HALFFIFO;
2163:lib/ff/sdio_stm32f1.c ****       NumberOfBytes += SD_HALFFIFOBYTES;
2164:lib/ff/sdio_stm32f1.c ****     }
2165:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetITStatus(SDIO_IT_TXFIFOHE) != RESET)
2166:lib/ff/sdio_stm32f1.c ****     {
2167:lib/ff/sdio_stm32f1.c ****       if ((TotalNumberOfBytes - NumberOfBytes) < SD_HALFFIFOBYTES)
2168:lib/ff/sdio_stm32f1.c ****       {
2169:lib/ff/sdio_stm32f1.c ****         restwords = ((TotalNumberOfBytes - NumberOfBytes) %  4 == 0) ?
2170:lib/ff/sdio_stm32f1.c ****                     ((TotalNumberOfBytes - NumberOfBytes) / 4) :
2171:lib/ff/sdio_stm32f1.c ****                     ((TotalNumberOfBytes - NumberOfBytes) / 4 + 1);
2172:lib/ff/sdio_stm32f1.c **** 
2173:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < restwords;  count++, SrcBuffer++, NumberOfBytes += 4)
2174:lib/ff/sdio_stm32f1.c ****         {
2175:lib/ff/sdio_stm32f1.c ****           SDIO_WriteData(*SrcBuffer);
2176:lib/ff/sdio_stm32f1.c ****         }
2177:lib/ff/sdio_stm32f1.c ****       }
2178:lib/ff/sdio_stm32f1.c ****       else
2179:lib/ff/sdio_stm32f1.c ****       {
2180:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < SD_HALFFIFO; count++)
2181:lib/ff/sdio_stm32f1.c ****         {
2182:lib/ff/sdio_stm32f1.c ****           SDIO_WriteData(*(SrcBuffer + count));
2183:lib/ff/sdio_stm32f1.c ****         }
2184:lib/ff/sdio_stm32f1.c **** 
2185:lib/ff/sdio_stm32f1.c ****         SrcBuffer += SD_HALFFIFO;
2186:lib/ff/sdio_stm32f1.c ****         NumberOfBytes += SD_HALFFIFOBYTES;
2187:lib/ff/sdio_stm32f1.c ****       }
2188:lib/ff/sdio_stm32f1.c ****     }
2189:lib/ff/sdio_stm32f1.c ****   }
2190:lib/ff/sdio_stm32f1.c **** 
2191:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_DATAEND) != RESET)
2192:lib/ff/sdio_stm32f1.c ****   {
2193:lib/ff/sdio_stm32f1.c ****     if (DeviceMode != SD_DMA_MODE)
2194:lib/ff/sdio_stm32f1.c ****     {
2195:lib/ff/sdio_stm32f1.c ****       while ((SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)  &&  (NumberOfBytes < TotalNumberOfByt
2196:lib/ff/sdio_stm32f1.c ****       {
2197:lib/ff/sdio_stm32f1.c ****         *DestBuffer = SDIO_ReadData();
2198:lib/ff/sdio_stm32f1.c ****         DestBuffer++;
2199:lib/ff/sdio_stm32f1.c ****         NumberOfBytes += 4;
2200:lib/ff/sdio_stm32f1.c ****       }
2201:lib/ff/sdio_stm32f1.c ****     }
2202:lib/ff/sdio_stm32f1.c **** 
2203:lib/ff/sdio_stm32f1.c ****     if (StopCondition == 1)
2204:lib/ff/sdio_stm32f1.c ****     {
2205:lib/ff/sdio_stm32f1.c ****       TransferError = SD_StopTransfer();
2206:lib/ff/sdio_stm32f1.c ****     }
2207:lib/ff/sdio_stm32f1.c ****     else
2208:lib/ff/sdio_stm32f1.c ****     {
2209:lib/ff/sdio_stm32f1.c ****       TransferError = SD_OK;
2210:lib/ff/sdio_stm32f1.c ****     }
2211:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_DATAEND);
2212:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
2213:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |
2214:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_RXOVERR | SDIO_IT_STBITERR, DISABLE);
2215:lib/ff/sdio_stm32f1.c ****     TransferEnd = 1;
2216:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
2217:lib/ff/sdio_stm32f1.c ****     return(TransferError);
2218:lib/ff/sdio_stm32f1.c ****   }
2219:lib/ff/sdio_stm32f1.c **** 
2220:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_DCRCFAIL) != RESET)
2221:lib/ff/sdio_stm32f1.c ****   {
2222:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_DCRCFAIL);
2223:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
2224:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |
2225:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_RXOVERR | SDIO_IT_STBITERR, DISABLE);
2226:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
2227:lib/ff/sdio_stm32f1.c ****     TransferError = SD_DATA_CRC_FAIL;
2228:lib/ff/sdio_stm32f1.c ****     return(SD_DATA_CRC_FAIL);
2229:lib/ff/sdio_stm32f1.c ****   }
2230:lib/ff/sdio_stm32f1.c **** 
2231:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_DTIMEOUT) != RESET)
2232:lib/ff/sdio_stm32f1.c ****   {
2233:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_DTIMEOUT);
2234:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
2235:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |
2236:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_RXOVERR | SDIO_IT_STBITERR, DISABLE);
2237:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
2238:lib/ff/sdio_stm32f1.c ****     TransferError = SD_DATA_TIMEOUT;
2239:lib/ff/sdio_stm32f1.c ****     return(SD_DATA_TIMEOUT);
2240:lib/ff/sdio_stm32f1.c ****   }
2241:lib/ff/sdio_stm32f1.c **** 
2242:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_RXOVERR) != RESET)
2243:lib/ff/sdio_stm32f1.c ****   {
2244:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_RXOVERR);
2245:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
2246:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |
2247:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_RXOVERR | SDIO_IT_STBITERR, DISABLE);
2248:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
2249:lib/ff/sdio_stm32f1.c ****     TransferError = SD_RX_OVERRUN;
2250:lib/ff/sdio_stm32f1.c ****     return(SD_RX_OVERRUN);
2251:lib/ff/sdio_stm32f1.c ****   }
2252:lib/ff/sdio_stm32f1.c **** 
2253:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_TXUNDERR) != RESET)
2254:lib/ff/sdio_stm32f1.c ****   {
2255:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_TXUNDERR);
2256:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
2257:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |
2258:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_RXOVERR | SDIO_IT_STBITERR, DISABLE);
2259:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
2260:lib/ff/sdio_stm32f1.c ****     TransferError = SD_TX_UNDERRUN;
2261:lib/ff/sdio_stm32f1.c ****     return(SD_TX_UNDERRUN);
2262:lib/ff/sdio_stm32f1.c ****   }
2263:lib/ff/sdio_stm32f1.c **** 
2264:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_STBITERR) != RESET)
2265:lib/ff/sdio_stm32f1.c ****   {
2266:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_STBITERR);
2267:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
2268:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |
2269:lib/ff/sdio_stm32f1.c ****                   SDIO_IT_RXOVERR | SDIO_IT_STBITERR, DISABLE);
2270:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
2271:lib/ff/sdio_stm32f1.c ****     TransferError = SD_START_BIT_ERR;
2272:lib/ff/sdio_stm32f1.c ****     return(SD_START_BIT_ERR);
2273:lib/ff/sdio_stm32f1.c ****   }
2274:lib/ff/sdio_stm32f1.c **** 
2275:lib/ff/sdio_stm32f1.c ****   return(SD_OK);
2276:lib/ff/sdio_stm32f1.c **** }
2277:lib/ff/sdio_stm32f1.c **** 
2278:lib/ff/sdio_stm32f1.c **** 
2279:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2280:lib/ff/sdio_stm32f1.c **** /*! 
2281:lib/ff/sdio_stm32f1.c **** 	@brief  Checks for error conditions for CMD0.
2282:lib/ff/sdio_stm32f1.c **** 	@param  None
2283:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2284:lib/ff/sdio_stm32f1.c **** */
2285:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2286:lib/ff/sdio_stm32f1.c **** static SD_Error CmdError(void)
2287:lib/ff/sdio_stm32f1.c **** {
2288:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2289:lib/ff/sdio_stm32f1.c ****   uint32_t timeout;
2290:lib/ff/sdio_stm32f1.c **** 
2291:lib/ff/sdio_stm32f1.c ****   timeout = SDIO_CMD0TIMEOUT; /*!< 10000 */
2292:lib/ff/sdio_stm32f1.c **** 
2293:lib/ff/sdio_stm32f1.c ****   while ((timeout > 0) && (SDIO_GetFlagStatus(SDIO_FLAG_CMDSENT) == RESET))
2294:lib/ff/sdio_stm32f1.c ****   {
2295:lib/ff/sdio_stm32f1.c ****     timeout--;
2296:lib/ff/sdio_stm32f1.c ****   }
2297:lib/ff/sdio_stm32f1.c **** 
2298:lib/ff/sdio_stm32f1.c ****   if (timeout == 0)
2299:lib/ff/sdio_stm32f1.c ****   {
2300:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2301:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2302:lib/ff/sdio_stm32f1.c ****   }
2303:lib/ff/sdio_stm32f1.c **** 
2304:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
2305:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
2306:lib/ff/sdio_stm32f1.c **** 
2307:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2308:lib/ff/sdio_stm32f1.c **** }
2309:lib/ff/sdio_stm32f1.c **** 
2310:lib/ff/sdio_stm32f1.c **** 
2311:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2312:lib/ff/sdio_stm32f1.c **** /*! 
2313:lib/ff/sdio_stm32f1.c **** 	@brief  Checks for error conditions for R7 response.
2314:lib/ff/sdio_stm32f1.c **** 	@param  None
2315:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2316:lib/ff/sdio_stm32f1.c **** */
2317:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2318:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp7Error(void)
2319:lib/ff/sdio_stm32f1.c **** {
2320:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2321:lib/ff/sdio_stm32f1.c ****   uint32_t status;
2322:lib/ff/sdio_stm32f1.c ****   uint32_t timeout = SDIO_CMD0TIMEOUT;
2323:lib/ff/sdio_stm32f1.c **** 
2324:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
2325:lib/ff/sdio_stm32f1.c **** 
2326:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)) && (timeout > 0)
2327:lib/ff/sdio_stm32f1.c ****   {
2328:lib/ff/sdio_stm32f1.c ****     timeout--;
2329:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
2330:lib/ff/sdio_stm32f1.c ****   }
2331:lib/ff/sdio_stm32f1.c **** 
2332:lib/ff/sdio_stm32f1.c ****   if ((timeout == 0) || (status & SDIO_FLAG_CTIMEOUT))
2333:lib/ff/sdio_stm32f1.c ****   {
2334:lib/ff/sdio_stm32f1.c ****     /*!< Card is not V2.0 complient or card does not support the set voltage range */
2335:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2336:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
2337:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2338:lib/ff/sdio_stm32f1.c ****   }
2339:lib/ff/sdio_stm32f1.c **** 
2340:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CMDREND)
2341:lib/ff/sdio_stm32f1.c ****   {
2342:lib/ff/sdio_stm32f1.c ****     /*!< Card is SD V2.0 compliant */
2343:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_OK;
2344:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CMDREND);
2345:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2346:lib/ff/sdio_stm32f1.c ****   }
2347:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2348:lib/ff/sdio_stm32f1.c **** }
2349:lib/ff/sdio_stm32f1.c **** 
2350:lib/ff/sdio_stm32f1.c **** 
2351:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2352:lib/ff/sdio_stm32f1.c **** /*! 
2353:lib/ff/sdio_stm32f1.c **** 	@brief  Checks for error conditions for R1 response.
2354:lib/ff/sdio_stm32f1.c **** 	@param  cmd: The sent command index.
2355:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2356:lib/ff/sdio_stm32f1.c **** */
2357:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2358:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp1Error(uint8_t cmd)
2359:lib/ff/sdio_stm32f1.c **** {
2360:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2361:lib/ff/sdio_stm32f1.c ****   uint32_t status;
2362:lib/ff/sdio_stm32f1.c ****   uint32_t response_r1;
2363:lib/ff/sdio_stm32f1.c **** 
2364:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
2365:lib/ff/sdio_stm32f1.c **** 
2366:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)))
2367:lib/ff/sdio_stm32f1.c ****   {
2368:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
2369:lib/ff/sdio_stm32f1.c ****   }
2370:lib/ff/sdio_stm32f1.c **** 
2371:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
2372:lib/ff/sdio_stm32f1.c ****   {
2373:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2374:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
2375:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2376:lib/ff/sdio_stm32f1.c ****   }
2377:lib/ff/sdio_stm32f1.c ****   else if (status & SDIO_FLAG_CCRCFAIL)
2378:lib/ff/sdio_stm32f1.c ****   {
2379:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_CRC_FAIL;
2380:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CCRCFAIL);
2381:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2382:lib/ff/sdio_stm32f1.c ****   }
2383:lib/ff/sdio_stm32f1.c **** 
2384:lib/ff/sdio_stm32f1.c ****   /*!< Check response received is of desired command */
2385:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetCommandResponse() != cmd)
2386:lib/ff/sdio_stm32f1.c ****   {
2387:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_ILLEGAL_CMD;
2388:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2389:lib/ff/sdio_stm32f1.c ****   }
2390:lib/ff/sdio_stm32f1.c **** 
2391:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
2392:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
2393:lib/ff/sdio_stm32f1.c **** 
2394:lib/ff/sdio_stm32f1.c ****   /*!< We have received response, retrieve it for analysis  */
2395:lib/ff/sdio_stm32f1.c ****   response_r1 = SDIO_GetResponse(SDIO_RESP1);
2396:lib/ff/sdio_stm32f1.c **** 
2397:lib/ff/sdio_stm32f1.c ****   if ((response_r1 & SD_OCR_ERRORBITS) == SD_ALLZERO)
2398:lib/ff/sdio_stm32f1.c ****   {
2399:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2400:lib/ff/sdio_stm32f1.c ****   }
2401:lib/ff/sdio_stm32f1.c **** 
2402:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ADDR_OUT_OF_RANGE)
2403:lib/ff/sdio_stm32f1.c ****   {
2404:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_OUT_OF_RANGE);
2405:lib/ff/sdio_stm32f1.c ****   }
2406:lib/ff/sdio_stm32f1.c **** 
2407:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ADDR_MISALIGNED)
2408:lib/ff/sdio_stm32f1.c ****   {
2409:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_MISALIGNED);
2410:lib/ff/sdio_stm32f1.c ****   }
2411:lib/ff/sdio_stm32f1.c **** 
2412:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_BLOCK_LEN_ERR)
2413:lib/ff/sdio_stm32f1.c ****   {
2414:lib/ff/sdio_stm32f1.c ****     return(SD_BLOCK_LEN_ERR);
2415:lib/ff/sdio_stm32f1.c ****   }
2416:lib/ff/sdio_stm32f1.c **** 
2417:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ERASE_SEQ_ERR)
2418:lib/ff/sdio_stm32f1.c ****   {
2419:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_SEQ_ERR);
2420:lib/ff/sdio_stm32f1.c ****   }
2421:lib/ff/sdio_stm32f1.c **** 
2422:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_BAD_ERASE_PARAM)
2423:lib/ff/sdio_stm32f1.c ****   {
2424:lib/ff/sdio_stm32f1.c ****     return(SD_BAD_ERASE_PARAM);
2425:lib/ff/sdio_stm32f1.c ****   }
2426:lib/ff/sdio_stm32f1.c **** 
2427:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_WRITE_PROT_VIOLATION)
2428:lib/ff/sdio_stm32f1.c ****   {
2429:lib/ff/sdio_stm32f1.c ****     return(SD_WRITE_PROT_VIOLATION);
2430:lib/ff/sdio_stm32f1.c ****   }
2431:lib/ff/sdio_stm32f1.c **** 
2432:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_LOCK_UNLOCK_FAILED)
2433:lib/ff/sdio_stm32f1.c ****   {
2434:lib/ff/sdio_stm32f1.c ****     return(SD_LOCK_UNLOCK_FAILED);
2435:lib/ff/sdio_stm32f1.c ****   }
2436:lib/ff/sdio_stm32f1.c **** 
2437:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_COM_CRC_FAILED)
2438:lib/ff/sdio_stm32f1.c ****   {
2439:lib/ff/sdio_stm32f1.c ****     return(SD_COM_CRC_FAILED);
2440:lib/ff/sdio_stm32f1.c ****   }
2441:lib/ff/sdio_stm32f1.c **** 
2442:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ILLEGAL_CMD)
2443:lib/ff/sdio_stm32f1.c ****   {
2444:lib/ff/sdio_stm32f1.c ****     return(SD_ILLEGAL_CMD);
2445:lib/ff/sdio_stm32f1.c ****   }
2446:lib/ff/sdio_stm32f1.c **** 
2447:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CARD_ECC_FAILED)
2448:lib/ff/sdio_stm32f1.c ****   {
2449:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_FAILED);
2450:lib/ff/sdio_stm32f1.c ****   }
2451:lib/ff/sdio_stm32f1.c **** 
2452:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CC_ERROR)
2453:lib/ff/sdio_stm32f1.c ****   {
2454:lib/ff/sdio_stm32f1.c ****     return(SD_CC_ERROR);
2455:lib/ff/sdio_stm32f1.c ****   }
2456:lib/ff/sdio_stm32f1.c **** 
2457:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_GENERAL_UNKNOWN_ERROR)
2458:lib/ff/sdio_stm32f1.c ****   {
2459:lib/ff/sdio_stm32f1.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
2460:lib/ff/sdio_stm32f1.c ****   }
2461:lib/ff/sdio_stm32f1.c **** 
2462:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_STREAM_READ_UNDERRUN)
2463:lib/ff/sdio_stm32f1.c ****   {
2464:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_READ_UNDERRUN);
2465:lib/ff/sdio_stm32f1.c ****   }
2466:lib/ff/sdio_stm32f1.c **** 
2467:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_STREAM_WRITE_OVERRUN)
2468:lib/ff/sdio_stm32f1.c ****   {
2469:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_WRITE_OVERRUN);
2470:lib/ff/sdio_stm32f1.c ****   }
2471:lib/ff/sdio_stm32f1.c **** 
2472:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CID_CSD_OVERWRIETE)
2473:lib/ff/sdio_stm32f1.c ****   {
2474:lib/ff/sdio_stm32f1.c ****     return(SD_CID_CSD_OVERWRITE);
2475:lib/ff/sdio_stm32f1.c ****   }
2476:lib/ff/sdio_stm32f1.c **** 
2477:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_WP_ERASE_SKIP)
2478:lib/ff/sdio_stm32f1.c ****   {
2479:lib/ff/sdio_stm32f1.c ****     return(SD_WP_ERASE_SKIP);
2480:lib/ff/sdio_stm32f1.c ****   }
2481:lib/ff/sdio_stm32f1.c **** 
2482:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CARD_ECC_DISABLED)
2483:lib/ff/sdio_stm32f1.c ****   {
2484:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_DISABLED);
2485:lib/ff/sdio_stm32f1.c ****   }
2486:lib/ff/sdio_stm32f1.c **** 
2487:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ERASE_RESET)
2488:lib/ff/sdio_stm32f1.c ****   {
2489:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_RESET);
2490:lib/ff/sdio_stm32f1.c ****   }
2491:lib/ff/sdio_stm32f1.c **** 
2492:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_AKE_SEQ_ERROR)
2493:lib/ff/sdio_stm32f1.c ****   {
2494:lib/ff/sdio_stm32f1.c ****     return(SD_AKE_SEQ_ERROR);
2495:lib/ff/sdio_stm32f1.c ****   }
2496:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2497:lib/ff/sdio_stm32f1.c **** }
2498:lib/ff/sdio_stm32f1.c **** 
2499:lib/ff/sdio_stm32f1.c **** 
2500:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2501:lib/ff/sdio_stm32f1.c **** /*! 
2502:lib/ff/sdio_stm32f1.c **** 	@brief  Checks for error conditions for R3 (OCR) response.
2503:lib/ff/sdio_stm32f1.c **** 	@param  None
2504:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2505:lib/ff/sdio_stm32f1.c **** */
2506:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2507:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp3Error(void)
2508:lib/ff/sdio_stm32f1.c **** {
2509:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2510:lib/ff/sdio_stm32f1.c ****   uint32_t status;
2511:lib/ff/sdio_stm32f1.c **** 
2512:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
2513:lib/ff/sdio_stm32f1.c **** 
2514:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)))
2515:lib/ff/sdio_stm32f1.c ****   {
2516:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
2517:lib/ff/sdio_stm32f1.c ****   }
2518:lib/ff/sdio_stm32f1.c **** 
2519:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
2520:lib/ff/sdio_stm32f1.c ****   {
2521:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2522:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
2523:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2524:lib/ff/sdio_stm32f1.c ****   }
2525:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
2526:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
2527:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2528:lib/ff/sdio_stm32f1.c **** }
2529:lib/ff/sdio_stm32f1.c **** 
2530:lib/ff/sdio_stm32f1.c **** 
2531:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2532:lib/ff/sdio_stm32f1.c **** /*! 
2533:lib/ff/sdio_stm32f1.c **** 	@brief  Checks for error conditions for R2 (CID or CSD) response.
2534:lib/ff/sdio_stm32f1.c **** 	@param  None
2535:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2536:lib/ff/sdio_stm32f1.c **** */
2537:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2538:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp2Error(void)
2539:lib/ff/sdio_stm32f1.c **** {
  26              		.loc 1 2539 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 08B5     		push	{r3, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 3, -8
  34              		.cfi_offset 14, -4
  35              	.LVL0:
2540:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2541:lib/ff/sdio_stm32f1.c ****   uint32_t status;
2542:lib/ff/sdio_stm32f1.c **** 
2543:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
  36              		.loc 1 2543 0
  37 0002 0C4A     		ldr	r2, .L8
  38              	.L3:
2544:lib/ff/sdio_stm32f1.c **** 
2545:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CTIMEOUT | SDIO_FLAG_CMDREND)))
2546:lib/ff/sdio_stm32f1.c ****   {
2547:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
  39              		.loc 1 2547 0
  40 0004 536B     		ldr	r3, [r2, #52]
  41              	.LVL1:
2545:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CTIMEOUT | SDIO_FLAG_CMDREND)))
  42              		.loc 1 2545 0
  43 0006 13F0450F 		tst	r3, #69
  44 000a FBD0     		beq	.L3
2548:lib/ff/sdio_stm32f1.c ****   }
2549:lib/ff/sdio_stm32f1.c **** 
2550:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
  45              		.loc 1 2550 0
  46 000c 5A07     		lsls	r2, r3, #29
  47 000e 04D5     		bpl	.L4
  48              	.LVL2:
2551:lib/ff/sdio_stm32f1.c ****   {
2552:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2553:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
  49              		.loc 1 2553 0
  50 0010 0420     		movs	r0, #4
  51 0012 FFF7FEFF 		bl	SDIO_ClearFlag
  52              	.LVL3:
2554:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
  53              		.loc 1 2554 0
  54 0016 0320     		movs	r0, #3
  55 0018 08BD     		pop	{r3, pc}
  56              	.LVL4:
  57              	.L4:
2555:lib/ff/sdio_stm32f1.c ****   }
2556:lib/ff/sdio_stm32f1.c ****   else if (status & SDIO_FLAG_CCRCFAIL)
  58              		.loc 1 2556 0
  59 001a DB07     		lsls	r3, r3, #31
  60              	.LVL5:
  61 001c 04D5     		bpl	.L6
  62              	.LVL6:
2557:lib/ff/sdio_stm32f1.c ****   {
2558:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_CRC_FAIL;
2559:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CCRCFAIL);
  63              		.loc 1 2559 0
  64 001e 0120     		movs	r0, #1
  65 0020 FFF7FEFF 		bl	SDIO_ClearFlag
  66              	.LVL7:
2560:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
  67              		.loc 1 2560 0
  68 0024 0120     		movs	r0, #1
  69 0026 08BD     		pop	{r3, pc}
  70              	.LVL8:
  71              	.L6:
2561:lib/ff/sdio_stm32f1.c ****   }
2562:lib/ff/sdio_stm32f1.c **** 
2563:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
2564:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
  72              		.loc 1 2564 0
  73 0028 40F2FF50 		movw	r0, #1535
  74 002c FFF7FEFF 		bl	SDIO_ClearFlag
  75              	.LVL9:
2565:lib/ff/sdio_stm32f1.c **** 
2566:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
  76              		.loc 1 2566 0
  77 0030 2A20     		movs	r0, #42
2567:lib/ff/sdio_stm32f1.c **** }
  78              		.loc 1 2567 0
  79 0032 08BD     		pop	{r3, pc}
  80              	.L9:
  81              		.align	2
  82              	.L8:
  83 0034 00800140 		.word	1073840128
  84              		.cfi_endproc
  85              	.LFE82:
  87              		.section	.text.IsCardProgramming,"ax",%progbits
  88              		.align	1
  89              		.thumb
  90              		.thumb_func
  92              	IsCardProgramming:
  93              	.LFB85:
2568:lib/ff/sdio_stm32f1.c **** 
2569:lib/ff/sdio_stm32f1.c **** 
2570:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2571:lib/ff/sdio_stm32f1.c **** /*! 
2572:lib/ff/sdio_stm32f1.c **** 	@brief  Checks for error conditions for R6 (RCA) response.
2573:lib/ff/sdio_stm32f1.c **** 	@param  cmd: The sent command index.
2574:lib/ff/sdio_stm32f1.c **** 	@param  prca: pointer to the variable that will contain the SD card relative 
2575:lib/ff/sdio_stm32f1.c **** 			address RCA. 
2576:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2577:lib/ff/sdio_stm32f1.c **** */
2578:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2579:lib/ff/sdio_stm32f1.c **** static SD_Error CmdResp6Error(uint8_t cmd, uint16_t *prca)
2580:lib/ff/sdio_stm32f1.c **** {
2581:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2582:lib/ff/sdio_stm32f1.c ****   uint32_t status;
2583:lib/ff/sdio_stm32f1.c ****   uint32_t response_r1;
2584:lib/ff/sdio_stm32f1.c **** 
2585:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
2586:lib/ff/sdio_stm32f1.c **** 
2587:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CTIMEOUT | SDIO_FLAG_CMDREND)))
2588:lib/ff/sdio_stm32f1.c ****   {
2589:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
2590:lib/ff/sdio_stm32f1.c ****   }
2591:lib/ff/sdio_stm32f1.c **** 
2592:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
2593:lib/ff/sdio_stm32f1.c ****   {
2594:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2595:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
2596:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2597:lib/ff/sdio_stm32f1.c ****   }
2598:lib/ff/sdio_stm32f1.c ****   else if (status & SDIO_FLAG_CCRCFAIL)
2599:lib/ff/sdio_stm32f1.c ****   {
2600:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_CRC_FAIL;
2601:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CCRCFAIL);
2602:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2603:lib/ff/sdio_stm32f1.c ****   }
2604:lib/ff/sdio_stm32f1.c **** 
2605:lib/ff/sdio_stm32f1.c ****   /*!< Check response received is of desired command */
2606:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetCommandResponse() != cmd)
2607:lib/ff/sdio_stm32f1.c ****   {
2608:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_ILLEGAL_CMD;
2609:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2610:lib/ff/sdio_stm32f1.c ****   }
2611:lib/ff/sdio_stm32f1.c **** 
2612:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
2613:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
2614:lib/ff/sdio_stm32f1.c **** 
2615:lib/ff/sdio_stm32f1.c ****   /*!< We have received response, retrieve it.  */
2616:lib/ff/sdio_stm32f1.c ****   response_r1 = SDIO_GetResponse(SDIO_RESP1);
2617:lib/ff/sdio_stm32f1.c **** 
2618:lib/ff/sdio_stm32f1.c ****   if (SD_ALLZERO == (response_r1 & (SD_R6_GENERAL_UNKNOWN_ERROR | SD_R6_ILLEGAL_CMD | SD_R6_COM_CRC
2619:lib/ff/sdio_stm32f1.c ****   {
2620:lib/ff/sdio_stm32f1.c ****     *prca = (uint16_t) (response_r1 >> 16);
2621:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2622:lib/ff/sdio_stm32f1.c ****   }
2623:lib/ff/sdio_stm32f1.c **** 
2624:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_R6_GENERAL_UNKNOWN_ERROR)
2625:lib/ff/sdio_stm32f1.c ****   {
2626:lib/ff/sdio_stm32f1.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
2627:lib/ff/sdio_stm32f1.c ****   }
2628:lib/ff/sdio_stm32f1.c **** 
2629:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_R6_ILLEGAL_CMD)
2630:lib/ff/sdio_stm32f1.c ****   {
2631:lib/ff/sdio_stm32f1.c ****     return(SD_ILLEGAL_CMD);
2632:lib/ff/sdio_stm32f1.c ****   }
2633:lib/ff/sdio_stm32f1.c **** 
2634:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_R6_COM_CRC_FAILED)
2635:lib/ff/sdio_stm32f1.c ****   {
2636:lib/ff/sdio_stm32f1.c ****     return(SD_COM_CRC_FAILED);
2637:lib/ff/sdio_stm32f1.c ****   }
2638:lib/ff/sdio_stm32f1.c **** 
2639:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2640:lib/ff/sdio_stm32f1.c **** }
2641:lib/ff/sdio_stm32f1.c **** 
2642:lib/ff/sdio_stm32f1.c **** 
2643:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2644:lib/ff/sdio_stm32f1.c **** /*! 
2645:lib/ff/sdio_stm32f1.c **** 	@brief  Enables or disables the SDIO wide bus mode.
2646:lib/ff/sdio_stm32f1.c **** 	@param  NewState: new state of the SDIO wide bus mode.
2647:lib/ff/sdio_stm32f1.c **** 		This parameter can be: ENABLE or DISABLE.
2648:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2649:lib/ff/sdio_stm32f1.c **** */
2650:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2651:lib/ff/sdio_stm32f1.c **** static SD_Error SDEnWideBus(FunctionalState NewState)
2652:lib/ff/sdio_stm32f1.c **** {
2653:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2654:lib/ff/sdio_stm32f1.c **** 
2655:lib/ff/sdio_stm32f1.c ****   uint32_t scr[2] = {0, 0};
2656:lib/ff/sdio_stm32f1.c **** 
2657:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
2658:lib/ff/sdio_stm32f1.c ****   {
2659:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_LOCK_UNLOCK_FAILED;
2660:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2661:lib/ff/sdio_stm32f1.c ****   }
2662:lib/ff/sdio_stm32f1.c **** 
2663:lib/ff/sdio_stm32f1.c ****   /*!< Get SCR Register */
2664:lib/ff/sdio_stm32f1.c ****   errorstatus = FindSCR(RCA, scr);
2665:lib/ff/sdio_stm32f1.c **** 
2666:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2667:lib/ff/sdio_stm32f1.c ****   {
2668:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2669:lib/ff/sdio_stm32f1.c ****   }
2670:lib/ff/sdio_stm32f1.c **** 
2671:lib/ff/sdio_stm32f1.c ****   /*!< If wide bus operation to be enabled */
2672:lib/ff/sdio_stm32f1.c ****   if (NewState == ENABLE)
2673:lib/ff/sdio_stm32f1.c ****   {
2674:lib/ff/sdio_stm32f1.c ****     /*!< If requested card supports wide bus operation */
2675:lib/ff/sdio_stm32f1.c ****     if ((scr[1] & SD_WIDE_BUS_SUPPORT) != SD_ALLZERO)
2676:lib/ff/sdio_stm32f1.c ****     {
2677:lib/ff/sdio_stm32f1.c ****       /*!< Send CMD55 APP_CMD with argument as card's RCA.*/
2678:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
2679:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
2680:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2681:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2682:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2683:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
2684:lib/ff/sdio_stm32f1.c **** 
2685:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
2686:lib/ff/sdio_stm32f1.c **** 
2687:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
2688:lib/ff/sdio_stm32f1.c ****       {
2689:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
2690:lib/ff/sdio_stm32f1.c ****       }
2691:lib/ff/sdio_stm32f1.c **** 
2692:lib/ff/sdio_stm32f1.c ****       /*!< Send ACMD6 APP_CMD with argument as 2 for wide bus mode */
2693:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = 0x2;
2694:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_SD_SET_BUSWIDTH;
2695:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2696:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2697:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2698:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
2699:lib/ff/sdio_stm32f1.c **** 
2700:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
2701:lib/ff/sdio_stm32f1.c **** 
2702:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
2703:lib/ff/sdio_stm32f1.c ****       {
2704:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
2705:lib/ff/sdio_stm32f1.c ****       }
2706:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
2707:lib/ff/sdio_stm32f1.c ****     }
2708:lib/ff/sdio_stm32f1.c ****     else
2709:lib/ff/sdio_stm32f1.c ****     {
2710:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_REQUEST_NOT_APPLICABLE;
2711:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
2712:lib/ff/sdio_stm32f1.c ****     }
2713:lib/ff/sdio_stm32f1.c ****   }   /*!< If wide bus operation to be disabled */
2714:lib/ff/sdio_stm32f1.c ****   else
2715:lib/ff/sdio_stm32f1.c ****   {
2716:lib/ff/sdio_stm32f1.c ****     /*!< If requested card supports 1 bit mode operation */
2717:lib/ff/sdio_stm32f1.c ****     if ((scr[1] & SD_SINGLE_BUS_SUPPORT) != SD_ALLZERO)
2718:lib/ff/sdio_stm32f1.c ****     {
2719:lib/ff/sdio_stm32f1.c ****       /*!< Send CMD55 APP_CMD with argument as card's RCA.*/
2720:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
2721:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
2722:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2723:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2724:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2725:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
2726:lib/ff/sdio_stm32f1.c **** 
2727:lib/ff/sdio_stm32f1.c **** 
2728:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
2729:lib/ff/sdio_stm32f1.c **** 
2730:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
2731:lib/ff/sdio_stm32f1.c ****       {
2732:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
2733:lib/ff/sdio_stm32f1.c ****       }
2734:lib/ff/sdio_stm32f1.c **** 
2735:lib/ff/sdio_stm32f1.c ****       /*!< Send ACMD6 APP_CMD with argument as 2 for wide bus mode */
2736:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = 0x00;
2737:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_SD_SET_BUSWIDTH;
2738:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2739:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2740:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2741:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
2742:lib/ff/sdio_stm32f1.c **** 
2743:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
2744:lib/ff/sdio_stm32f1.c **** 
2745:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
2746:lib/ff/sdio_stm32f1.c ****       {
2747:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
2748:lib/ff/sdio_stm32f1.c ****       }
2749:lib/ff/sdio_stm32f1.c **** 
2750:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
2751:lib/ff/sdio_stm32f1.c ****     }
2752:lib/ff/sdio_stm32f1.c ****     else
2753:lib/ff/sdio_stm32f1.c ****     {
2754:lib/ff/sdio_stm32f1.c ****       errorstatus = SD_REQUEST_NOT_APPLICABLE;
2755:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
2756:lib/ff/sdio_stm32f1.c ****     }
2757:lib/ff/sdio_stm32f1.c ****   }
2758:lib/ff/sdio_stm32f1.c **** }
2759:lib/ff/sdio_stm32f1.c **** 
2760:lib/ff/sdio_stm32f1.c **** 
2761:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2762:lib/ff/sdio_stm32f1.c **** /*! 
2763:lib/ff/sdio_stm32f1.c **** 	@brief  Checks if the SD card is in programming state.
2764:lib/ff/sdio_stm32f1.c **** 	@param  pstatus: pointer to the variable that will contain the SD card state.
2765:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2766:lib/ff/sdio_stm32f1.c **** */
2767:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2768:lib/ff/sdio_stm32f1.c **** static SD_Error IsCardProgramming(uint8_t *pstatus)
2769:lib/ff/sdio_stm32f1.c **** {
  94              		.loc 1 2769 0
  95              		.cfi_startproc
  96              		@ args = 0, pretend = 0, frame = 8
  97              		@ frame_needed = 0, uses_anonymous_args = 0
  98              	.LVL10:
  99 0000 37B5     		push	{r0, r1, r2, r4, r5, lr}
 100              	.LCFI1:
 101              		.cfi_def_cfa_offset 24
 102              		.cfi_offset 0, -24
 103              		.cfi_offset 1, -20
 104              		.cfi_offset 2, -16
 105              		.cfi_offset 4, -12
 106              		.cfi_offset 5, -8
 107              		.cfi_offset 14, -4
 108 0002 0446     		mov	r4, r0
 109              	.LVL11:
2770:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2771:lib/ff/sdio_stm32f1.c ****   __IO uint32_t respR1 = 0, status = 0;
 110              		.loc 1 2771 0
 111 0004 0022     		movs	r2, #0
 112 0006 0092     		str	r2, [sp, #0]
 113              	.LVL12:
 114 0008 0192     		str	r2, [sp, #4]
 115              	.LVL13:
2772:lib/ff/sdio_stm32f1.c **** 
2773:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
 116              		.loc 1 2773 0
 117 000a 5048     		ldr	r0, .L37
 118              	.LVL14:
 119 000c 5049     		ldr	r1, .L37+4
 120 000e 0B68     		ldr	r3, [r1, #0]
 121 0010 1904     		lsls	r1, r3, #16
 122 0012 0160     		str	r1, [r0, #0]
2774:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
 123              		.loc 1 2774 0
 124 0014 0D23     		movs	r3, #13
 125 0016 4360     		str	r3, [r0, #4]
2775:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 126              		.loc 1 2775 0
 127 0018 4021     		movs	r1, #64
 128 001a 8160     		str	r1, [r0, #8]
2776:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 129              		.loc 1 2776 0
 130 001c C260     		str	r2, [r0, #12]
2777:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 131              		.loc 1 2777 0
 132 001e 4FF48062 		mov	r2, #1024
 133 0022 0261     		str	r2, [r0, #16]
2778:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 134              		.loc 1 2778 0
 135 0024 FFF7FEFF 		bl	SDIO_SendCommand
 136              	.LVL15:
2779:lib/ff/sdio_stm32f1.c **** 
2780:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
 137              		.loc 1 2780 0
 138 0028 4A48     		ldr	r0, .L37+8
 139              	.L12:
2781:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)))
2782:lib/ff/sdio_stm32f1.c ****   {
2783:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
 140              		.loc 1 2783 0
 141 002a 436B     		ldr	r3, [r0, #52]
 142              	.LVL16:
 143 002c 0193     		str	r3, [sp, #4]
2781:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)))
 144              		.loc 1 2781 0
 145 002e 0199     		ldr	r1, [sp, #4]
 146 0030 11F0450F 		tst	r1, #69
 147 0034 F9D0     		beq	.L12
2784:lib/ff/sdio_stm32f1.c ****   }
2785:lib/ff/sdio_stm32f1.c **** 
2786:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
 148              		.loc 1 2786 0
 149 0036 019A     		ldr	r2, [sp, #4]
 150 0038 5007     		lsls	r0, r2, #29
 151 003a 04D5     		bpl	.L13
 152              	.LVL17:
2787:lib/ff/sdio_stm32f1.c ****   {
2788:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_RSP_TIMEOUT;
2789:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
 153              		.loc 1 2789 0
 154 003c 0420     		movs	r0, #4
 155 003e FFF7FEFF 		bl	SDIO_ClearFlag
 156              	.LVL18:
2790:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 157              		.loc 1 2790 0
 158 0042 0320     		movs	r0, #3
 159 0044 81E0     		b	.L14
 160              	.LVL19:
 161              	.L13:
2791:lib/ff/sdio_stm32f1.c ****   }
2792:lib/ff/sdio_stm32f1.c ****   else if (status & SDIO_FLAG_CCRCFAIL)
 162              		.loc 1 2792 0
 163 0046 019D     		ldr	r5, [sp, #4]
 164 0048 15F00105 		ands	r5, r5, #1
 165 004c 04D0     		beq	.L15
 166              	.LVL20:
2793:lib/ff/sdio_stm32f1.c ****   {
2794:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_CMD_CRC_FAIL;
2795:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CCRCFAIL);
 167              		.loc 1 2795 0
 168 004e 0120     		movs	r0, #1
 169 0050 FFF7FEFF 		bl	SDIO_ClearFlag
 170              	.LVL21:
2796:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 171              		.loc 1 2796 0
 172 0054 0120     		movs	r0, #1
 173 0056 78E0     		b	.L14
 174              	.LVL22:
 175              	.L15:
2797:lib/ff/sdio_stm32f1.c ****   }
2798:lib/ff/sdio_stm32f1.c **** 
2799:lib/ff/sdio_stm32f1.c ****   status = (uint32_t)SDIO_GetCommandResponse();
 176              		.loc 1 2799 0
 177 0058 FFF7FEFF 		bl	SDIO_GetCommandResponse
 178              	.LVL23:
 179 005c 0190     		str	r0, [sp, #4]
2800:lib/ff/sdio_stm32f1.c **** 
2801:lib/ff/sdio_stm32f1.c ****   /*!< Check response received is of desired command */
2802:lib/ff/sdio_stm32f1.c ****   if (status != SD_CMD_SEND_STATUS)
 180              		.loc 1 2802 0
 181 005e 0198     		ldr	r0, [sp, #4]
 182 0060 0D28     		cmp	r0, #13
 183 0062 01D0     		beq	.L16
 184              	.L17:
2803:lib/ff/sdio_stm32f1.c ****   {
2804:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_ILLEGAL_CMD;
2805:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 185              		.loc 1 2805 0
 186 0064 1020     		movs	r0, #16
 187 0066 70E0     		b	.L14
 188              	.L16:
2806:lib/ff/sdio_stm32f1.c ****   }
2807:lib/ff/sdio_stm32f1.c **** 
2808:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
2809:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 189              		.loc 1 2809 0
 190 0068 40F2FF50 		movw	r0, #1535
 191 006c FFF7FEFF 		bl	SDIO_ClearFlag
 192              	.LVL24:
2810:lib/ff/sdio_stm32f1.c **** 
2811:lib/ff/sdio_stm32f1.c **** 
2812:lib/ff/sdio_stm32f1.c ****   /*!< We have received response, retrieve it for analysis  */
2813:lib/ff/sdio_stm32f1.c ****   respR1 = SDIO_GetResponse(SDIO_RESP1);
 193              		.loc 1 2813 0
 194 0070 2846     		mov	r0, r5
 195 0072 FFF7FEFF 		bl	SDIO_GetResponse
 196              	.LVL25:
 197 0076 0090     		str	r0, [sp, #0]
2814:lib/ff/sdio_stm32f1.c **** 
2815:lib/ff/sdio_stm32f1.c ****   /*!< Find out card status */
2816:lib/ff/sdio_stm32f1.c ****   *pstatus = (uint8_t) ((respR1 >> 9) & 0x0000000F);
 198              		.loc 1 2816 0
 199 0078 009B     		ldr	r3, [sp, #0]
 200 007a C3F34321 		ubfx	r1, r3, #9, #4
 201 007e 2170     		strb	r1, [r4, #0]
2817:lib/ff/sdio_stm32f1.c **** 
2818:lib/ff/sdio_stm32f1.c ****   if ((respR1 & SD_OCR_ERRORBITS) == SD_ALLZERO)
 202              		.loc 1 2818 0
 203 0080 009A     		ldr	r2, [sp, #0]
 204 0082 3548     		ldr	r0, .L37+12
 205              	.LVL26:
 206 0084 1040     		ands	r0, r0, r2
 207 0086 0028     		cmp	r0, #0
 208 0088 3CD0     		beq	.L18
2819:lib/ff/sdio_stm32f1.c ****   {
2820:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2821:lib/ff/sdio_stm32f1.c ****   }
2822:lib/ff/sdio_stm32f1.c **** 
2823:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_ADDR_OUT_OF_RANGE)
 209              		.loc 1 2823 0
 210 008a 009B     		ldr	r3, [sp, #0]
 211 008c 002B     		cmp	r3, #0
 212 008e 3BDB     		blt	.L19
2824:lib/ff/sdio_stm32f1.c ****   {
2825:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_OUT_OF_RANGE);
2826:lib/ff/sdio_stm32f1.c ****   }
2827:lib/ff/sdio_stm32f1.c **** 
2828:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_ADDR_MISALIGNED)
 213              		.loc 1 2828 0
 214 0090 0099     		ldr	r1, [sp, #0]
 215 0092 4900     		lsls	r1, r1, #1
 216 0094 3AD4     		bmi	.L20
2829:lib/ff/sdio_stm32f1.c ****   {
2830:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_MISALIGNED);
2831:lib/ff/sdio_stm32f1.c ****   }
2832:lib/ff/sdio_stm32f1.c **** 
2833:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_BLOCK_LEN_ERR)
 217              		.loc 1 2833 0
 218 0096 009A     		ldr	r2, [sp, #0]
 219 0098 9200     		lsls	r2, r2, #2
 220 009a 39D4     		bmi	.L21
2834:lib/ff/sdio_stm32f1.c ****   {
2835:lib/ff/sdio_stm32f1.c ****     return(SD_BLOCK_LEN_ERR);
2836:lib/ff/sdio_stm32f1.c ****   }
2837:lib/ff/sdio_stm32f1.c **** 
2838:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_ERASE_SEQ_ERR)
 221              		.loc 1 2838 0
 222 009c 0098     		ldr	r0, [sp, #0]
 223 009e C300     		lsls	r3, r0, #3
 224 00a0 38D4     		bmi	.L22
2839:lib/ff/sdio_stm32f1.c ****   {
2840:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_SEQ_ERR);
2841:lib/ff/sdio_stm32f1.c ****   }
2842:lib/ff/sdio_stm32f1.c **** 
2843:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_BAD_ERASE_PARAM)
 225              		.loc 1 2843 0
 226 00a2 009B     		ldr	r3, [sp, #0]
 227 00a4 1801     		lsls	r0, r3, #4
 228 00a6 37D4     		bmi	.L23
2844:lib/ff/sdio_stm32f1.c ****   {
2845:lib/ff/sdio_stm32f1.c ****     return(SD_BAD_ERASE_PARAM);
2846:lib/ff/sdio_stm32f1.c ****   }
2847:lib/ff/sdio_stm32f1.c **** 
2848:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_WRITE_PROT_VIOLATION)
 229              		.loc 1 2848 0
 230 00a8 0099     		ldr	r1, [sp, #0]
 231 00aa 4901     		lsls	r1, r1, #5
 232 00ac 36D4     		bmi	.L24
2849:lib/ff/sdio_stm32f1.c ****   {
2850:lib/ff/sdio_stm32f1.c ****     return(SD_WRITE_PROT_VIOLATION);
2851:lib/ff/sdio_stm32f1.c ****   }
2852:lib/ff/sdio_stm32f1.c **** 
2853:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_LOCK_UNLOCK_FAILED)
 233              		.loc 1 2853 0
 234 00ae 009A     		ldr	r2, [sp, #0]
 235 00b0 D201     		lsls	r2, r2, #7
 236 00b2 35D4     		bmi	.L25
2854:lib/ff/sdio_stm32f1.c ****   {
2855:lib/ff/sdio_stm32f1.c ****     return(SD_LOCK_UNLOCK_FAILED);
2856:lib/ff/sdio_stm32f1.c ****   }
2857:lib/ff/sdio_stm32f1.c **** 
2858:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_COM_CRC_FAILED)
 237              		.loc 1 2858 0
 238 00b4 0098     		ldr	r0, [sp, #0]
 239 00b6 0302     		lsls	r3, r0, #8
 240 00b8 34D4     		bmi	.L26
2859:lib/ff/sdio_stm32f1.c ****   {
2860:lib/ff/sdio_stm32f1.c ****     return(SD_COM_CRC_FAILED);
2861:lib/ff/sdio_stm32f1.c ****   }
2862:lib/ff/sdio_stm32f1.c **** 
2863:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_ILLEGAL_CMD)
 241              		.loc 1 2863 0
 242 00ba 009B     		ldr	r3, [sp, #0]
 243 00bc 5802     		lsls	r0, r3, #9
 244 00be D1D4     		bmi	.L17
2864:lib/ff/sdio_stm32f1.c ****   {
2865:lib/ff/sdio_stm32f1.c ****     return(SD_ILLEGAL_CMD);
2866:lib/ff/sdio_stm32f1.c ****   }
2867:lib/ff/sdio_stm32f1.c **** 
2868:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_CARD_ECC_FAILED)
 245              		.loc 1 2868 0
 246 00c0 0099     		ldr	r1, [sp, #0]
 247 00c2 8902     		lsls	r1, r1, #10
 248 00c4 30D4     		bmi	.L27
2869:lib/ff/sdio_stm32f1.c ****   {
2870:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_FAILED);
2871:lib/ff/sdio_stm32f1.c ****   }
2872:lib/ff/sdio_stm32f1.c **** 
2873:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_CC_ERROR)
 249              		.loc 1 2873 0
 250 00c6 009A     		ldr	r2, [sp, #0]
 251 00c8 D202     		lsls	r2, r2, #11
 252 00ca 2FD4     		bmi	.L28
2874:lib/ff/sdio_stm32f1.c ****   {
2875:lib/ff/sdio_stm32f1.c ****     return(SD_CC_ERROR);
2876:lib/ff/sdio_stm32f1.c ****   }
2877:lib/ff/sdio_stm32f1.c **** 
2878:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_GENERAL_UNKNOWN_ERROR)
 253              		.loc 1 2878 0
 254 00cc 0098     		ldr	r0, [sp, #0]
 255 00ce 0303     		lsls	r3, r0, #12
 256 00d0 2ED4     		bmi	.L29
2879:lib/ff/sdio_stm32f1.c ****   {
2880:lib/ff/sdio_stm32f1.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
2881:lib/ff/sdio_stm32f1.c ****   }
2882:lib/ff/sdio_stm32f1.c **** 
2883:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_STREAM_READ_UNDERRUN)
 257              		.loc 1 2883 0
 258 00d2 009B     		ldr	r3, [sp, #0]
 259 00d4 5803     		lsls	r0, r3, #13
 260 00d6 2DD4     		bmi	.L30
2884:lib/ff/sdio_stm32f1.c ****   {
2885:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_READ_UNDERRUN);
2886:lib/ff/sdio_stm32f1.c ****   }
2887:lib/ff/sdio_stm32f1.c **** 
2888:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_STREAM_WRITE_OVERRUN)
 261              		.loc 1 2888 0
 262 00d8 0099     		ldr	r1, [sp, #0]
 263 00da 8903     		lsls	r1, r1, #14
 264 00dc 2CD4     		bmi	.L31
2889:lib/ff/sdio_stm32f1.c ****   {
2890:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_WRITE_OVERRUN);
2891:lib/ff/sdio_stm32f1.c ****   }
2892:lib/ff/sdio_stm32f1.c **** 
2893:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_CID_CSD_OVERWRIETE)
 265              		.loc 1 2893 0
 266 00de 009A     		ldr	r2, [sp, #0]
 267 00e0 D203     		lsls	r2, r2, #15
 268 00e2 2BD4     		bmi	.L32
2894:lib/ff/sdio_stm32f1.c ****   {
2895:lib/ff/sdio_stm32f1.c ****     return(SD_CID_CSD_OVERWRITE);
2896:lib/ff/sdio_stm32f1.c ****   }
2897:lib/ff/sdio_stm32f1.c **** 
2898:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_WP_ERASE_SKIP)
 269              		.loc 1 2898 0
 270 00e4 0098     		ldr	r0, [sp, #0]
 271 00e6 0304     		lsls	r3, r0, #16
 272 00e8 2AD4     		bmi	.L33
2899:lib/ff/sdio_stm32f1.c ****   {
2900:lib/ff/sdio_stm32f1.c ****     return(SD_WP_ERASE_SKIP);
2901:lib/ff/sdio_stm32f1.c ****   }
2902:lib/ff/sdio_stm32f1.c **** 
2903:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_CARD_ECC_DISABLED)
 273              		.loc 1 2903 0
 274 00ea 009B     		ldr	r3, [sp, #0]
 275 00ec 5804     		lsls	r0, r3, #17
 276 00ee 29D4     		bmi	.L34
2904:lib/ff/sdio_stm32f1.c ****   {
2905:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_DISABLED);
2906:lib/ff/sdio_stm32f1.c ****   }
2907:lib/ff/sdio_stm32f1.c **** 
2908:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_ERASE_RESET)
 277              		.loc 1 2908 0
 278 00f0 0099     		ldr	r1, [sp, #0]
 279 00f2 8904     		lsls	r1, r1, #18
 280 00f4 28D4     		bmi	.L35
2909:lib/ff/sdio_stm32f1.c ****   {
2910:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_RESET);
2911:lib/ff/sdio_stm32f1.c ****   }
2912:lib/ff/sdio_stm32f1.c **** 
2913:lib/ff/sdio_stm32f1.c ****   if (respR1 & SD_OCR_AKE_SEQ_ERROR)
 281              		.loc 1 2913 0
 282 00f6 009A     		ldr	r2, [sp, #0]
2914:lib/ff/sdio_stm32f1.c ****   {
2915:lib/ff/sdio_stm32f1.c ****     return(SD_AKE_SEQ_ERROR);
 283              		.loc 1 2915 0
 284 00f8 12F0080F 		tst	r2, #8
 285 00fc 0CBF     		ite	eq
 286 00fe 2A20     		moveq	r0, #42
 287 0100 1A20     		movne	r0, #26
 288 0102 22E0     		b	.L14
 289              	.L18:
2820:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 290              		.loc 1 2820 0
 291 0104 2A20     		movs	r0, #42
 292 0106 20E0     		b	.L14
 293              	.L19:
2825:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_OUT_OF_RANGE);
 294              		.loc 1 2825 0
 295 0108 1C20     		movs	r0, #28
 296 010a 1EE0     		b	.L14
 297              	.L20:
2830:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_MISALIGNED);
 298              		.loc 1 2830 0
 299 010c 0920     		movs	r0, #9
 300 010e 1CE0     		b	.L14
 301              	.L21:
2835:lib/ff/sdio_stm32f1.c ****     return(SD_BLOCK_LEN_ERR);
 302              		.loc 1 2835 0
 303 0110 0A20     		movs	r0, #10
 304 0112 1AE0     		b	.L14
 305              	.L22:
2840:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_SEQ_ERR);
 306              		.loc 1 2840 0
 307 0114 0B20     		movs	r0, #11
 308 0116 18E0     		b	.L14
 309              	.L23:
2845:lib/ff/sdio_stm32f1.c ****     return(SD_BAD_ERASE_PARAM);
 310              		.loc 1 2845 0
 311 0118 0C20     		movs	r0, #12
 312 011a 16E0     		b	.L14
 313              	.L24:
2850:lib/ff/sdio_stm32f1.c ****     return(SD_WRITE_PROT_VIOLATION);
 314              		.loc 1 2850 0
 315 011c 0D20     		movs	r0, #13
 316 011e 14E0     		b	.L14
 317              	.L25:
2855:lib/ff/sdio_stm32f1.c ****     return(SD_LOCK_UNLOCK_FAILED);
 318              		.loc 1 2855 0
 319 0120 0E20     		movs	r0, #14
 320 0122 12E0     		b	.L14
 321              	.L26:
2860:lib/ff/sdio_stm32f1.c ****     return(SD_COM_CRC_FAILED);
 322              		.loc 1 2860 0
 323 0124 0F20     		movs	r0, #15
 324 0126 10E0     		b	.L14
 325              	.L27:
2870:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_FAILED);
 326              		.loc 1 2870 0
 327 0128 1120     		movs	r0, #17
 328 012a 0EE0     		b	.L14
 329              	.L28:
2875:lib/ff/sdio_stm32f1.c ****     return(SD_CC_ERROR);
 330              		.loc 1 2875 0
 331 012c 1220     		movs	r0, #18
 332 012e 0CE0     		b	.L14
 333              	.L29:
2880:lib/ff/sdio_stm32f1.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
 334              		.loc 1 2880 0
 335 0130 1320     		movs	r0, #19
 336 0132 0AE0     		b	.L14
 337              	.L30:
2885:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_READ_UNDERRUN);
 338              		.loc 1 2885 0
 339 0134 1420     		movs	r0, #20
 340 0136 08E0     		b	.L14
 341              	.L31:
2890:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_WRITE_OVERRUN);
 342              		.loc 1 2890 0
 343 0138 1520     		movs	r0, #21
 344 013a 06E0     		b	.L14
 345              	.L32:
2895:lib/ff/sdio_stm32f1.c ****     return(SD_CID_CSD_OVERWRITE);
 346              		.loc 1 2895 0
 347 013c 1620     		movs	r0, #22
 348 013e 04E0     		b	.L14
 349              	.L33:
2900:lib/ff/sdio_stm32f1.c ****     return(SD_WP_ERASE_SKIP);
 350              		.loc 1 2900 0
 351 0140 1720     		movs	r0, #23
 352 0142 02E0     		b	.L14
 353              	.L34:
2905:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_DISABLED);
 354              		.loc 1 2905 0
 355 0144 1820     		movs	r0, #24
 356 0146 00E0     		b	.L14
 357              	.L35:
2910:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_RESET);
 358              		.loc 1 2910 0
 359 0148 1920     		movs	r0, #25
 360              	.LVL27:
 361              	.L14:
2916:lib/ff/sdio_stm32f1.c ****   }
2917:lib/ff/sdio_stm32f1.c **** 
2918:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
2919:lib/ff/sdio_stm32f1.c **** }
 362              		.loc 1 2919 0
 363 014a 3EBD     		pop	{r1, r2, r3, r4, r5, pc}
 364              	.L38:
 365              		.align	2
 366              	.L37:
 367 014c 00000000 		.word	.LANCHOR0
 368 0150 00000000 		.word	.LANCHOR1
 369 0154 00800140 		.word	1073840128
 370 0158 08E0FFFD 		.word	-33562616
 371              		.cfi_endproc
 372              	.LFE85:
 374              		.section	.text.unlikely.SD_LowLevel_DMA_TxConfig,"ax",%progbits
 375              		.align	1
 376              		.thumb
 377              		.thumb_func
 379              	SD_LowLevel_DMA_TxConfig:
 380              	.LFB88:
2920:lib/ff/sdio_stm32f1.c **** 
2921:lib/ff/sdio_stm32f1.c **** 
2922:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2923:lib/ff/sdio_stm32f1.c **** /*! 
2924:lib/ff/sdio_stm32f1.c **** 	@brief  Find the SD card SCR register value.
2925:lib/ff/sdio_stm32f1.c **** 	@param  rca: selected card address.
2926:lib/ff/sdio_stm32f1.c **** 	@param  pscr: pointer to the buffer that will contain the SCR value.
2927:lib/ff/sdio_stm32f1.c **** 	@retval SD_Error: SD Card Error code.
2928:lib/ff/sdio_stm32f1.c **** */
2929:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
2930:lib/ff/sdio_stm32f1.c **** static SD_Error FindSCR(uint16_t rca, uint32_t *pscr)
2931:lib/ff/sdio_stm32f1.c **** {
2932:lib/ff/sdio_stm32f1.c ****   uint32_t index = 0;
2933:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
2934:lib/ff/sdio_stm32f1.c ****   uint32_t tempscr[2] = {0, 0};
2935:lib/ff/sdio_stm32f1.c **** 
2936:lib/ff/sdio_stm32f1.c ****   /*!< Set Block Size To 8 Bytes */
2937:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD55 APP_CMD with argument as card's RCA */
2938:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)8;
2939:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
2940:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2941:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2942:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2943:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2944:lib/ff/sdio_stm32f1.c **** 
2945:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
2946:lib/ff/sdio_stm32f1.c **** 
2947:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2948:lib/ff/sdio_stm32f1.c ****   {
2949:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2950:lib/ff/sdio_stm32f1.c ****   }
2951:lib/ff/sdio_stm32f1.c **** 
2952:lib/ff/sdio_stm32f1.c ****   /*!< Send CMD55 APP_CMD with argument as card's RCA */
2953:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
2954:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
2955:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2956:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2957:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2958:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2959:lib/ff/sdio_stm32f1.c **** 
2960:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
2961:lib/ff/sdio_stm32f1.c **** 
2962:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2963:lib/ff/sdio_stm32f1.c ****   {
2964:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2965:lib/ff/sdio_stm32f1.c ****   }
2966:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
2967:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 8;
2968:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_8b;
2969:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
2970:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
2971:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
2972:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
2973:lib/ff/sdio_stm32f1.c **** 
2974:lib/ff/sdio_stm32f1.c **** 
2975:lib/ff/sdio_stm32f1.c ****   /*!< Send ACMD51 SD_APP_SEND_SCR with argument as 0 */
2976:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x0;
2977:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_APP_SEND_SCR;
2978:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
2979:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
2980:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
2981:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
2982:lib/ff/sdio_stm32f1.c **** 
2983:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SD_APP_SEND_SCR);
2984:lib/ff/sdio_stm32f1.c **** 
2985:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
2986:lib/ff/sdio_stm32f1.c ****   {
2987:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
2988:lib/ff/sdio_stm32f1.c ****   }
2989:lib/ff/sdio_stm32f1.c **** 
2990:lib/ff/sdio_stm32f1.c ****   while (!(SDIO->STA & (SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DBC
2991:lib/ff/sdio_stm32f1.c ****   {
2992:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
2993:lib/ff/sdio_stm32f1.c ****     {
2994:lib/ff/sdio_stm32f1.c ****       *(tempscr + index) = SDIO_ReadData();
2995:lib/ff/sdio_stm32f1.c ****       index++;
2996:lib/ff/sdio_stm32f1.c ****     }
2997:lib/ff/sdio_stm32f1.c ****   }
2998:lib/ff/sdio_stm32f1.c **** 
2999:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
3000:lib/ff/sdio_stm32f1.c ****   {
3001:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
3002:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_DATA_TIMEOUT;
3003:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
3004:lib/ff/sdio_stm32f1.c ****   }
3005:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
3006:lib/ff/sdio_stm32f1.c ****   {
3007:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
3008:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_DATA_CRC_FAIL;
3009:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
3010:lib/ff/sdio_stm32f1.c ****   }
3011:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
3012:lib/ff/sdio_stm32f1.c ****   {
3013:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
3014:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_RX_OVERRUN;
3015:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
3016:lib/ff/sdio_stm32f1.c ****   }
3017:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
3018:lib/ff/sdio_stm32f1.c ****   {
3019:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_STBITERR);
3020:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_START_BIT_ERR;
3021:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
3022:lib/ff/sdio_stm32f1.c ****   }
3023:lib/ff/sdio_stm32f1.c **** 
3024:lib/ff/sdio_stm32f1.c ****   /*!< Clear all the static flags */
3025:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
3026:lib/ff/sdio_stm32f1.c **** 
3027:lib/ff/sdio_stm32f1.c ****   *(pscr + 1) = ((tempscr[0] & SD_0TO7BITS) << 24) | ((tempscr[0] & SD_8TO15BITS) << 8) | ((tempscr
3028:lib/ff/sdio_stm32f1.c **** 
3029:lib/ff/sdio_stm32f1.c ****   *(pscr) = ((tempscr[1] & SD_0TO7BITS) << 24) | ((tempscr[1] & SD_8TO15BITS) << 8) | ((tempscr[1] 
3030:lib/ff/sdio_stm32f1.c **** 
3031:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
3032:lib/ff/sdio_stm32f1.c **** }
3033:lib/ff/sdio_stm32f1.c **** 
3034:lib/ff/sdio_stm32f1.c **** 
3035:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3036:lib/ff/sdio_stm32f1.c **** /*! 
3037:lib/ff/sdio_stm32f1.c **** 	@brief  Converts the number of bytes in power of two and returns the power.
3038:lib/ff/sdio_stm32f1.c **** 	@param  NumberOfBytes: number of bytes.
3039:lib/ff/sdio_stm32f1.c **** 	@retval None
3040:lib/ff/sdio_stm32f1.c **** */
3041:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3042:lib/ff/sdio_stm32f1.c **** static uint8_t convert_from_bytes_to_power_of_two(uint16_t NumberOfBytes)
3043:lib/ff/sdio_stm32f1.c **** {
3044:lib/ff/sdio_stm32f1.c ****   uint8_t count = 0;
3045:lib/ff/sdio_stm32f1.c **** 
3046:lib/ff/sdio_stm32f1.c ****   while (NumberOfBytes != 1)
3047:lib/ff/sdio_stm32f1.c ****   {
3048:lib/ff/sdio_stm32f1.c ****     NumberOfBytes >>= 1;
3049:lib/ff/sdio_stm32f1.c ****     count++;
3050:lib/ff/sdio_stm32f1.c ****   }
3051:lib/ff/sdio_stm32f1.c ****   return(count);
3052:lib/ff/sdio_stm32f1.c **** }
3053:lib/ff/sdio_stm32f1.c **** 
3054:lib/ff/sdio_stm32f1.c **** 
3055:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3056:lib/ff/sdio_stm32f1.c **** /*! 
3057:lib/ff/sdio_stm32f1.c **** 	@brief  Configures the DMA2 Channel4 for SDIO Tx request.
3058:lib/ff/sdio_stm32f1.c **** 	@param  BufferSRC: pointer to the source buffer
3059:lib/ff/sdio_stm32f1.c **** 	@param  BufferSize: buffer size
3060:lib/ff/sdio_stm32f1.c **** 	@retval None
3061:lib/ff/sdio_stm32f1.c **** */
3062:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3063:lib/ff/sdio_stm32f1.c **** void SD_LowLevel_DMA_TxConfig(uint32_t *BufferSRC, uint32_t BufferSize)
3064:lib/ff/sdio_stm32f1.c **** {
 381              		.loc 1 3064 0
 382              		.cfi_startproc
 383              		@ args = 0, pretend = 0, frame = 48
 384              		@ frame_needed = 0, uses_anonymous_args = 0
 385              	.LVL28:
 386 0000 70B5     		push	{r4, r5, r6, lr}
 387              	.LCFI2:
 388              		.cfi_def_cfa_offset 16
 389              		.cfi_offset 4, -16
 390              		.cfi_offset 5, -12
 391              		.cfi_offset 6, -8
 392              		.cfi_offset 14, -4
 393 0002 8CB0     		sub	sp, sp, #48
 394              	.LCFI3:
 395              		.cfi_def_cfa_offset 64
 396 0004 0546     		mov	r5, r0
 397 0006 0E46     		mov	r6, r1
3065:lib/ff/sdio_stm32f1.c **** 
3066:lib/ff/sdio_stm32f1.c ****   DMA_InitTypeDef DMA_InitStructure;
3067:lib/ff/sdio_stm32f1.c **** 
3068:lib/ff/sdio_stm32f1.c ****   DMA_ClearFlag(DMA2_FLAG_TC4 | DMA2_FLAG_TE4 | DMA2_FLAG_HT4 | DMA2_FLAG_GL4);
 398              		.loc 1 3068 0
 399 0008 1348     		ldr	r0, .L40
 400              	.LVL29:
 401 000a FFF7FEFF 		bl	DMA_ClearFlag
 402              	.LVL30:
3069:lib/ff/sdio_stm32f1.c **** 
3070:lib/ff/sdio_stm32f1.c ****   /*!< DMA2 Channel4 disable */
3071:lib/ff/sdio_stm32f1.c ****   DMA_Cmd(DMA2_Channel4, DISABLE);
 403              		.loc 1 3071 0
 404 000e 134C     		ldr	r4, .L40+4
 405 0010 2046     		mov	r0, r4
 406 0012 0021     		movs	r1, #0
 407 0014 FFF7FEFF 		bl	DMA_Cmd
 408              	.LVL31:
3072:lib/ff/sdio_stm32f1.c **** 
3073:lib/ff/sdio_stm32f1.c ****   /*!< DMA2 Channel4 Config */
3074:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_PeripheralBaseAddr = (uint32_t)SDIO_FIFO_ADDRESS;
 409              		.loc 1 3074 0
 410 0018 114B     		ldr	r3, .L40+8
 411 001a 0193     		str	r3, [sp, #4]
3075:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_MemoryBaseAddr = (uint32_t)BufferSRC;
 412              		.loc 1 3075 0
 413 001c 0295     		str	r5, [sp, #8]
3076:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_DIR = DMA_DIR_PeripheralDST;
 414              		.loc 1 3076 0
 415 001e 1020     		movs	r0, #16
 416 0020 0390     		str	r0, [sp, #12]
3077:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_BufferSize = BufferSize / 4;
 417              		.loc 1 3077 0
 418 0022 B608     		lsrs	r6, r6, #2
 419              	.LVL32:
 420 0024 0496     		str	r6, [sp, #16]
3078:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 421              		.loc 1 3078 0
 422 0026 0021     		movs	r1, #0
 423 0028 0591     		str	r1, [sp, #20]
3079:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;
 424              		.loc 1 3079 0
 425 002a 8022     		movs	r2, #128
 426 002c 0692     		str	r2, [sp, #24]
3080:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Word;
 427              		.loc 1 3080 0
 428 002e 4FF40073 		mov	r3, #512
 429 0032 0793     		str	r3, [sp, #28]
3081:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Word;
 430              		.loc 1 3081 0
 431 0034 4FF40060 		mov	r0, #2048
 432 0038 0890     		str	r0, [sp, #32]
3082:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_Mode = DMA_Mode_Normal;
 433              		.loc 1 3082 0
 434 003a 0991     		str	r1, [sp, #36]
3083:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_Priority = DMA_Priority_High;
 435              		.loc 1 3083 0
 436 003c 4FF40052 		mov	r2, #8192
 437 0040 0A92     		str	r2, [sp, #40]
3084:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_M2M = DMA_M2M_Disable;
 438              		.loc 1 3084 0
 439 0042 0B91     		str	r1, [sp, #44]
3085:lib/ff/sdio_stm32f1.c ****   DMA_Init(DMA2_Channel4, &DMA_InitStructure);
 440              		.loc 1 3085 0
 441 0044 2046     		mov	r0, r4
 442 0046 01A9     		add	r1, sp, #4
 443 0048 FFF7FEFF 		bl	DMA_Init
 444              	.LVL33:
3086:lib/ff/sdio_stm32f1.c **** 
3087:lib/ff/sdio_stm32f1.c ****   /*!< DMA2 Channel4 enable */
3088:lib/ff/sdio_stm32f1.c ****   DMA_Cmd(DMA2_Channel4, ENABLE);  
 445              		.loc 1 3088 0
 446 004c 2046     		mov	r0, r4
 447 004e 0121     		movs	r1, #1
 448 0050 FFF7FEFF 		bl	DMA_Cmd
 449              	.LVL34:
3089:lib/ff/sdio_stm32f1.c **** }
 450              		.loc 1 3089 0
 451 0054 0CB0     		add	sp, sp, #48
 452 0056 70BD     		pop	{r4, r5, r6, pc}
 453              	.L41:
 454              		.align	2
 455              	.L40:
 456 0058 00F00010 		.word	268496896
 457 005c 44040240 		.word	1073873988
 458 0060 80800140 		.word	1073840256
 459              		.cfi_endproc
 460              	.LFE88:
 462              		.section	.text.unlikely.SD_LowLevel_DMA_RxConfig,"ax",%progbits
 463              		.align	1
 464              		.thumb
 465              		.thumb_func
 467              	SD_LowLevel_DMA_RxConfig:
 468              	.LFB89:
3090:lib/ff/sdio_stm32f1.c **** 
3091:lib/ff/sdio_stm32f1.c **** 
3092:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3093:lib/ff/sdio_stm32f1.c **** /*! 
3094:lib/ff/sdio_stm32f1.c **** 	@brief  Configures the DMA2 Channel4 for SDIO Rx request.
3095:lib/ff/sdio_stm32f1.c **** 	@param  BufferDST: pointer to the destination buffer
3096:lib/ff/sdio_stm32f1.c **** 	@param  BufferSize: buffer size
3097:lib/ff/sdio_stm32f1.c **** 	@retval None
3098:lib/ff/sdio_stm32f1.c **** */
3099:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3100:lib/ff/sdio_stm32f1.c **** void SD_LowLevel_DMA_RxConfig(uint32_t *BufferDST, uint32_t BufferSize)
3101:lib/ff/sdio_stm32f1.c **** {
 469              		.loc 1 3101 0
 470              		.cfi_startproc
 471              		@ args = 0, pretend = 0, frame = 48
 472              		@ frame_needed = 0, uses_anonymous_args = 0
 473              	.LVL35:
 474 0000 70B5     		push	{r4, r5, r6, lr}
 475              	.LCFI4:
 476              		.cfi_def_cfa_offset 16
 477              		.cfi_offset 4, -16
 478              		.cfi_offset 5, -12
 479              		.cfi_offset 6, -8
 480              		.cfi_offset 14, -4
 481 0002 8CB0     		sub	sp, sp, #48
 482              	.LCFI5:
 483              		.cfi_def_cfa_offset 64
 484 0004 0546     		mov	r5, r0
 485 0006 0E46     		mov	r6, r1
3102:lib/ff/sdio_stm32f1.c ****   DMA_InitTypeDef DMA_InitStructure;
3103:lib/ff/sdio_stm32f1.c **** 
3104:lib/ff/sdio_stm32f1.c ****   DMA_ClearFlag(DMA2_FLAG_TC4 | DMA2_FLAG_TE4 | DMA2_FLAG_HT4 | DMA2_FLAG_GL4);
 486              		.loc 1 3104 0
 487 0008 1348     		ldr	r0, .L43
 488              	.LVL36:
 489 000a FFF7FEFF 		bl	DMA_ClearFlag
 490              	.LVL37:
3105:lib/ff/sdio_stm32f1.c **** 
3106:lib/ff/sdio_stm32f1.c ****   /*!< DMA2 Channel4 disable */
3107:lib/ff/sdio_stm32f1.c ****   DMA_Cmd(DMA2_Channel4, DISABLE);
 491              		.loc 1 3107 0
 492 000e 134C     		ldr	r4, .L43+4
 493 0010 2046     		mov	r0, r4
 494 0012 0021     		movs	r1, #0
 495 0014 FFF7FEFF 		bl	DMA_Cmd
 496              	.LVL38:
3108:lib/ff/sdio_stm32f1.c **** 
3109:lib/ff/sdio_stm32f1.c ****   /*!< DMA2 Channel4 Config */
3110:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_PeripheralBaseAddr = (uint32_t)SDIO_FIFO_ADDRESS;
 497              		.loc 1 3110 0
 498 0018 114B     		ldr	r3, .L43+8
 499 001a 0193     		str	r3, [sp, #4]
3111:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_MemoryBaseAddr = (uint32_t)BufferDST;
 500              		.loc 1 3111 0
 501 001c 0295     		str	r5, [sp, #8]
3112:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_DIR = DMA_DIR_PeripheralSRC;
 502              		.loc 1 3112 0
 503 001e 0020     		movs	r0, #0
 504 0020 0390     		str	r0, [sp, #12]
3113:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_BufferSize = BufferSize / 4;
 505              		.loc 1 3113 0
 506 0022 B608     		lsrs	r6, r6, #2
 507              	.LVL39:
 508 0024 0496     		str	r6, [sp, #16]
3114:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 509              		.loc 1 3114 0
 510 0026 0590     		str	r0, [sp, #20]
3115:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;
 511              		.loc 1 3115 0
 512 0028 8022     		movs	r2, #128
 513 002a 0692     		str	r2, [sp, #24]
3116:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Word;
 514              		.loc 1 3116 0
 515 002c 4FF40071 		mov	r1, #512
 516 0030 0791     		str	r1, [sp, #28]
3117:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Word;
 517              		.loc 1 3117 0
 518 0032 4FF40063 		mov	r3, #2048
 519 0036 0893     		str	r3, [sp, #32]
3118:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_Mode = DMA_Mode_Normal;
 520              		.loc 1 3118 0
 521 0038 0990     		str	r0, [sp, #36]
3119:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_Priority = DMA_Priority_High;
 522              		.loc 1 3119 0
 523 003a 4FF40052 		mov	r2, #8192
 524 003e 0A92     		str	r2, [sp, #40]
3120:lib/ff/sdio_stm32f1.c ****   DMA_InitStructure.DMA_M2M = DMA_M2M_Disable;
 525              		.loc 1 3120 0
 526 0040 0B90     		str	r0, [sp, #44]
3121:lib/ff/sdio_stm32f1.c ****   DMA_Init(DMA2_Channel4, &DMA_InitStructure);
 527              		.loc 1 3121 0
 528 0042 2046     		mov	r0, r4
 529 0044 01A9     		add	r1, sp, #4
 530 0046 FFF7FEFF 		bl	DMA_Init
 531              	.LVL40:
3122:lib/ff/sdio_stm32f1.c **** 
3123:lib/ff/sdio_stm32f1.c ****   /*!< DMA2 Channel4 enable */
3124:lib/ff/sdio_stm32f1.c ****   DMA_Cmd(DMA2_Channel4, ENABLE); 
 532              		.loc 1 3124 0
 533 004a 2046     		mov	r0, r4
 534 004c 0121     		movs	r1, #1
 535 004e FFF7FEFF 		bl	DMA_Cmd
 536              	.LVL41:
3125:lib/ff/sdio_stm32f1.c **** }
 537              		.loc 1 3125 0
 538 0052 0CB0     		add	sp, sp, #48
 539 0054 70BD     		pop	{r4, r5, r6, pc}
 540              	.L44:
 541 0056 00BF     		.align	2
 542              	.L43:
 543 0058 00F00010 		.word	268496896
 544 005c 44040240 		.word	1073873988
 545 0060 80800140 		.word	1073840256
 546              		.cfi_endproc
 547              	.LFE89:
 549              		.section	.text.CmdResp1Error,"ax",%progbits
 550              		.align	1
 551              		.thumb
 552              		.thumb_func
 554              	CmdResp1Error:
 555              	.LFB80:
2359:lib/ff/sdio_stm32f1.c **** {
 556              		.loc 1 2359 0
 557              		.cfi_startproc
 558              		@ args = 0, pretend = 0, frame = 0
 559              		@ frame_needed = 0, uses_anonymous_args = 0
 560              	.LVL42:
 561 0000 38B5     		push	{r3, r4, r5, lr}
 562              	.LCFI6:
 563              		.cfi_def_cfa_offset 16
 564              		.cfi_offset 3, -16
 565              		.cfi_offset 4, -12
 566              		.cfi_offset 5, -8
 567              		.cfi_offset 14, -4
 568 0002 0546     		mov	r5, r0
 569              	.LVL43:
2364:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
 570              		.loc 1 2364 0
 571 0004 394A     		ldr	r2, .L73
 572              	.L47:
2368:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
 573              		.loc 1 2368 0
 574 0006 536B     		ldr	r3, [r2, #52]
 575              	.LVL44:
2366:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)))
 576              		.loc 1 2366 0
 577 0008 13F0450F 		tst	r3, #69
 578 000c FBD0     		beq	.L47
2371:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
 579              		.loc 1 2371 0
 580 000e 5907     		lsls	r1, r3, #29
 581 0010 04D5     		bpl	.L48
 582              	.LVL45:
2374:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
 583              		.loc 1 2374 0
 584 0012 0420     		movs	r0, #4
 585              	.LVL46:
 586 0014 FFF7FEFF 		bl	SDIO_ClearFlag
 587              	.LVL47:
2375:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 588              		.loc 1 2375 0
 589 0018 0320     		movs	r0, #3
 590 001a 38BD     		pop	{r3, r4, r5, pc}
 591              	.LVL48:
 592              	.L48:
2377:lib/ff/sdio_stm32f1.c ****   else if (status & SDIO_FLAG_CCRCFAIL)
 593              		.loc 1 2377 0
 594 001c 13F00104 		ands	r4, r3, #1
 595 0020 04D0     		beq	.L50
 596              	.LVL49:
2380:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CCRCFAIL);
 597              		.loc 1 2380 0
 598 0022 0120     		movs	r0, #1
 599              	.LVL50:
 600 0024 FFF7FEFF 		bl	SDIO_ClearFlag
 601              	.LVL51:
2381:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 602              		.loc 1 2381 0
 603 0028 0120     		movs	r0, #1
 604 002a 38BD     		pop	{r3, r4, r5, pc}
 605              	.LVL52:
 606              	.L50:
2385:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetCommandResponse() != cmd)
 607              		.loc 1 2385 0
 608 002c FFF7FEFF 		bl	SDIO_GetCommandResponse
 609              	.LVL53:
 610 0030 A842     		cmp	r0, r5
 611 0032 58D1     		bne	.L52
 612              	.LBB8:
 613              	.LBB9:
2392:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 614              		.loc 1 2392 0
 615 0034 40F2FF50 		movw	r0, #1535
 616 0038 FFF7FEFF 		bl	SDIO_ClearFlag
 617              	.LVL54:
2395:lib/ff/sdio_stm32f1.c ****   response_r1 = SDIO_GetResponse(SDIO_RESP1);
 618              		.loc 1 2395 0
 619 003c 2046     		mov	r0, r4
 620 003e FFF7FEFF 		bl	SDIO_GetResponse
 621              	.LVL55:
2397:lib/ff/sdio_stm32f1.c ****   if ((response_r1 & SD_OCR_ERRORBITS) == SD_ALLZERO)
 622              		.loc 1 2397 0
 623 0042 2B49     		ldr	r1, .L73+4
 624 0044 0140     		ands	r1, r1, r0
 625 0046 0029     		cmp	r1, #0
 626 0048 29D0     		beq	.L53
2402:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ADDR_OUT_OF_RANGE)
 627              		.loc 1 2402 0
 628 004a 0028     		cmp	r0, #0
 629 004c 29DB     		blt	.L54
2407:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ADDR_MISALIGNED)
 630              		.loc 1 2407 0
 631 004e 4200     		lsls	r2, r0, #1
 632 0050 29D4     		bmi	.L55
2412:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_BLOCK_LEN_ERR)
 633              		.loc 1 2412 0
 634 0052 8300     		lsls	r3, r0, #2
 635 0054 29D4     		bmi	.L56
2417:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ERASE_SEQ_ERR)
 636              		.loc 1 2417 0
 637 0056 C100     		lsls	r1, r0, #3
 638 0058 29D4     		bmi	.L57
2422:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_BAD_ERASE_PARAM)
 639              		.loc 1 2422 0
 640 005a 0201     		lsls	r2, r0, #4
 641 005c 29D4     		bmi	.L58
2427:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_WRITE_PROT_VIOLATION)
 642              		.loc 1 2427 0
 643 005e 4301     		lsls	r3, r0, #5
 644 0060 29D4     		bmi	.L59
2432:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_LOCK_UNLOCK_FAILED)
 645              		.loc 1 2432 0
 646 0062 C101     		lsls	r1, r0, #7
 647 0064 29D4     		bmi	.L60
2437:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_COM_CRC_FAILED)
 648              		.loc 1 2437 0
 649 0066 0202     		lsls	r2, r0, #8
 650 0068 29D4     		bmi	.L61
2442:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ILLEGAL_CMD)
 651              		.loc 1 2442 0
 652 006a 4302     		lsls	r3, r0, #9
 653 006c 3BD4     		bmi	.L52
2447:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CARD_ECC_FAILED)
 654              		.loc 1 2447 0
 655 006e 8102     		lsls	r1, r0, #10
 656 0070 27D4     		bmi	.L63
2452:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CC_ERROR)
 657              		.loc 1 2452 0
 658 0072 C202     		lsls	r2, r0, #11
 659 0074 27D4     		bmi	.L64
2457:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_GENERAL_UNKNOWN_ERROR)
 660              		.loc 1 2457 0
 661 0076 0303     		lsls	r3, r0, #12
 662 0078 27D4     		bmi	.L65
2462:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_STREAM_READ_UNDERRUN)
 663              		.loc 1 2462 0
 664 007a 4103     		lsls	r1, r0, #13
 665 007c 27D4     		bmi	.L66
2467:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_STREAM_WRITE_OVERRUN)
 666              		.loc 1 2467 0
 667 007e 8203     		lsls	r2, r0, #14
 668 0080 27D4     		bmi	.L67
2472:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CID_CSD_OVERWRIETE)
 669              		.loc 1 2472 0
 670 0082 C303     		lsls	r3, r0, #15
 671 0084 27D4     		bmi	.L68
2477:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_WP_ERASE_SKIP)
 672              		.loc 1 2477 0
 673 0086 0104     		lsls	r1, r0, #16
 674 0088 27D4     		bmi	.L69
2482:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_CARD_ECC_DISABLED)
 675              		.loc 1 2482 0
 676 008a 4204     		lsls	r2, r0, #17
 677 008c 27D4     		bmi	.L70
2487:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_OCR_ERASE_RESET)
 678              		.loc 1 2487 0
 679 008e 8304     		lsls	r3, r0, #18
 680 0090 27D4     		bmi	.L71
2494:lib/ff/sdio_stm32f1.c ****     return(SD_AKE_SEQ_ERROR);
 681              		.loc 1 2494 0
 682 0092 10F0080F 		tst	r0, #8
 683 0096 0CBF     		ite	eq
 684 0098 2A20     		moveq	r0, #42
 685 009a 1A20     		movne	r0, #26
 686              	.LVL56:
 687 009c 38BD     		pop	{r3, r4, r5, pc}
 688              	.LVL57:
 689              	.L53:
2399:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 690              		.loc 1 2399 0
 691 009e 2A20     		movs	r0, #42
 692              	.LVL58:
 693 00a0 38BD     		pop	{r3, r4, r5, pc}
 694              	.LVL59:
 695              	.L54:
2404:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_OUT_OF_RANGE);
 696              		.loc 1 2404 0
 697 00a2 1C20     		movs	r0, #28
 698              	.LVL60:
 699 00a4 38BD     		pop	{r3, r4, r5, pc}
 700              	.LVL61:
 701              	.L55:
2409:lib/ff/sdio_stm32f1.c ****     return(SD_ADDR_MISALIGNED);
 702              		.loc 1 2409 0
 703 00a6 0920     		movs	r0, #9
 704              	.LVL62:
 705 00a8 38BD     		pop	{r3, r4, r5, pc}
 706              	.LVL63:
 707              	.L56:
2414:lib/ff/sdio_stm32f1.c ****     return(SD_BLOCK_LEN_ERR);
 708              		.loc 1 2414 0
 709 00aa 0A20     		movs	r0, #10
 710              	.LVL64:
 711 00ac 38BD     		pop	{r3, r4, r5, pc}
 712              	.LVL65:
 713              	.L57:
2419:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_SEQ_ERR);
 714              		.loc 1 2419 0
 715 00ae 0B20     		movs	r0, #11
 716              	.LVL66:
 717 00b0 38BD     		pop	{r3, r4, r5, pc}
 718              	.LVL67:
 719              	.L58:
2424:lib/ff/sdio_stm32f1.c ****     return(SD_BAD_ERASE_PARAM);
 720              		.loc 1 2424 0
 721 00b2 0C20     		movs	r0, #12
 722              	.LVL68:
 723 00b4 38BD     		pop	{r3, r4, r5, pc}
 724              	.LVL69:
 725              	.L59:
2429:lib/ff/sdio_stm32f1.c ****     return(SD_WRITE_PROT_VIOLATION);
 726              		.loc 1 2429 0
 727 00b6 0D20     		movs	r0, #13
 728              	.LVL70:
 729 00b8 38BD     		pop	{r3, r4, r5, pc}
 730              	.LVL71:
 731              	.L60:
2434:lib/ff/sdio_stm32f1.c ****     return(SD_LOCK_UNLOCK_FAILED);
 732              		.loc 1 2434 0
 733 00ba 0E20     		movs	r0, #14
 734              	.LVL72:
 735 00bc 38BD     		pop	{r3, r4, r5, pc}
 736              	.LVL73:
 737              	.L61:
2439:lib/ff/sdio_stm32f1.c ****     return(SD_COM_CRC_FAILED);
 738              		.loc 1 2439 0
 739 00be 0F20     		movs	r0, #15
 740              	.LVL74:
 741 00c0 38BD     		pop	{r3, r4, r5, pc}
 742              	.LVL75:
 743              	.L63:
2449:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_FAILED);
 744              		.loc 1 2449 0
 745 00c2 1120     		movs	r0, #17
 746              	.LVL76:
 747 00c4 38BD     		pop	{r3, r4, r5, pc}
 748              	.LVL77:
 749              	.L64:
2454:lib/ff/sdio_stm32f1.c ****     return(SD_CC_ERROR);
 750              		.loc 1 2454 0
 751 00c6 1220     		movs	r0, #18
 752              	.LVL78:
 753 00c8 38BD     		pop	{r3, r4, r5, pc}
 754              	.LVL79:
 755              	.L65:
2459:lib/ff/sdio_stm32f1.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
 756              		.loc 1 2459 0
 757 00ca 1320     		movs	r0, #19
 758              	.LVL80:
 759 00cc 38BD     		pop	{r3, r4, r5, pc}
 760              	.LVL81:
 761              	.L66:
2464:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_READ_UNDERRUN);
 762              		.loc 1 2464 0
 763 00ce 1420     		movs	r0, #20
 764              	.LVL82:
 765 00d0 38BD     		pop	{r3, r4, r5, pc}
 766              	.LVL83:
 767              	.L67:
2469:lib/ff/sdio_stm32f1.c ****     return(SD_STREAM_WRITE_OVERRUN);
 768              		.loc 1 2469 0
 769 00d2 1520     		movs	r0, #21
 770              	.LVL84:
 771 00d4 38BD     		pop	{r3, r4, r5, pc}
 772              	.LVL85:
 773              	.L68:
2474:lib/ff/sdio_stm32f1.c ****     return(SD_CID_CSD_OVERWRITE);
 774              		.loc 1 2474 0
 775 00d6 1620     		movs	r0, #22
 776              	.LVL86:
 777 00d8 38BD     		pop	{r3, r4, r5, pc}
 778              	.LVL87:
 779              	.L69:
2479:lib/ff/sdio_stm32f1.c ****     return(SD_WP_ERASE_SKIP);
 780              		.loc 1 2479 0
 781 00da 1720     		movs	r0, #23
 782              	.LVL88:
 783 00dc 38BD     		pop	{r3, r4, r5, pc}
 784              	.LVL89:
 785              	.L70:
2484:lib/ff/sdio_stm32f1.c ****     return(SD_CARD_ECC_DISABLED);
 786              		.loc 1 2484 0
 787 00de 1820     		movs	r0, #24
 788              	.LVL90:
 789 00e0 38BD     		pop	{r3, r4, r5, pc}
 790              	.LVL91:
 791              	.L71:
2489:lib/ff/sdio_stm32f1.c ****     return(SD_ERASE_RESET);
 792              		.loc 1 2489 0
 793 00e2 1920     		movs	r0, #25
 794              	.LVL92:
 795 00e4 38BD     		pop	{r3, r4, r5, pc}
 796              	.L52:
 797              	.LBE9:
 798              	.LBE8:
2388:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 799              		.loc 1 2388 0
 800 00e6 1020     		movs	r0, #16
2497:lib/ff/sdio_stm32f1.c **** }
 801              		.loc 1 2497 0
 802 00e8 38BD     		pop	{r3, r4, r5, pc}
 803              	.L74:
 804 00ea 00BF     		.align	2
 805              	.L73:
 806 00ec 00800140 		.word	1073840128
 807 00f0 08E0FFFD 		.word	-33562616
 808              		.cfi_endproc
 809              	.LFE80:
 811              		.section	.text.SDEnWideBus,"ax",%progbits
 812              		.align	1
 813              		.thumb
 814              		.thumb_func
 816              	SDEnWideBus:
 817              	.LFB84:
2652:lib/ff/sdio_stm32f1.c **** {
 818              		.loc 1 2652 0
 819              		.cfi_startproc
 820              		@ args = 0, pretend = 0, frame = 8
 821              		@ frame_needed = 0, uses_anonymous_args = 0
 822              	.LVL93:
 823 0000 2DE9F347 		push	{r0, r1, r4, r5, r6, r7, r8, r9, sl, lr}
 824              	.LCFI7:
 825              		.cfi_def_cfa_offset 40
 826              		.cfi_offset 0, -40
 827              		.cfi_offset 1, -36
 828              		.cfi_offset 4, -32
 829              		.cfi_offset 5, -28
 830              		.cfi_offset 6, -24
 831              		.cfi_offset 7, -20
 832              		.cfi_offset 8, -16
 833              		.cfi_offset 9, -12
 834              		.cfi_offset 10, -8
 835              		.cfi_offset 14, -4
 836 0004 8046     		mov	r8, r0
 837              	.LVL94:
2657:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 838              		.loc 1 2657 0
 839 0006 0020     		movs	r0, #0
 840              	.LVL95:
 841 0008 FFF7FEFF 		bl	SDIO_GetResponse
 842              	.LVL96:
 843 000c 10F00075 		ands	r5, r0, #33554432
 844 0010 40F0DE80 		bne	.L86
 845              	.LVL97:
 846              	.LBB12:
 847              	.LBB13:
2934:lib/ff/sdio_stm32f1.c ****   uint32_t tempscr[2] = {0, 0};
 848              		.loc 1 2934 0
 849 0014 0095     		str	r5, [sp, #0]
 850 0016 0195     		str	r5, [sp, #4]
2938:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)8;
 851              		.loc 1 2938 0
 852 0018 704C     		ldr	r4, .L101
2939:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
 853              		.loc 1 2939 0
 854 001a 4FF00809 		mov	r9, #8
 855 001e 4FF0100A 		mov	sl, #16
 856 0022 84E80006 		stmia	r4, {r9, sl}
2940:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 857              		.loc 1 2940 0
 858 0026 4027     		movs	r7, #64
 859 0028 A760     		str	r7, [r4, #8]
2941:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 860              		.loc 1 2941 0
 861 002a E560     		str	r5, [r4, #12]
2942:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 862              		.loc 1 2942 0
 863 002c 4FF48066 		mov	r6, #1024
 864 0030 2661     		str	r6, [r4, #16]
2943:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 865              		.loc 1 2943 0
 866 0032 2046     		mov	r0, r4
 867 0034 FFF7FEFF 		bl	SDIO_SendCommand
 868              	.LVL98:
2945:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 869              		.loc 1 2945 0
 870 0038 5046     		mov	r0, sl
 871 003a FFF7FEFF 		bl	CmdResp1Error
 872              	.LVL99:
2947:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 873              		.loc 1 2947 0
 874 003e 2A28     		cmp	r0, #42
 875 0040 70D1     		bne	.L77
2953:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
 876              		.loc 1 2953 0
 877 0042 674B     		ldr	r3, .L101+4
 878 0044 1868     		ldr	r0, [r3, #0]
 879              	.LVL100:
 880 0046 00FA0AF1 		lsl	r1, r0, sl
 881 004a 2160     		str	r1, [r4, #0]
2954:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 882              		.loc 1 2954 0
 883 004c 4FF0370A 		mov	sl, #55
 884 0050 C4F804A0 		str	sl, [r4, #4]
2955:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 885              		.loc 1 2955 0
 886 0054 A760     		str	r7, [r4, #8]
2956:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 887              		.loc 1 2956 0
 888 0056 E560     		str	r5, [r4, #12]
2957:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 889              		.loc 1 2957 0
 890 0058 2661     		str	r6, [r4, #16]
2958:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 891              		.loc 1 2958 0
 892 005a 2046     		mov	r0, r4
 893 005c FFF7FEFF 		bl	SDIO_SendCommand
 894              	.LVL101:
2960:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 895              		.loc 1 2960 0
 896 0060 5046     		mov	r0, sl
 897 0062 FFF7FEFF 		bl	CmdResp1Error
 898              	.LVL102:
2962:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 899              		.loc 1 2962 0
 900 0066 2A28     		cmp	r0, #42
 901 0068 5CD1     		bne	.L77
2966:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 902              		.loc 1 2966 0
 903 006a 5E48     		ldr	r0, .L101+8
 904              	.LVL103:
 905 006c 5E4A     		ldr	r2, .L101+12
2967:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 8;
 906              		.loc 1 2967 0
 907 006e 80E80402 		stmia	r0, {r2, r9}
2968:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_8b;
 908              		.loc 1 2968 0
 909 0072 3022     		movs	r2, #48
 910 0074 8260     		str	r2, [r0, #8]
2969:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
 911              		.loc 1 2969 0
 912 0076 0223     		movs	r3, #2
 913 0078 C360     		str	r3, [r0, #12]
2970:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 914              		.loc 1 2970 0
 915 007a 0561     		str	r5, [r0, #16]
2971:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
 916              		.loc 1 2971 0
 917 007c 0121     		movs	r1, #1
 918 007e 4161     		str	r1, [r0, #20]
2972:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 919              		.loc 1 2972 0
 920 0080 FFF7FEFF 		bl	SDIO_DataConfig
 921              	.LVL104:
2976:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 922              		.loc 1 2976 0
 923 0084 2560     		str	r5, [r4, #0]
2977:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_APP_SEND_SCR;
 924              		.loc 1 2977 0
 925 0086 4FF03309 		mov	r9, #51
 926 008a C4F80490 		str	r9, [r4, #4]
2978:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 927              		.loc 1 2978 0
 928 008e A760     		str	r7, [r4, #8]
2979:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 929              		.loc 1 2979 0
 930 0090 E560     		str	r5, [r4, #12]
2980:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 931              		.loc 1 2980 0
 932 0092 2661     		str	r6, [r4, #16]
2981:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 933              		.loc 1 2981 0
 934 0094 2046     		mov	r0, r4
 935 0096 FFF7FEFF 		bl	SDIO_SendCommand
 936              	.LVL105:
2983:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SD_APP_SEND_SCR);
 937              		.loc 1 2983 0
 938 009a 4846     		mov	r0, r9
 939 009c FFF7FEFF 		bl	CmdResp1Error
 940              	.LVL106:
2985:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 941              		.loc 1 2985 0
 942 00a0 2A28     		cmp	r0, #42
 943 00a2 3FD1     		bne	.L77
2651:lib/ff/sdio_stm32f1.c **** static SD_Error SDEnWideBus(FunctionalState NewState)
 944              		.loc 1 2651 0
 945 00a4 ADF10404 		sub	r4, sp, #4
 946              	.LVL107:
 947              	.L97:
2990:lib/ff/sdio_stm32f1.c ****   while (!(SDIO->STA & (SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DBC
 948              		.loc 1 2990 0
 949 00a8 5048     		ldr	r0, .L101+16
 950 00aa 426B     		ldr	r2, [r0, #52]
 951 00ac 40F22A63 		movw	r3, #1578
 952 00b0 1340     		ands	r3, r3, r2
 953 00b2 53B9     		cbnz	r3, .L100
 954              	.L80:
2992:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
 955              		.loc 1 2992 0
 956 00b4 4FF40010 		mov	r0, #2097152
 957 00b8 FFF7FEFF 		bl	SDIO_GetFlagStatus
 958              	.LVL108:
 959 00bc 0028     		cmp	r0, #0
 960 00be F3D0     		beq	.L97
2994:lib/ff/sdio_stm32f1.c ****       *(tempscr + index) = SDIO_ReadData();
 961              		.loc 1 2994 0
 962 00c0 FFF7FEFF 		bl	SDIO_ReadData
 963              	.LVL109:
 964 00c4 44F8040F 		str	r0, [r4, #4]!
 965 00c8 EEE7     		b	.L97
 966              	.L100:
2999:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
 967              		.loc 1 2999 0
 968 00ca 0820     		movs	r0, #8
 969 00cc FFF7FEFF 		bl	SDIO_GetFlagStatus
 970              	.LVL110:
 971 00d0 20B1     		cbz	r0, .L81
3001:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
 972              		.loc 1 3001 0
 973 00d2 0820     		movs	r0, #8
 974 00d4 FFF7FEFF 		bl	SDIO_ClearFlag
 975              	.LVL111:
3003:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 976              		.loc 1 3003 0
 977 00d8 0420     		movs	r0, #4
 978 00da 7CE0     		b	.L76
 979              	.LVL112:
 980              	.L81:
3005:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
 981              		.loc 1 3005 0
 982 00dc 0220     		movs	r0, #2
 983 00de FFF7FEFF 		bl	SDIO_GetFlagStatus
 984              	.LVL113:
 985 00e2 20B1     		cbz	r0, .L82
3007:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
 986              		.loc 1 3007 0
 987 00e4 0220     		movs	r0, #2
 988 00e6 FFF7FEFF 		bl	SDIO_ClearFlag
 989              	.LVL114:
3009:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 990              		.loc 1 3009 0
 991 00ea 0220     		movs	r0, #2
 992 00ec 73E0     		b	.L76
 993              	.LVL115:
 994              	.L82:
3011:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
 995              		.loc 1 3011 0
 996 00ee 2020     		movs	r0, #32
 997 00f0 FFF7FEFF 		bl	SDIO_GetFlagStatus
 998              	.LVL116:
 999 00f4 20B1     		cbz	r0, .L83
3013:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
 1000              		.loc 1 3013 0
 1001 00f6 2020     		movs	r0, #32
 1002 00f8 FFF7FEFF 		bl	SDIO_ClearFlag
 1003              	.LVL117:
3015:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1004              		.loc 1 3015 0
 1005 00fc 0620     		movs	r0, #6
 1006 00fe 6AE0     		b	.L76
 1007              	.LVL118:
 1008              	.L83:
3017:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
 1009              		.loc 1 3017 0
 1010 0100 4FF40070 		mov	r0, #512
 1011 0104 FFF7FEFF 		bl	SDIO_GetFlagStatus
 1012              	.LVL119:
 1013 0108 28B1     		cbz	r0, .L84
3019:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_STBITERR);
 1014              		.loc 1 3019 0
 1015 010a 4FF40070 		mov	r0, #512
 1016 010e FFF7FEFF 		bl	SDIO_ClearFlag
 1017              	.LVL120:
3021:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1018              		.loc 1 3021 0
 1019 0112 0720     		movs	r0, #7
 1020 0114 5FE0     		b	.L76
 1021              	.LVL121:
 1022              	.L84:
3025:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 1023              		.loc 1 3025 0
 1024 0116 40F2FF50 		movw	r0, #1535
 1025 011a FFF7FEFF 		bl	SDIO_ClearFlag
 1026              	.LVL122:
 1027 011e 009D     		ldr	r5, [sp, #0]
 1028 0120 2DBA     		rev	r5, r5
 1029 0122 01E0     		b	.L98
 1030              	.LVL123:
 1031              	.L77:
 1032              	.LBE13:
 1033              	.LBE12:
2666:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 1034              		.loc 1 2666 0
 1035 0124 2A28     		cmp	r0, #42
 1036 0126 56D1     		bne	.L76
 1037              	.LVL124:
 1038              	.L98:
2672:lib/ff/sdio_stm32f1.c ****   if (NewState == ENABLE)
 1039              		.loc 1 2672 0
 1040 0128 B8F1010F 		cmp	r8, #1
 1041 012c 26D1     		bne	.L85
2675:lib/ff/sdio_stm32f1.c ****     if ((scr[1] & SD_WIDE_BUS_SUPPORT) != SD_ALLZERO)
 1042              		.loc 1 2675 0
 1043 012e 6B03     		lsls	r3, r5, #13
 1044 0130 50D5     		bpl	.L91
2678:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
 1045              		.loc 1 2678 0
 1046 0132 2A4C     		ldr	r4, .L101
 1047 0134 2A48     		ldr	r0, .L101+4
 1048 0136 0268     		ldr	r2, [r0, #0]
 1049 0138 1304     		lsls	r3, r2, #16
 1050 013a 2360     		str	r3, [r4, #0]
2679:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 1051              		.loc 1 2679 0
 1052 013c 3725     		movs	r5, #55
 1053 013e 6560     		str	r5, [r4, #4]
2680:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1054              		.loc 1 2680 0
 1055 0140 4FF04008 		mov	r8, #64
 1056 0144 C4F80880 		str	r8, [r4, #8]
2681:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1057              		.loc 1 2681 0
 1058 0148 0027     		movs	r7, #0
 1059 014a E760     		str	r7, [r4, #12]
2682:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1060              		.loc 1 2682 0
 1061 014c 4FF48066 		mov	r6, #1024
 1062 0150 2661     		str	r6, [r4, #16]
2683:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 1063              		.loc 1 2683 0
 1064 0152 2046     		mov	r0, r4
 1065 0154 FFF7FEFF 		bl	SDIO_SendCommand
 1066              	.LVL125:
2685:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 1067              		.loc 1 2685 0
 1068 0158 2846     		mov	r0, r5
 1069 015a FFF7FEFF 		bl	CmdResp1Error
 1070              	.LVL126:
2687:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 1071              		.loc 1 2687 0
 1072 015e 2A28     		cmp	r0, #42
 1073 0160 39D1     		bne	.L76
2694:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_SD_SET_BUSWIDTH;
 1074              		.loc 1 2694 0
 1075 0162 0223     		movs	r3, #2
 1076 0164 0625     		movs	r5, #6
 1077 0166 84E82800 		stmia	r4, {r3, r5}
2695:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1078              		.loc 1 2695 0
 1079 016a C4F80880 		str	r8, [r4, #8]
2696:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1080              		.loc 1 2696 0
 1081 016e E760     		str	r7, [r4, #12]
2697:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1082              		.loc 1 2697 0
 1083 0170 2661     		str	r6, [r4, #16]
2698:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 1084              		.loc 1 2698 0
 1085 0172 2046     		mov	r0, r4
 1086              	.LVL127:
 1087 0174 FFF7FEFF 		bl	SDIO_SendCommand
 1088              	.LVL128:
2700:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
 1089              		.loc 1 2700 0
 1090 0178 2846     		mov	r0, r5
 1091 017a 24E0     		b	.L99
 1092              	.L85:
2717:lib/ff/sdio_stm32f1.c ****     if ((scr[1] & SD_SINGLE_BUS_SUPPORT) != SD_ALLZERO)
 1093              		.loc 1 2717 0
 1094 017c E803     		lsls	r0, r5, #15
 1095 017e 29D5     		bpl	.L91
2720:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
 1096              		.loc 1 2720 0
 1097 0180 164C     		ldr	r4, .L101
 1098 0182 174E     		ldr	r6, .L101+4
 1099 0184 3768     		ldr	r7, [r6, #0]
 1100 0186 3904     		lsls	r1, r7, #16
 1101 0188 2160     		str	r1, [r4, #0]
2721:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 1102              		.loc 1 2721 0
 1103 018a 3726     		movs	r6, #55
 1104 018c 6660     		str	r6, [r4, #4]
2722:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1105              		.loc 1 2722 0
 1106 018e 4FF04008 		mov	r8, #64
 1107 0192 C4F80880 		str	r8, [r4, #8]
2723:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1108              		.loc 1 2723 0
 1109 0196 0025     		movs	r5, #0
 1110 0198 E560     		str	r5, [r4, #12]
2724:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1111              		.loc 1 2724 0
 1112 019a 4FF48067 		mov	r7, #1024
 1113 019e 2761     		str	r7, [r4, #16]
2725:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 1114              		.loc 1 2725 0
 1115 01a0 2046     		mov	r0, r4
 1116 01a2 FFF7FEFF 		bl	SDIO_SendCommand
 1117              	.LVL129:
2728:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 1118              		.loc 1 2728 0
 1119 01a6 3046     		mov	r0, r6
 1120 01a8 FFF7FEFF 		bl	CmdResp1Error
 1121              	.LVL130:
2730:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 1122              		.loc 1 2730 0
 1123 01ac 2A28     		cmp	r0, #42
 1124 01ae 12D1     		bne	.L76
2736:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 1125              		.loc 1 2736 0
 1126 01b0 2560     		str	r5, [r4, #0]
2737:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_SD_SET_BUSWIDTH;
 1127              		.loc 1 2737 0
 1128 01b2 0626     		movs	r6, #6
 1129 01b4 6660     		str	r6, [r4, #4]
2738:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1130              		.loc 1 2738 0
 1131 01b6 C4F80880 		str	r8, [r4, #8]
2739:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1132              		.loc 1 2739 0
 1133 01ba E560     		str	r5, [r4, #12]
2740:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1134              		.loc 1 2740 0
 1135 01bc 2761     		str	r7, [r4, #16]
2741:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 1136              		.loc 1 2741 0
 1137 01be 2046     		mov	r0, r4
 1138              	.LVL131:
 1139 01c0 FFF7FEFF 		bl	SDIO_SendCommand
 1140              	.LVL132:
2743:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
 1141              		.loc 1 2743 0
 1142 01c4 3046     		mov	r0, r6
 1143              	.L99:
2758:lib/ff/sdio_stm32f1.c **** }
 1144              		.loc 1 2758 0
 1145 01c6 02B0     		add	sp, sp, #8
 1146 01c8 BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, sl, lr}
2743:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_SD_SET_BUSWIDTH);
 1147              		.loc 1 2743 0
 1148 01cc FFF7FEBF 		b	CmdResp1Error
 1149              	.LVL133:
 1150              	.L86:
2660:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1151              		.loc 1 2660 0
 1152 01d0 0E20     		movs	r0, #14
 1153 01d2 00E0     		b	.L76
 1154              	.LVL134:
 1155              	.L91:
2711:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 1156              		.loc 1 2711 0
 1157 01d4 2520     		movs	r0, #37
 1158              	.LVL135:
 1159              	.L76:
2758:lib/ff/sdio_stm32f1.c **** }
 1160              		.loc 1 2758 0
 1161 01d6 02B0     		add	sp, sp, #8
 1162 01d8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, sl, pc}
 1163              	.L102:
 1164              		.align	2
 1165              	.L101:
 1166 01dc 00000000 		.word	.LANCHOR0
 1167 01e0 00000000 		.word	.LANCHOR1
 1168 01e4 00000000 		.word	.LANCHOR2
 1169 01e8 FFFF0F00 		.word	1048575
 1170 01ec 00800140 		.word	1073840128
 1171              		.cfi_endproc
 1172              	.LFE84:
 1174              		.section	.text.SD_DeInit,"ax",%progbits
 1175              		.align	1
 1176              		.global	SD_DeInit
 1177              		.thumb
 1178              		.thumb_func
 1180              	SD_DeInit:
 1181              	.LFB56:
 144:lib/ff/sdio_stm32f1.c **** { 
 1182              		.loc 1 144 0
 1183              		.cfi_startproc
 1184              		@ args = 0, pretend = 0, frame = 8
 1185              		@ frame_needed = 0, uses_anonymous_args = 0
 1186 0000 13B5     		push	{r0, r1, r4, lr}
 1187              	.LCFI8:
 1188              		.cfi_def_cfa_offset 16
 1189              		.cfi_offset 0, -16
 1190              		.cfi_offset 1, -12
 1191              		.cfi_offset 4, -8
 1192              		.cfi_offset 14, -4
 148:lib/ff/sdio_stm32f1.c ****   SDIO_ClockCmd(DISABLE);
 1193              		.loc 1 148 0
 1194 0002 0020     		movs	r0, #0
 1195 0004 FFF7FEFF 		bl	SDIO_ClockCmd
 1196              	.LVL136:
 151:lib/ff/sdio_stm32f1.c ****   SDIO_SetPowerState(SDIO_PowerState_OFF);
 1197              		.loc 1 151 0
 1198 0008 0020     		movs	r0, #0
 1199 000a FFF7FEFF 		bl	SDIO_SetPowerState
 1200              	.LVL137:
 154:lib/ff/sdio_stm32f1.c ****   SDIO_DeInit();
 1201              		.loc 1 154 0
 1202 000e FFF7FEFF 		bl	SDIO_DeInit
 1203              	.LVL138:
 157:lib/ff/sdio_stm32f1.c ****   RCC_AHBPeriphClockCmd(RCC_AHBPeriph_SDIO, DISABLE);
 1204              		.loc 1 157 0
 1205 0012 4FF48060 		mov	r0, #1024
 1206 0016 0021     		movs	r1, #0
 1207 0018 FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 1208              	.LVL139:
 160:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9 | GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
 1209              		.loc 1 160 0
 1210 001c 4FF4F853 		mov	r3, #7936
 1211 0020 ADF80430 		strh	r3, [sp, #4]	@ movhi
 161:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;
 1212              		.loc 1 161 0
 1213 0024 0424     		movs	r4, #4
 1214 0026 8DF80740 		strb	r4, [sp, #7]
 162:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOC, &GPIO_InitStructure);
 1215              		.loc 1 162 0
 1216 002a 0648     		ldr	r0, .L104
 1217 002c 0DEB0401 		add	r1, sp, r4
 1218 0030 FFF7FEFF 		bl	GPIO_Init
 1219              	.LVL140:
 165:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 1220              		.loc 1 165 0
 1221 0034 ADF80440 		strh	r4, [sp, #4]	@ movhi
 166:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOD, &GPIO_InitStructure);
 1222              		.loc 1 166 0
 1223 0038 0348     		ldr	r0, .L104+4
 1224 003a 0DEB0401 		add	r1, sp, r4
 1225 003e FFF7FEFF 		bl	GPIO_Init
 1226              	.LVL141:
 167:lib/ff/sdio_stm32f1.c **** }
 1227              		.loc 1 167 0
 1228 0042 1CBD     		pop	{r2, r3, r4, pc}
 1229              	.L105:
 1230              		.align	2
 1231              	.L104:
 1232 0044 00100140 		.word	1073811456
 1233 0048 00140140 		.word	1073812480
 1234              		.cfi_endproc
 1235              	.LFE56:
 1237              		.section	.text.SD_Detect,"ax",%progbits
 1238              		.align	1
 1239              		.global	SD_Detect
 1240              		.thumb
 1241              		.thumb_func
 1243              	SD_Detect:
 1244              	.LFB60:
 341:lib/ff/sdio_stm32f1.c **** {
 1245              		.loc 1 341 0
 1246              		.cfi_startproc
 1247              		@ args = 0, pretend = 0, frame = 8
 1248              		@ frame_needed = 0, uses_anonymous_args = 0
 1249              		@ link register save eliminated.
 1250 0000 82B0     		sub	sp, sp, #8
 1251              	.LCFI9:
 1252              		.cfi_def_cfa_offset 8
 342:lib/ff/sdio_stm32f1.c ****   __IO uint8_t status = SD_PRESENT;
 1253              		.loc 1 342 0
 1254 0002 0123     		movs	r3, #1
 1255 0004 8DF80730 		strb	r3, [sp, #7]
 1256              	.LVL142:
 352:lib/ff/sdio_stm32f1.c ****   return status;
 1257              		.loc 1 352 0
 1258 0008 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 1259              	.LVL143:
 1260              	.LVL144:
 353:lib/ff/sdio_stm32f1.c **** }
 1261              		.loc 1 353 0
 1262 000c 02B0     		add	sp, sp, #8
 1263 000e 7047     		bx	lr
 1264              		.cfi_endproc
 1265              	.LFE60:
 1267              		.section	.text.SD_PowerON,"ax",%progbits
 1268              		.align	1
 1269              		.global	SD_PowerON
 1270              		.thumb
 1271              		.thumb_func
 1273              	SD_PowerON:
 1274              	.LFB61:
 365:lib/ff/sdio_stm32f1.c **** {
 1275              		.loc 1 365 0
 1276              		.cfi_startproc
 1277              		@ args = 0, pretend = 0, frame = 0
 1278              		@ frame_needed = 0, uses_anonymous_args = 0
 1279 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, sl, fp, lr}
 1280              	.LCFI10:
 1281              		.cfi_def_cfa_offset 40
 1282              		.cfi_offset 3, -40
 1283              		.cfi_offset 4, -36
 1284              		.cfi_offset 5, -32
 1285              		.cfi_offset 6, -28
 1286              		.cfi_offset 7, -24
 1287              		.cfi_offset 8, -20
 1288              		.cfi_offset 9, -16
 1289              		.cfi_offset 10, -12
 1290              		.cfi_offset 11, -8
 1291              		.cfi_offset 14, -4
 1292              	.LVL145:
 374:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockDiv = SDIO_INIT_CLK_DIV;
 1293              		.loc 1 374 0
 1294 0004 6548     		ldr	r0, .L141
 1295 0006 B223     		movs	r3, #178
 1296 0008 0375     		strb	r3, [r0, #20]
 375:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 1297              		.loc 1 375 0
 1298 000a 0024     		movs	r4, #0
 1299 000c 0460     		str	r4, [r0, #0]
 376:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 1300              		.loc 1 376 0
 1301 000e 4460     		str	r4, [r0, #4]
 377:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 1302              		.loc 1 377 0
 1303 0010 8460     		str	r4, [r0, #8]
 378:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_1b;
 1304              		.loc 1 378 0
 1305 0012 C460     		str	r4, [r0, #12]
 379:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 1306              		.loc 1 379 0
 1307 0014 0461     		str	r4, [r0, #16]
 380:lib/ff/sdio_stm32f1.c ****   SDIO_Init(&SDIO_InitStructure);
 1308              		.loc 1 380 0
 1309 0016 FFF7FEFF 		bl	SDIO_Init
 1310              	.LVL146:
 383:lib/ff/sdio_stm32f1.c ****   SDIO_SetPowerState(SDIO_PowerState_ON);
 1311              		.loc 1 383 0
 1312 001a 0320     		movs	r0, #3
 1313 001c FFF7FEFF 		bl	SDIO_SetPowerState
 1314              	.LVL147:
 386:lib/ff/sdio_stm32f1.c ****   SDIO_ClockCmd(ENABLE);
 1315              		.loc 1 386 0
 1316 0020 0120     		movs	r0, #1
 1317 0022 FFF7FEFF 		bl	SDIO_ClockCmd
 1318              	.LVL148:
 390:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 1319              		.loc 1 390 0
 1320 0026 5E48     		ldr	r0, .L141+4
 1321 0028 0460     		str	r4, [r0, #0]
 391:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_GO_IDLE_STATE;
 1322              		.loc 1 391 0
 1323 002a 4460     		str	r4, [r0, #4]
 392:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_No;
 1324              		.loc 1 392 0
 1325 002c 8460     		str	r4, [r0, #8]
 393:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1326              		.loc 1 393 0
 1327 002e C460     		str	r4, [r0, #12]
 394:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1328              		.loc 1 394 0
 1329 0030 4FF48061 		mov	r1, #1024
 1330 0034 0161     		str	r1, [r0, #16]
 395:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 1331              		.loc 1 395 0
 1332 0036 FFF7FEFF 		bl	SDIO_SendCommand
 1333              	.LVL149:
 1334 003a 4FF48034 		mov	r4, #65536
 1335              	.LVL150:
 1336              	.L108:
 1337              	.LBB20:
 1338              	.LBB21:
2293:lib/ff/sdio_stm32f1.c ****   while ((timeout > 0) && (SDIO_GetFlagStatus(SDIO_FLAG_CMDSENT) == RESET))
 1339              		.loc 1 2293 0
 1340 003e 8020     		movs	r0, #128
 1341 0040 FFF7FEFF 		bl	SDIO_GetFlagStatus
 1342              	.LVL151:
 1343 0044 0028     		cmp	r0, #0
 1344 0046 46D1     		bne	.L140
 1345              	.L110:
 1346 0048 013C     		subs	r4, r4, #1
 1347 004a F8D1     		bne	.L108
 1348 004c 41E0     		b	.L125
 1349              	.LVL152:
 1350              	.L121:
 1351              	.LBE21:
 1352              	.LBE20:
 1353              	.LBB23:
 1354              	.LBB24:
2526:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 1355              		.loc 1 2526 0
 1356 004e 40F2FF50 		movw	r0, #1535
 1357 0052 FFF7FEFF 		bl	SDIO_ClearFlag
 1358              	.LVL153:
 1359              	.LBE24:
 1360              	.LBE23:
 485:lib/ff/sdio_stm32f1.c ****       response = SDIO_GetResponse(SDIO_RESP1);
 1361              		.loc 1 485 0
 1362 0056 2046     		mov	r0, r4
 1363 0058 FFF7FEFF 		bl	SDIO_GetResponse
 1364              	.LVL154:
 486:lib/ff/sdio_stm32f1.c ****       validvoltage = (((response >> 31) == 1) ? 1 : 0);
 1365              		.loc 1 486 0
 1366 005c C60F     		lsrs	r6, r0, #31
 1367              	.LVL155:
 487:lib/ff/sdio_stm32f1.c ****       count++;
 1368              		.loc 1 487 0
 1369 005e 0137     		adds	r7, r7, #1
 1370              	.LVL156:
 1371              	.L118:
 1372 0060 4FF6FF71 		movw	r1, #65535
 452:lib/ff/sdio_stm32f1.c ****     while ((!validvoltage) && (count < SD_MAX_VOLT_TRIAL))
 1373              		.loc 1 452 0 discriminator 1
 1374 0064 002E     		cmp	r6, #0
 1375 0066 40F08B80 		bne	.L122
 452:lib/ff/sdio_stm32f1.c ****     while ((!validvoltage) && (count < SD_MAX_VOLT_TRIAL))
 1376              		.loc 1 452 0 is_stmt 0 discriminator 2
 1377 006a 8F42     		cmp	r7, r1
 1378 006c 00F09280 		beq	.L128
 1379              	.L123:
 456:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 1380              		.loc 1 456 0 is_stmt 1
 1381 0070 4B4C     		ldr	r4, .L141+4
 1382 0072 2660     		str	r6, [r4, #0]
 457:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 1383              		.loc 1 457 0
 1384 0074 4FF0370B 		mov	fp, #55
 1385 0078 C4F804B0 		str	fp, [r4, #4]
 458:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1386              		.loc 1 458 0
 1387 007c 4FF0400A 		mov	sl, #64
 1388 0080 C4F808A0 		str	sl, [r4, #8]
 459:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1389              		.loc 1 459 0
 1390 0084 E660     		str	r6, [r4, #12]
 460:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1391              		.loc 1 460 0
 1392 0086 4FF48069 		mov	r9, #1024
 1393 008a C4F81090 		str	r9, [r4, #16]
 461:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 1394              		.loc 1 461 0
 1395 008e 2046     		mov	r0, r4
 1396 0090 FFF7FEFF 		bl	SDIO_SendCommand
 1397              	.LVL157:
 463:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 1398              		.loc 1 463 0
 1399 0094 5846     		mov	r0, fp
 1400 0096 FFF7FEFF 		bl	CmdResp1Error
 1401              	.LVL158:
 465:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 1402              		.loc 1 465 0
 1403 009a 2A28     		cmp	r0, #42
 1404 009c 78D1     		bne	.L127
 471:lib/ff/sdio_stm32f1.c **** 											SD_SDXC_S18R_REGULAR_VOLT	| \
 1405              		.loc 1 471 0
 1406 009e 48F01043 		orr	r3, r8, #-1879048192
 1407 00a2 43F48011 		orr	r1, r3, #1048576
 469:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = SD_VOLTAGE_WINDOW_SD  		| \
 1408              		.loc 1 469 0
 1409 00a6 2160     		str	r1, [r4, #0]
 473:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_APP_OP_COND;
 1410              		.loc 1 473 0
 1411 00a8 2920     		movs	r0, #41
 1412              	.LVL159:
 1413 00aa 6060     		str	r0, [r4, #4]
 474:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1414              		.loc 1 474 0
 1415 00ac C4F808A0 		str	sl, [r4, #8]
 475:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1416              		.loc 1 475 0
 1417 00b0 E660     		str	r6, [r4, #12]
 476:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1418              		.loc 1 476 0
 1419 00b2 C4F81090 		str	r9, [r4, #16]
 477:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 1420              		.loc 1 477 0
 1421 00b6 2046     		mov	r0, r4
 1422 00b8 FFF7FEFF 		bl	SDIO_SendCommand
 1423              	.LVL160:
 1424              	.LBB26:
 1425              	.LBB25:
2512:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
 1426              		.loc 1 2512 0
 1427 00bc 394C     		ldr	r4, .L141+8
 1428              	.L120:
2516:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
 1429              		.loc 1 2516 0
 1430 00be 626B     		ldr	r2, [r4, #52]
 1431              	.LVL161:
2514:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)))
 1432              		.loc 1 2514 0
 1433 00c0 12F0450F 		tst	r2, #69
 1434 00c4 FBD0     		beq	.L120
2519:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
 1435              		.loc 1 2519 0
 1436 00c6 12F00404 		ands	r4, r2, #4
 1437 00ca C0D0     		beq	.L121
 1438              	.LVL162:
2522:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
 1439              		.loc 1 2522 0
 1440 00cc 0420     		movs	r0, #4
 1441 00ce FFF7FEFF 		bl	SDIO_ClearFlag
 1442              	.LVL163:
 1443              	.L125:
 1444              	.LBE25:
 1445              	.LBE26:
 1446              	.LBB27:
 1447              	.LBB22:
2301:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1448              		.loc 1 2301 0
 1449 00d2 0325     		movs	r5, #3
 1450 00d4 5FE0     		b	.L132
 1451              	.LVL164:
 1452              	.L140:
2305:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 1453              		.loc 1 2305 0
 1454 00d6 40F2FF50 		movw	r0, #1535
 1455 00da FFF7FEFF 		bl	SDIO_ClearFlag
 1456              	.LVL165:
 1457              	.LBE22:
 1458              	.LBE27:
 411:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = SD_CHECK_PATTERN;
 1459              		.loc 1 411 0
 1460 00de 3048     		ldr	r0, .L141+4
 414:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1461              		.loc 1 414 0
 1462 00e0 4FF4D571 		mov	r1, #426
 1463 00e4 0822     		movs	r2, #8
 1464 00e6 4023     		movs	r3, #64
 1465 00e8 0024     		movs	r4, #0
 1466 00ea 80E81E00 		stmia	r0, {r1, r2, r3, r4}
 415:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1467              		.loc 1 415 0
 1468 00ee 4FF48062 		mov	r2, #1024
 1469 00f2 0261     		str	r2, [r0, #16]
 416:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 1470              		.loc 1 416 0
 1471 00f4 FFF7FEFF 		bl	SDIO_SendCommand
 1472              	.LVL166:
 1473              	.LBB28:
 1474              	.LBB29:
2324:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
 1475              		.loc 1 2324 0
 1476 00f8 2A48     		ldr	r0, .L141+8
 1477 00fa 456B     		ldr	r5, [r0, #52]
 1478              	.LVL167:
2322:lib/ff/sdio_stm32f1.c ****   uint32_t timeout = SDIO_CMD0TIMEOUT;
 1479              		.loc 1 2322 0
 1480 00fc 4FF48036 		mov	r6, #65536
 1481              	.LVL168:
 1482              	.L124:
2326:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT)) && (timeout > 0)
 1483              		.loc 1 2326 0
 1484 0100 15F0450F 		tst	r5, #69
 1485 0104 04D1     		bne	.L112
 1486 0106 36B1     		cbz	r6, .L114
 1487              	.L113:
2328:lib/ff/sdio_stm32f1.c ****     timeout--;
 1488              		.loc 1 2328 0
 1489 0108 013E     		subs	r6, r6, #1
 1490              	.LVL169:
2329:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
 1491              		.loc 1 2329 0
 1492 010a 264D     		ldr	r5, .L141+8
 1493              	.LVL170:
 1494 010c 6D6B     		ldr	r5, [r5, #52]
 1495              	.LVL171:
 1496 010e F7E7     		b	.L124
 1497              	.L112:
2332:lib/ff/sdio_stm32f1.c ****   if ((timeout == 0) || (status & SDIO_FLAG_CTIMEOUT))
 1498              		.loc 1 2332 0
 1499 0110 0EB1     		cbz	r6, .L114
 1500 0112 6907     		lsls	r1, r5, #29
 1501 0114 14D5     		bpl	.L115
 1502              	.L114:
 1503              	.LVL172:
2336:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
 1504              		.loc 1 2336 0
 1505 0116 0420     		movs	r0, #4
 1506 0118 FFF7FEFF 		bl	SDIO_ClearFlag
 1507              	.LVL173:
 1508              	.LBE29:
 1509              	.LBE28:
 428:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 1510              		.loc 1 428 0
 1511 011c 2048     		ldr	r0, .L141+4
 429:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 1512              		.loc 1 429 0
 1513 011e 0024     		movs	r4, #0
 1514 0120 3725     		movs	r5, #55
 1515              	.LVL174:
 1516 0122 80E83000 		stmia	r0, {r4, r5}
 430:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1517              		.loc 1 430 0
 1518 0126 4021     		movs	r1, #64
 1519 0128 8160     		str	r1, [r0, #8]
 431:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1520              		.loc 1 431 0
 1521 012a C460     		str	r4, [r0, #12]
 432:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1522              		.loc 1 432 0
 1523 012c 4FF48062 		mov	r2, #1024
 1524 0130 0261     		str	r2, [r0, #16]
 433:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 1525              		.loc 1 433 0
 1526 0132 FFF7FEFF 		bl	SDIO_SendCommand
 1527              	.LVL175:
 434:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 1528              		.loc 1 434 0
 1529 0136 2846     		mov	r0, r5
 1530 0138 FFF7FEFF 		bl	CmdResp1Error
 1531              	.LVL176:
 368:lib/ff/sdio_stm32f1.c ****   uint32_t SDType = SD_STD_CAPACITY;
 1532              		.loc 1 368 0
 1533 013c A046     		mov	r8, r4
 1534 013e 09E0     		b	.L116
 1535              	.LVL177:
 1536              	.L115:
 1537              	.LBB31:
 1538              	.LBB30:
2340:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CMDREND)
 1539              		.loc 1 2340 0
 1540 0140 6A06     		lsls	r2, r5, #25
 1541 0142 02D5     		bpl	.L117
2344:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CMDREND);
 1542              		.loc 1 2344 0
 1543 0144 4020     		movs	r0, #64
 1544 0146 FFF7FEFF 		bl	SDIO_ClearFlag
 1545              	.LVL178:
 1546              	.L117:
 1547              	.LBE30:
 1548              	.LBE31:
 422:lib/ff/sdio_stm32f1.c ****     CardType = SDIO_STD_CAPACITY_SD_CARD_V2_0; /*!< SD Card 2.0 */
 1549              		.loc 1 422 0
 1550 014a 0124     		movs	r4, #1
 1551 014c 164B     		ldr	r3, .L141+12
 1552 014e 1C60     		str	r4, [r3, #0]
 1553              	.LVL179:
 423:lib/ff/sdio_stm32f1.c ****     SDType = SD_HIGH_CAPACITY;
 1554              		.loc 1 423 0
 1555 0150 4FF08048 		mov	r8, #1073741824
 1556              	.LVL180:
 1557              	.L116:
 437:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 1558              		.loc 1 437 0
 1559 0154 1248     		ldr	r0, .L141+4
 1560 0156 0026     		movs	r6, #0
 1561              	.LVL181:
 1562 0158 0660     		str	r6, [r0, #0]
 438:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 1563              		.loc 1 438 0
 1564 015a 3724     		movs	r4, #55
 1565 015c 4460     		str	r4, [r0, #4]
 439:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1566              		.loc 1 439 0
 1567 015e 4025     		movs	r5, #64
 1568 0160 8560     		str	r5, [r0, #8]
 440:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1569              		.loc 1 440 0
 1570 0162 C660     		str	r6, [r0, #12]
 441:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1571              		.loc 1 441 0
 1572 0164 4FF48063 		mov	r3, #1024
 1573 0168 0361     		str	r3, [r0, #16]
 442:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 1574              		.loc 1 442 0
 1575 016a FFF7FEFF 		bl	SDIO_SendCommand
 1576              	.LVL182:
 443:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 1577              		.loc 1 443 0
 1578 016e 2046     		mov	r0, r4
 1579 0170 FFF7FEFF 		bl	CmdResp1Error
 1580              	.LVL183:
 1581 0174 0546     		mov	r5, r0
 1582              	.LVL184:
 448:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 1583              		.loc 1 448 0
 1584 0176 2A28     		cmp	r0, #42
 1585 0178 0DD1     		bne	.L132
 1586 017a 3746     		mov	r7, r6
 1587 017c 3046     		mov	r0, r6
 1588              	.LVL185:
 1589 017e 6FE7     		b	.L118
 1590              	.LVL186:
 1591              	.L122:
 489:lib/ff/sdio_stm32f1.c ****     if (count >= SD_MAX_VOLT_TRIAL)
 1592              		.loc 1 489 0
 1593 0180 8F42     		cmp	r7, r1
 1594 0182 07D0     		beq	.L128
 1595              	.LVL187:
 495:lib/ff/sdio_stm32f1.c ****     if (response &= SD_HIGH_CAPACITY)
 1596              		.loc 1 495 0
 1597 0184 4300     		lsls	r3, r0, #1
 1598 0186 06D5     		bpl	.L132
 497:lib/ff/sdio_stm32f1.c ****       CardType = SDIO_HIGH_CAPACITY_SD_CARD;
 1599              		.loc 1 497 0
 1600 0188 0220     		movs	r0, #2
 1601              	.LVL188:
 1602 018a 074A     		ldr	r2, .L141+12
 1603 018c 1060     		str	r0, [r2, #0]
 1604 018e 02E0     		b	.L132
 1605              	.LVL189:
 1606              	.L127:
 463:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 1607              		.loc 1 463 0
 1608 0190 0546     		mov	r5, r0
 1609 0192 00E0     		b	.L132
 1610              	.LVL190:
 1611              	.L128:
 492:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 1612              		.loc 1 492 0
 1613 0194 1B25     		movs	r5, #27
 1614              	.LVL191:
 1615              	.L132:
 503:lib/ff/sdio_stm32f1.c **** }
 1616              		.loc 1 503 0
 1617 0196 2846     		mov	r0, r5
 1618 0198 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 1619              	.L142:
 1620              		.align	2
 1621              	.L141:
 1622 019c 00000000 		.word	.LANCHOR3
 1623 01a0 00000000 		.word	.LANCHOR0
 1624 01a4 00800140 		.word	1073840128
 1625 01a8 00000000 		.word	.LANCHOR4
 1626              		.cfi_endproc
 1627              	.LFE61:
 1629              		.section	.text.SD_PowerOFF,"ax",%progbits
 1630              		.align	1
 1631              		.global	SD_PowerOFF
 1632              		.thumb
 1633              		.thumb_func
 1635              	SD_PowerOFF:
 1636              	.LFB62:
 514:lib/ff/sdio_stm32f1.c **** {
 1637              		.loc 1 514 0
 1638              		.cfi_startproc
 1639              		@ args = 0, pretend = 0, frame = 0
 1640              		@ frame_needed = 0, uses_anonymous_args = 0
 1641 0000 08B5     		push	{r3, lr}
 1642              	.LCFI11:
 1643              		.cfi_def_cfa_offset 8
 1644              		.cfi_offset 3, -8
 1645              		.cfi_offset 14, -4
 1646              	.LVL192:
 518:lib/ff/sdio_stm32f1.c ****   SDIO_SetPowerState(SDIO_PowerState_OFF);
 1647              		.loc 1 518 0
 1648 0002 0020     		movs	r0, #0
 1649 0004 FFF7FEFF 		bl	SDIO_SetPowerState
 1650              	.LVL193:
 521:lib/ff/sdio_stm32f1.c **** }
 1651              		.loc 1 521 0
 1652 0008 2A20     		movs	r0, #42
 1653 000a 08BD     		pop	{r3, pc}
 1654              		.cfi_endproc
 1655              	.LFE62:
 1657              		.section	.text.SD_InitializeCards,"ax",%progbits
 1658              		.align	1
 1659              		.global	SD_InitializeCards
 1660              		.thumb
 1661              		.thumb_func
 1663              	SD_InitializeCards:
 1664              	.LFB63:
 533:lib/ff/sdio_stm32f1.c **** {
 1665              		.loc 1 533 0
 1666              		.cfi_startproc
 1667              		@ args = 0, pretend = 0, frame = 0
 1668              		@ frame_needed = 0, uses_anonymous_args = 0
 1669 0000 38B5     		push	{r3, r4, r5, lr}
 1670              	.LCFI12:
 1671              		.cfi_def_cfa_offset 16
 1672              		.cfi_offset 3, -16
 1673              		.cfi_offset 4, -12
 1674              		.cfi_offset 5, -8
 1675              		.cfi_offset 14, -4
 1676              	.LVL194:
 537:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetPowerState() == SDIO_PowerState_OFF)
 1677              		.loc 1 537 0
 1678 0002 FFF7FEFF 		bl	SDIO_GetPowerState
 1679              	.LVL195:
 1680 0006 0028     		cmp	r0, #0
 1681 0008 00F09480 		beq	.L157
 543:lib/ff/sdio_stm32f1.c ****   if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)
 1682              		.loc 1 543 0
 1683 000c 4F4B     		ldr	r3, .L169
 1684 000e 1868     		ldr	r0, [r3, #0]
 1685 0010 0428     		cmp	r0, #4
 1686 0012 23D0     		beq	.L146
 546:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 1687              		.loc 1 546 0
 1688 0014 4E48     		ldr	r0, .L169+4
 1689 0016 0025     		movs	r5, #0
 1690 0018 0560     		str	r5, [r0, #0]
 547:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_ALL_SEND_CID;
 1691              		.loc 1 547 0
 1692 001a 0222     		movs	r2, #2
 1693 001c 4260     		str	r2, [r0, #4]
 548:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Long;
 1694              		.loc 1 548 0
 1695 001e C021     		movs	r1, #192
 1696 0020 8160     		str	r1, [r0, #8]
 549:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1697              		.loc 1 549 0
 1698 0022 C560     		str	r5, [r0, #12]
 550:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1699              		.loc 1 550 0
 1700 0024 4FF48064 		mov	r4, #1024
 1701 0028 0461     		str	r4, [r0, #16]
 551:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 1702              		.loc 1 551 0
 1703 002a FFF7FEFF 		bl	SDIO_SendCommand
 1704              	.LVL196:
 553:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp2Error();
 1705              		.loc 1 553 0
 1706 002e FFF7FEFF 		bl	CmdResp2Error
 1707              	.LVL197:
 1708 0032 0446     		mov	r4, r0
 1709              	.LVL198:
 555:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 1710              		.loc 1 555 0
 1711 0034 2A28     		cmp	r0, #42
 1712 0036 40F08680 		bne	.L164
 560:lib/ff/sdio_stm32f1.c ****     CID_Tab[0] = SDIO_GetResponse(SDIO_RESP1);
 1713              		.loc 1 560 0
 1714 003a 2846     		mov	r0, r5
 1715              	.LVL199:
 1716 003c FFF7FEFF 		bl	SDIO_GetResponse
 1717              	.LVL200:
 1718 0040 444C     		ldr	r4, .L169+8
 1719              	.LVL201:
 1720 0042 2060     		str	r0, [r4, #0]
 561:lib/ff/sdio_stm32f1.c ****     CID_Tab[1] = SDIO_GetResponse(SDIO_RESP2);
 1721              		.loc 1 561 0
 1722 0044 0420     		movs	r0, #4
 1723 0046 FFF7FEFF 		bl	SDIO_GetResponse
 1724              	.LVL202:
 1725 004a 6060     		str	r0, [r4, #4]
 562:lib/ff/sdio_stm32f1.c ****     CID_Tab[2] = SDIO_GetResponse(SDIO_RESP3);
 1726              		.loc 1 562 0
 1727 004c 0820     		movs	r0, #8
 1728 004e FFF7FEFF 		bl	SDIO_GetResponse
 1729              	.LVL203:
 1730 0052 A060     		str	r0, [r4, #8]
 563:lib/ff/sdio_stm32f1.c ****     CID_Tab[3] = SDIO_GetResponse(SDIO_RESP4);
 1731              		.loc 1 563 0
 1732 0054 0C20     		movs	r0, #12
 1733 0056 FFF7FEFF 		bl	SDIO_GetResponse
 1734              	.LVL204:
 1735 005a E060     		str	r0, [r4, #12]
 1736              	.L146:
 565:lib/ff/sdio_stm32f1.c ****   if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) ||  (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType)
 1737              		.loc 1 565 0
 1738 005c 3B4B     		ldr	r3, .L169
 1739 005e 1868     		ldr	r0, [r3, #0]
 1740 0060 0128     		cmp	r0, #1
 1741 0062 03D9     		bls	.L147
 565:lib/ff/sdio_stm32f1.c ****   if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) ||  (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType)
 1742              		.loc 1 565 0 is_stmt 0 discriminator 1
 1743 0064 0628     		cmp	r0, #6
 1744 0066 01D0     		beq	.L147
 566:lib/ff/sdio_stm32f1.c ****       ||  (SDIO_HIGH_CAPACITY_SD_CARD == CardType))
 1745              		.loc 1 566 0 is_stmt 1
 1746 0068 0228     		cmp	r0, #2
 1747 006a 36D1     		bne	.L158
 1748              	.L147:
 570:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = 0x00;
 1749              		.loc 1 570 0
 1750 006c 3848     		ldr	r0, .L169+4
 1751 006e 0021     		movs	r1, #0
 1752 0070 0160     		str	r1, [r0, #0]
 571:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_REL_ADDR;
 1753              		.loc 1 571 0
 1754 0072 0322     		movs	r2, #3
 1755 0074 4260     		str	r2, [r0, #4]
 572:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 1756              		.loc 1 572 0
 1757 0076 4024     		movs	r4, #64
 1758 0078 8460     		str	r4, [r0, #8]
 573:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1759              		.loc 1 573 0
 1760 007a C160     		str	r1, [r0, #12]
 574:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1761              		.loc 1 574 0
 1762 007c 4FF48063 		mov	r3, #1024
 1763 0080 0361     		str	r3, [r0, #16]
 575:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 1764              		.loc 1 575 0
 1765 0082 FFF7FEFF 		bl	SDIO_SendCommand
 1766              	.LVL205:
 1767              	.LBB34:
 1768              	.LBB35:
2585:lib/ff/sdio_stm32f1.c ****   status = SDIO->STA;
 1769              		.loc 1 2585 0
 1770 0086 3449     		ldr	r1, .L169+12
 1771              	.L150:
2589:lib/ff/sdio_stm32f1.c ****     status = SDIO->STA;
 1772              		.loc 1 2589 0
 1773 0088 486B     		ldr	r0, [r1, #52]
 1774              	.LVL206:
2587:lib/ff/sdio_stm32f1.c ****   while (!(status & (SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CTIMEOUT | SDIO_FLAG_CMDREND)))
 1775              		.loc 1 2587 0
 1776 008a 10F0450F 		tst	r0, #69
 1777 008e FBD0     		beq	.L150
2592:lib/ff/sdio_stm32f1.c ****   if (status & SDIO_FLAG_CTIMEOUT)
 1778              		.loc 1 2592 0
 1779 0090 4207     		lsls	r2, r0, #29
 1780 0092 04D5     		bpl	.L151
 1781              	.LVL207:
2595:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CTIMEOUT);
 1782              		.loc 1 2595 0
 1783 0094 0420     		movs	r0, #4
 1784              	.LVL208:
 1785 0096 FFF7FEFF 		bl	SDIO_ClearFlag
 1786              	.LVL209:
2596:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1787              		.loc 1 2596 0
 1788 009a 0324     		movs	r4, #3
 1789 009c 53E0     		b	.L164
 1790              	.LVL210:
 1791              	.L151:
2598:lib/ff/sdio_stm32f1.c ****   else if (status & SDIO_FLAG_CCRCFAIL)
 1792              		.loc 1 2598 0
 1793 009e 10F00104 		ands	r4, r0, #1
 1794 00a2 04D0     		beq	.L153
 1795              	.LVL211:
2601:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_CCRCFAIL);
 1796              		.loc 1 2601 0
 1797 00a4 0120     		movs	r0, #1
 1798              	.LVL212:
 1799 00a6 FFF7FEFF 		bl	SDIO_ClearFlag
 1800              	.LVL213:
2602:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1801              		.loc 1 2602 0
 1802 00aa 0124     		movs	r4, #1
 1803 00ac 4BE0     		b	.L164
 1804              	.LVL214:
 1805              	.L153:
2606:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetCommandResponse() != cmd)
 1806              		.loc 1 2606 0
 1807 00ae FFF7FEFF 		bl	SDIO_GetCommandResponse
 1808              	.LVL215:
 1809 00b2 0328     		cmp	r0, #3
 1810 00b4 42D1     		bne	.L154
2613:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 1811              		.loc 1 2613 0
 1812 00b6 40F2FF50 		movw	r0, #1535
 1813 00ba FFF7FEFF 		bl	SDIO_ClearFlag
 1814              	.LVL216:
2616:lib/ff/sdio_stm32f1.c ****   response_r1 = SDIO_GetResponse(SDIO_RESP1);
 1815              		.loc 1 2616 0
 1816 00be 2046     		mov	r0, r4
 1817 00c0 FFF7FEFF 		bl	SDIO_GetResponse
 1818              	.LVL217:
2618:lib/ff/sdio_stm32f1.c ****   if (SD_ALLZERO == (response_r1 & (SD_R6_GENERAL_UNKNOWN_ERROR | SD_R6_ILLEGAL_CMD | SD_R6_COM_CRC
 1819              		.loc 1 2618 0
 1820 00c4 10F4604F 		tst	r0, #57344
 1821 00c8 01D1     		bne	.L155
2620:lib/ff/sdio_stm32f1.c ****     *prca = (uint16_t) (response_r1 >> 16);
 1822              		.loc 1 2620 0
 1823 00ca 020C     		lsrs	r2, r0, #16
 1824              	.LVL218:
 1825 00cc 06E0     		b	.L148
 1826              	.LVL219:
 1827              	.L155:
2624:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_R6_GENERAL_UNKNOWN_ERROR)
 1828              		.loc 1 2624 0
 1829 00ce 8304     		lsls	r3, r0, #18
 1830 00d0 36D4     		bmi	.L159
2629:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_R6_ILLEGAL_CMD)
 1831              		.loc 1 2629 0
 1832 00d2 4404     		lsls	r4, r0, #17
 1833 00d4 32D4     		bmi	.L154
2634:lib/ff/sdio_stm32f1.c ****   if (response_r1 & SD_R6_COM_CRC_FAILED)
 1834              		.loc 1 2634 0
 1835 00d6 0004     		lsls	r0, r0, #16
 1836              	.LVL220:
 1837 00d8 34D4     		bmi	.L160
 1838              	.LVL221:
 1839              	.L158:
 1840              	.LBE35:
 1841              	.LBE34:
 535:lib/ff/sdio_stm32f1.c ****   uint16_t rca = 0x01;
 1842              		.loc 1 535 0
 1843 00da 0122     		movs	r2, #1
 1844              	.LVL222:
 1845              	.L148:
 585:lib/ff/sdio_stm32f1.c ****   if (SDIO_SECURE_DIGITAL_IO_CARD != CardType)
 1846              		.loc 1 585 0
 1847 00dc 1B4B     		ldr	r3, .L169
 1848 00de 1968     		ldr	r1, [r3, #0]
 1849 00e0 0429     		cmp	r1, #4
 1850 00e2 29D0     		beq	.L161
 587:lib/ff/sdio_stm32f1.c ****     RCA = rca;
 1851              		.loc 1 587 0
 1852 00e4 1D4D     		ldr	r5, .L169+16
 1853 00e6 2A60     		str	r2, [r5, #0]
 590:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)(rca << 16);
 1854              		.loc 1 590 0
 1855 00e8 194C     		ldr	r4, .L169+4
 1856 00ea 1004     		lsls	r0, r2, #16
 1857 00ec 2060     		str	r0, [r4, #0]
 591:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_CSD;
 1858              		.loc 1 591 0
 1859 00ee 0922     		movs	r2, #9
 1860              	.LVL223:
 1861 00f0 6260     		str	r2, [r4, #4]
 592:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Long;
 1862              		.loc 1 592 0
 1863 00f2 C023     		movs	r3, #192
 1864 00f4 A360     		str	r3, [r4, #8]
 593:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 1865              		.loc 1 593 0
 1866 00f6 0025     		movs	r5, #0
 1867 00f8 E560     		str	r5, [r4, #12]
 594:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 1868              		.loc 1 594 0
 1869 00fa 4FF48061 		mov	r1, #1024
 1870 00fe 2161     		str	r1, [r4, #16]
 595:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 1871              		.loc 1 595 0
 1872 0100 2046     		mov	r0, r4
 1873 0102 FFF7FEFF 		bl	SDIO_SendCommand
 1874              	.LVL224:
 597:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp2Error();
 1875              		.loc 1 597 0
 1876 0106 FFF7FEFF 		bl	CmdResp2Error
 1877              	.LVL225:
 1878 010a 0446     		mov	r4, r0
 1879              	.LVL226:
 599:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 1880              		.loc 1 599 0
 1881 010c 2A28     		cmp	r0, #42
 1882 010e 1AD1     		bne	.L164
 604:lib/ff/sdio_stm32f1.c ****     CSD_Tab[0] = SDIO_GetResponse(SDIO_RESP1);
 1883              		.loc 1 604 0
 1884 0110 2846     		mov	r0, r5
 1885              	.LVL227:
 1886 0112 FFF7FEFF 		bl	SDIO_GetResponse
 1887              	.LVL228:
 1888 0116 124D     		ldr	r5, .L169+20
 1889 0118 2860     		str	r0, [r5, #0]
 605:lib/ff/sdio_stm32f1.c ****     CSD_Tab[1] = SDIO_GetResponse(SDIO_RESP2);
 1890              		.loc 1 605 0
 1891 011a 0420     		movs	r0, #4
 1892 011c FFF7FEFF 		bl	SDIO_GetResponse
 1893              	.LVL229:
 1894 0120 6860     		str	r0, [r5, #4]
 606:lib/ff/sdio_stm32f1.c ****     CSD_Tab[2] = SDIO_GetResponse(SDIO_RESP3);
 1895              		.loc 1 606 0
 1896 0122 0820     		movs	r0, #8
 1897 0124 FFF7FEFF 		bl	SDIO_GetResponse
 1898              	.LVL230:
 1899 0128 A860     		str	r0, [r5, #8]
 607:lib/ff/sdio_stm32f1.c ****     CSD_Tab[3] = SDIO_GetResponse(SDIO_RESP4);
 1900              		.loc 1 607 0
 1901 012a 0C20     		movs	r0, #12
 1902 012c FFF7FEFF 		bl	SDIO_GetResponse
 1903              	.LVL231:
 1904 0130 E860     		str	r0, [r5, #12]
 1905 0132 08E0     		b	.L164
 1906              	.LVL232:
 1907              	.L157:
 540:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1908              		.loc 1 540 0
 1909 0134 2524     		movs	r4, #37
 1910 0136 06E0     		b	.L164
 1911              	.LVL233:
 1912              	.L161:
 612:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 1913              		.loc 1 612 0
 1914 0138 2A24     		movs	r4, #42
 1915 013a 04E0     		b	.L164
 1916              	.LVL234:
 1917              	.L154:
 1918              	.LBB37:
 1919              	.LBB36:
2609:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 1920              		.loc 1 2609 0
 1921 013c 1024     		movs	r4, #16
 1922 013e 02E0     		b	.L164
 1923              	.LVL235:
 1924              	.L159:
2626:lib/ff/sdio_stm32f1.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
 1925              		.loc 1 2626 0
 1926 0140 1324     		movs	r4, #19
 1927 0142 00E0     		b	.L164
 1928              	.LVL236:
 1929              	.L160:
2636:lib/ff/sdio_stm32f1.c ****     return(SD_COM_CRC_FAILED);
 1930              		.loc 1 2636 0
 1931 0144 0F24     		movs	r4, #15
 1932              	.LVL237:
 1933              	.L164:
 1934              	.LBE36:
 1935              	.LBE37:
 613:lib/ff/sdio_stm32f1.c **** }
 1936              		.loc 1 613 0
 1937 0146 2046     		mov	r0, r4
 1938 0148 38BD     		pop	{r3, r4, r5, pc}
 1939              	.L170:
 1940 014a 00BF     		.align	2
 1941              	.L169:
 1942 014c 00000000 		.word	.LANCHOR4
 1943 0150 00000000 		.word	.LANCHOR0
 1944 0154 00000000 		.word	.LANCHOR5
 1945 0158 00800140 		.word	1073840128
 1946 015c 00000000 		.word	.LANCHOR1
 1947 0160 00000000 		.word	.LANCHOR6
 1948              		.cfi_endproc
 1949              	.LFE63:
 1951              		.section	.text.SD_GetCardInfo,"ax",%progbits
 1952              		.align	1
 1953              		.global	SD_GetCardInfo
 1954              		.thumb
 1955              		.thumb_func
 1957              	SD_GetCardInfo:
 1958              	.LFB64:
 625:lib/ff/sdio_stm32f1.c **** {
 1959              		.loc 1 625 0
 1960              		.cfi_startproc
 1961              		@ args = 0, pretend = 0, frame = 0
 1962              		@ frame_needed = 0, uses_anonymous_args = 0
 1963              	.LVL238:
 1964 0000 70B5     		push	{r4, r5, r6, lr}
 1965              	.LCFI13:
 1966              		.cfi_def_cfa_offset 16
 1967              		.cfi_offset 4, -16
 1968              		.cfi_offset 5, -12
 1969              		.cfi_offset 6, -8
 1970              		.cfi_offset 14, -4
 1971              	.LVL239:
 629:lib/ff/sdio_stm32f1.c ****   cardinfo->CardType = (uint8_t)CardType;
 1972              		.loc 1 629 0
 1973 0002 9E4B     		ldr	r3, .L174
 1974 0004 1D68     		ldr	r5, [r3, #0]
 1975 0006 80F85650 		strb	r5, [r0, #86]
 630:lib/ff/sdio_stm32f1.c ****   cardinfo->RCA = (uint16_t)RCA;
 1976              		.loc 1 630 0
 1977 000a 9D49     		ldr	r1, .L174+4
 1978 000c 0A68     		ldr	r2, [r1, #0]
 1979 000e A0F85420 		strh	r2, [r0, #84]	@ movhi
 633:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[0] & 0xFF000000) >> 24);
 1980              		.loc 1 633 0
 1981 0012 9C4C     		ldr	r4, .L174+8
 1982 0014 2668     		ldr	r6, [r4, #0]
 1983 0016 330E     		lsrs	r3, r6, #24
 1984              	.LVL240:
 634:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CSDStruct = (tmp & 0xC0) >> 6;
 1985              		.loc 1 634 0
 1986 0018 9909     		lsrs	r1, r3, #6
 1987 001a 0170     		strb	r1, [r0, #0]
 635:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.SysSpecVersion = (tmp & 0x3C) >> 2;
 1988              		.loc 1 635 0
 1989 001c C3F38302 		ubfx	r2, r3, #2, #4
 1990 0020 4270     		strb	r2, [r0, #1]
 636:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved1 = tmp & 0x03;
 1991              		.loc 1 636 0
 1992 0022 03F00303 		and	r3, r3, #3
 1993              	.LVL241:
 1994 0026 8370     		strb	r3, [r0, #2]
 639:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[0] & 0x00FF0000) >> 16);
 1995              		.loc 1 639 0
 1996 0028 C6F30741 		ubfx	r1, r6, #16, #8
 1997              	.LVL242:
 640:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.TAAC = tmp;
 1998              		.loc 1 640 0
 1999 002c C170     		strb	r1, [r0, #3]
 643:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[0] & 0x0000FF00) >> 8);
 2000              		.loc 1 643 0
 2001 002e C6F30722 		ubfx	r2, r6, #8, #8
 2002              	.LVL243:
 644:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.NSAC = tmp;
 2003              		.loc 1 644 0
 2004 0032 0271     		strb	r2, [r0, #4]
 647:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CSD_Tab[0] & 0x000000FF);
 2005              		.loc 1 647 0
 2006 0034 F6B2     		uxtb	r6, r6
 2007              	.LVL244:
 648:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.MaxBusClkFrec = tmp;
 2008              		.loc 1 648 0
 2009 0036 4671     		strb	r6, [r0, #5]
 651:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[1] & 0xFF000000) >> 24);
 2010              		.loc 1 651 0
 2011 0038 6368     		ldr	r3, [r4, #4]
 2012              	.LVL245:
 652:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CardComdClasses = tmp << 4;
 2013              		.loc 1 652 0
 2014 003a 190E     		lsrs	r1, r3, #24
 2015 003c 0A01     		lsls	r2, r1, #4
 2016 003e C280     		strh	r2, [r0, #6]	@ movhi
 655:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[1] & 0x00FF0000) >> 16);
 2017              		.loc 1 655 0
 2018 0040 C3F30746 		ubfx	r6, r3, #16, #8
 2019              	.LVL246:
 656:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CardComdClasses |= (tmp & 0xF0) >> 4;
 2020              		.loc 1 656 0
 2021 0044 C188     		ldrh	r1, [r0, #6]
 2022 0046 8AB2     		uxth	r2, r1
 2023 0048 42EA1611 		orr	r1, r2, r6, lsr #4
 2024 004c C180     		strh	r1, [r0, #6]	@ movhi
 657:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.RdBlockLen = tmp & 0x0F;
 2025              		.loc 1 657 0
 2026 004e 06F00F06 		and	r6, r6, #15
 2027              	.LVL247:
 2028 0052 0672     		strb	r6, [r0, #8]
 660:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[1] & 0x0000FF00) >> 8);
 2029              		.loc 1 660 0
 2030 0054 C3F30722 		ubfx	r2, r3, #8, #8
 2031 0058 D1B2     		uxtb	r1, r2
 2032              	.LVL248:
 661:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.PartBlockRead = (tmp & 0x80) >> 7;
 2033              		.loc 1 661 0
 2034 005a CE09     		lsrs	r6, r1, #7
 2035 005c 4672     		strb	r6, [r0, #9]
 662:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrBlockMisalign = (tmp & 0x40) >> 6;
 2036              		.loc 1 662 0
 2037 005e C2F38016 		ubfx	r6, r2, #6, #1
 2038 0062 8672     		strb	r6, [r0, #10]
 663:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.RdBlockMisalign = (tmp & 0x20) >> 5;
 2039              		.loc 1 663 0
 2040 0064 C2F34016 		ubfx	r6, r2, #5, #1
 2041 0068 C672     		strb	r6, [r0, #11]
 664:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.DSRImpl = (tmp & 0x10) >> 4;
 2042              		.loc 1 664 0
 2043 006a C2F30016 		ubfx	r6, r2, #4, #1
 2044 006e 0673     		strb	r6, [r0, #12]
 665:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved2 = 0; /*!< Reserved */
 2045              		.loc 1 665 0
 2046 0070 0026     		movs	r6, #0
 2047 0072 4673     		strb	r6, [r0, #13]
 667:lib/ff/sdio_stm32f1.c ****   if ((CardType == SDIO_STD_CAPACITY_SD_CARD_V1_1) || (CardType == SDIO_STD_CAPACITY_SD_CARD_V2_0))
 2048              		.loc 1 667 0
 2049 0074 012D     		cmp	r5, #1
 2050 0076 3CD8     		bhi	.L172
 669:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize = (tmp & 0x03) << 10;
 2051              		.loc 1 669 0
 2052 0078 02F00306 		and	r6, r2, #3
 2053 007c B102     		lsls	r1, r6, #10
 2054 007e 0161     		str	r1, [r0, #16]
 2055              	.LVL249:
 673:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp) << 2;
 2056              		.loc 1 673 0
 2057 0080 0569     		ldr	r5, [r0, #16]
3126:lib/ff/sdio_stm32f1.c **** 
3127:lib/ff/sdio_stm32f1.c **** 
3128:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3129:lib/ff/sdio_stm32f1.c **** /*! 
3130:lib/ff/sdio_stm32f1.c **** 	@brief  Returns the DMA End Of Transfer Status.
3131:lib/ff/sdio_stm32f1.c **** 	@param  None
3132:lib/ff/sdio_stm32f1.c **** 	@retval DMA SDIO Channel Status.
3133:lib/ff/sdio_stm32f1.c **** */
3134:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3135:lib/ff/sdio_stm32f1.c **** uint32_t SD_DMAEndOfTransferStatus(void)
3136:lib/ff/sdio_stm32f1.c **** {
3137:lib/ff/sdio_stm32f1.c ****   return (uint32_t)DMA_GetFlagStatus(DMA2_FLAG_TC4);
3138:lib/ff/sdio_stm32f1.c **** }
3139:lib/ff/sdio_stm32f1.c **** 
3140:lib/ff/sdio_stm32f1.c **** 
3141:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3142:lib/ff/sdio_stm32f1.c **** /*! 
3143:lib/ff/sdio_stm32f1.c ****     @brief	Handles SDIO interrupts requests.
3144:lib/ff/sdio_stm32f1.c **** 	@param	None.
3145:lib/ff/sdio_stm32f1.c ****     @retval	None.
3146:lib/ff/sdio_stm32f1.c **** */
3147:lib/ff/sdio_stm32f1.c **** /**************************************************************************/
3148:lib/ff/sdio_stm32f1.c **** void SDIO_IRQHandler(void)
3149:lib/ff/sdio_stm32f1.c **** {
3150:lib/ff/sdio_stm32f1.c ****   /* Process All SDIO Interrupt Sources */
3151:lib/ff/sdio_stm32f1.c ****   SD_ProcessIRQSrc();
3152:lib/ff/sdio_stm32f1.c **** }
3153:lib/ff/sdio_stm32f1.c **** 
3154:lib/ff/sdio_stm32f1.c **** /**
3155:lib/ff/sdio_stm32f1.c ****   * @brief  Enables wide bus opeartion for the requeseted card if supported by 
3156:lib/ff/sdio_stm32f1.c ****   *         card.
3157:lib/ff/sdio_stm32f1.c ****   * @param  WideMode: Specifies the SD card wide bus mode. 
3158:lib/ff/sdio_stm32f1.c ****   *   This parameter can be one of the following values:
3159:lib/ff/sdio_stm32f1.c ****   *     @arg SDIO_BusWide_8b: 8-bit data transfer (Only for MMC)
3160:lib/ff/sdio_stm32f1.c ****   *     @arg SDIO_BusWide_4b: 4-bit data transfer
3161:lib/ff/sdio_stm32f1.c ****   *     @arg SDIO_BusWide_1b: 1-bit data transfer
3162:lib/ff/sdio_stm32f1.c ****   * @retval SD_Error: SD Card Error code.
3163:lib/ff/sdio_stm32f1.c ****   */
3164:lib/ff/sdio_stm32f1.c **** SD_Error SD_GetCardStatus(SD_CardStatus *cardstatus)
3165:lib/ff/sdio_stm32f1.c **** {
3166:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
3167:lib/ff/sdio_stm32f1.c ****   uint8_t tmp = 0;
3168:lib/ff/sdio_stm32f1.c **** 
3169:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_SendSDStatus((uint32_t *)SDSTATUS_Tab);
3170:lib/ff/sdio_stm32f1.c **** 
3171:lib/ff/sdio_stm32f1.c ****   if (errorstatus  != SD_OK)
3172:lib/ff/sdio_stm32f1.c ****   {
3173:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
3174:lib/ff/sdio_stm32f1.c ****   }
3175:lib/ff/sdio_stm32f1.c **** 
3176:lib/ff/sdio_stm32f1.c ****   /*!< Byte 0 */
3177:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[0] & 0xC0) >> 6);
3178:lib/ff/sdio_stm32f1.c ****   cardstatus->DAT_BUS_WIDTH = tmp;
3179:lib/ff/sdio_stm32f1.c **** 
3180:lib/ff/sdio_stm32f1.c ****   /*!< Byte 0 */
3181:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[0] & 0x20) >> 5);
3182:lib/ff/sdio_stm32f1.c ****   cardstatus->SECURED_MODE = tmp;
3183:lib/ff/sdio_stm32f1.c **** 
3184:lib/ff/sdio_stm32f1.c ****   /*!< Byte 2 */
3185:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[2] & 0xFF));
3186:lib/ff/sdio_stm32f1.c ****   cardstatus->SD_CARD_TYPE = tmp << 8;
3187:lib/ff/sdio_stm32f1.c **** 
3188:lib/ff/sdio_stm32f1.c ****   /*!< Byte 3 */
3189:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[3] & 0xFF));
3190:lib/ff/sdio_stm32f1.c ****   cardstatus->SD_CARD_TYPE |= tmp;
3191:lib/ff/sdio_stm32f1.c **** 
3192:lib/ff/sdio_stm32f1.c ****   /*!< Byte 4 */
3193:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(SDSTATUS_Tab[4] & 0xFF);
3194:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA = tmp << 24;
3195:lib/ff/sdio_stm32f1.c **** 
3196:lib/ff/sdio_stm32f1.c ****   /*!< Byte 5 */
3197:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(SDSTATUS_Tab[5] & 0xFF);
3198:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA |= tmp << 16;
3199:lib/ff/sdio_stm32f1.c **** 
3200:lib/ff/sdio_stm32f1.c ****   /*!< Byte 6 */
3201:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(SDSTATUS_Tab[6] & 0xFF);
3202:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA |= tmp << 8;
3203:lib/ff/sdio_stm32f1.c **** 
3204:lib/ff/sdio_stm32f1.c ****   /*!< Byte 7 */
3205:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(SDSTATUS_Tab[7] & 0xFF);
3206:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA |= tmp;
3207:lib/ff/sdio_stm32f1.c **** 
3208:lib/ff/sdio_stm32f1.c ****   /*!< Byte 8 */
3209:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[8] & 0xFF));
3210:lib/ff/sdio_stm32f1.c ****   cardstatus->SPEED_CLASS = tmp;
3211:lib/ff/sdio_stm32f1.c **** 
3212:lib/ff/sdio_stm32f1.c ****   /*!< Byte 9 */
3213:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[9] & 0xFF));
3214:lib/ff/sdio_stm32f1.c ****   cardstatus->PERFORMANCE_MOVE = tmp;
3215:lib/ff/sdio_stm32f1.c **** 
3216:lib/ff/sdio_stm32f1.c ****   /*!< Byte 10 */
3217:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[10] & 0xF0) >> 4);
3218:lib/ff/sdio_stm32f1.c ****   cardstatus->AU_SIZE = tmp;
3219:lib/ff/sdio_stm32f1.c **** 
3220:lib/ff/sdio_stm32f1.c ****   /*!< Byte 11 */
3221:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(SDSTATUS_Tab[11] & 0xFF);
3222:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_SIZE = tmp << 8;
3223:lib/ff/sdio_stm32f1.c **** 
3224:lib/ff/sdio_stm32f1.c ****   /*!< Byte 12 */
3225:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(SDSTATUS_Tab[12] & 0xFF);
3226:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_SIZE |= tmp;
3227:lib/ff/sdio_stm32f1.c **** 
3228:lib/ff/sdio_stm32f1.c ****   /*!< Byte 13 */
3229:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[13] & 0xFC) >> 2);
3230:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_TIMEOUT = tmp;
3231:lib/ff/sdio_stm32f1.c **** 
3232:lib/ff/sdio_stm32f1.c ****   /*!< Byte 13 */
3233:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[13] & 0x3));
3234:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_OFFSET = tmp;
3235:lib/ff/sdio_stm32f1.c ****  
3236:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
3237:lib/ff/sdio_stm32f1.c **** }
 2058              		.loc 1 3237 0
 2059 0082 DBB2     		uxtb	r3, r3
 2060              	.LVL250:
 673:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp) << 2;
 2061              		.loc 1 673 0
 2062 0084 45EA8302 		orr	r2, r5, r3, lsl #2
 2063 0088 0261     		str	r2, [r0, #16]
 676:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0xFF000000) >> 24);
 2064              		.loc 1 676 0
 2065 008a A468     		ldr	r4, [r4, #8]
 2066 008c 260E     		lsrs	r6, r4, #24
 2067              	.LVL251:
 677:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp & 0xC0) >> 6;
 2068              		.loc 1 677 0
 2069 008e 0169     		ldr	r1, [r0, #16]
 2070 0090 41EA9615 		orr	r5, r1, r6, lsr #6
 2071 0094 0561     		str	r5, [r0, #16]
 679:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxRdCurrentVDDMin = (tmp & 0x38) >> 3;
 2072              		.loc 1 679 0
 2073 0096 C6F3C203 		ubfx	r3, r6, #3, #3
 2074 009a 0375     		strb	r3, [r0, #20]
 680:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxRdCurrentVDDMax = (tmp & 0x07);
 2075              		.loc 1 680 0
 2076 009c 06F00702 		and	r2, r6, #7
 2077 00a0 4275     		strb	r2, [r0, #21]
 683:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x00FF0000) >> 16);
 2078              		.loc 1 683 0
 2079 00a2 C4F30746 		ubfx	r6, r4, #16, #8
 2080              	.LVL252:
 684:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxWrCurrentVDDMin = (tmp & 0xE0) >> 5;
 2081              		.loc 1 684 0
 2082 00a6 7109     		lsrs	r1, r6, #5
 2083 00a8 8175     		strb	r1, [r0, #22]
 685:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.MaxWrCurrentVDDMax = (tmp & 0x1C) >> 2;
 2084              		.loc 1 685 0
 2085 00aa C6F38205 		ubfx	r5, r6, #2, #3
 2086 00ae C575     		strb	r5, [r0, #23]
 686:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSizeMul = (tmp & 0x03) << 1;
 2087              		.loc 1 686 0
 2088 00b0 06F00303 		and	r3, r6, #3
 2089 00b4 5A00     		lsls	r2, r3, #1
 2090 00b6 0276     		strb	r2, [r0, #24]
 688:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x0000FF00) >> 8);
 2091              		.loc 1 688 0
 2092 00b8 C4F30721 		ubfx	r1, r4, #8, #8
 2093              	.LVL253:
 689:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSizeMul |= (tmp & 0x80) >> 7;
 2094              		.loc 1 689 0
 2095 00bc 047E     		ldrb	r4, [r0, #24]	@ zero_extendqisi2
 2096 00be 44EAD116 		orr	r6, r4, r1, lsr #7
 2097 00c2 0676     		strb	r6, [r0, #24]
 691:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity = (cardinfo->SD_csd.DeviceSize + 1) ;
 2098              		.loc 1 691 0
 2099 00c4 0669     		ldr	r6, [r0, #16]
 692:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity *= (1 << (cardinfo->SD_csd.DeviceSizeMul + 2));
 2100              		.loc 1 692 0
 2101 00c6 057E     		ldrb	r5, [r0, #24]	@ zero_extendqisi2
 693:lib/ff/sdio_stm32f1.c ****     cardinfo->CardBlockSize = 1 << (cardinfo->SD_csd.RdBlockLen);
 2102              		.loc 1 693 0
 2103 00c8 027A     		ldrb	r2, [r0, #8]	@ zero_extendqisi2
 2104 00ca 0123     		movs	r3, #1
 2105 00cc 03FA02F4 		lsl	r4, r3, r2
 2106 00d0 0465     		str	r4, [r0, #80]
 692:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity *= (1 << (cardinfo->SD_csd.DeviceSizeMul + 2));
 2107              		.loc 1 692 0
 2108 00d2 0235     		adds	r5, r5, #2
 2109 00d4 03FA05F2 		lsl	r2, r3, r5
 2110 00d8 D517     		asrs	r5, r2, #31
 2111 00da A2FB0423 		umull	r2, r3, r2, r4
 2112 00de 04FB0533 		mla	r3, r4, r5, r3
 691:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity = (cardinfo->SD_csd.DeviceSize + 1) ;
 2113              		.loc 1 691 0
 2114 00e2 0136     		adds	r6, r6, #1
 694:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity *= cardinfo->CardBlockSize;
 2115              		.loc 1 694 0
 2116 00e4 A2FB0645 		umull	r4, r5, r2, r6
 2117 00e8 06FB0355 		mla	r5, r6, r3, r5
 2118 00ec C0E91245 		strd	r4, [r0, #72]
 2119 00f0 1CE0     		b	.L173
 2120              	.LVL254:
 2121              	.L172:
 696:lib/ff/sdio_stm32f1.c ****   else if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 2122              		.loc 1 696 0
 2123 00f2 022D     		cmp	r5, #2
 2124 00f4 1AD1     		bne	.L173
 2125              	.LVL255:
 700:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize = (tmp & 0x3F) << 16;
 2126              		.loc 1 700 0
 2127 00f6 03F03F05 		and	r5, r3, #63
 2128 00fa 2B04     		lsls	r3, r5, #16
 2129              	.LVL256:
 2130 00fc 0361     		str	r3, [r0, #16]
 703:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0xFF000000) >> 24);
 2131              		.loc 1 703 0
 2132 00fe A468     		ldr	r4, [r4, #8]
 2133              	.LVL257:
 705:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp << 8);
 2134              		.loc 1 705 0
 2135 0100 0169     		ldr	r1, [r0, #16]
 2136              		.loc 1 3237 0
 2137 0102 220E     		lsrs	r2, r4, #24
 705:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp << 8);
 2138              		.loc 1 705 0
 2139 0104 41EA0225 		orr	r5, r1, r2, lsl #8
 2140 0108 0561     		str	r5, [r0, #16]
 2141              	.LVL258:
 710:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp);
 2142              		.loc 1 710 0
 2143 010a 0369     		ldr	r3, [r0, #16]
 708:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x00FF0000) >> 16);
 2144              		.loc 1 708 0
 2145 010c C4F30741 		ubfx	r1, r4, #16, #8
 710:lib/ff/sdio_stm32f1.c ****     cardinfo->SD_csd.DeviceSize |= (tmp);
 2146              		.loc 1 710 0
 2147 0110 41EA0302 		orr	r2, r1, r3
 2148 0114 0261     		str	r2, [r0, #16]
 713:lib/ff/sdio_stm32f1.c ****     tmp = (uint8_t)((CSD_Tab[2] & 0x0000FF00) >> 8);
 2149              		.loc 1 713 0
 2150 0116 C4F30721 		ubfx	r1, r4, #8, #8
 2151              	.LVL259:
 715:lib/ff/sdio_stm32f1.c ****     cardinfo->CardCapacity = (uint64_t)(cardinfo->SD_csd.DeviceSize + 1) * 512 * 1024;
 2152              		.loc 1 715 0
 2153 011a 0469     		ldr	r4, [r0, #16]
 2154 011c 651C     		adds	r5, r4, #1
 2155 011e 6B0B     		lsrs	r3, r5, #13
 2156 0120 C364     		str	r3, [r0, #76]
 2157 0122 EA04     		lsls	r2, r5, #19
 2158 0124 8264     		str	r2, [r0, #72]
 716:lib/ff/sdio_stm32f1.c ****     cardinfo->CardBlockSize = 512;    
 2159              		.loc 1 716 0
 2160 0126 4FF40074 		mov	r4, #512
 2161 012a 0465     		str	r4, [r0, #80]
 2162              	.LVL260:
 2163              	.L173:
 720:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.EraseGrSize = (tmp & 0x40) >> 6;
 2164              		.loc 1 720 0
 2165 012c C1F38014 		ubfx	r4, r1, #6, #1
 2166 0130 4476     		strb	r4, [r0, #25]
 721:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.EraseGrMul = (tmp & 0x3F) << 1;
 2167              		.loc 1 721 0
 2168 0132 01F03F01 		and	r1, r1, #63
 2169              	.LVL261:
 2170 0136 4A00     		lsls	r2, r1, #1
 2171 0138 8276     		strb	r2, [r0, #26]
 724:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CSD_Tab[2] & 0x000000FF);
 2172              		.loc 1 724 0
 2173 013a 524D     		ldr	r5, .L174+8
 2174 013c AB68     		ldr	r3, [r5, #8]
 2175              	.LVL262:
 725:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.EraseGrMul |= (tmp & 0x80) >> 7;
 2176              		.loc 1 725 0
 2177 013e 847E     		ldrb	r4, [r0, #26]	@ zero_extendqisi2
 2178 0140 C3F3C011 		ubfx	r1, r3, #7, #1
 2179 0144 44EA0102 		orr	r2, r4, r1
 2180 0148 8276     		strb	r2, [r0, #26]
 726:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrProtectGrSize = (tmp & 0x7F);
 2181              		.loc 1 726 0
 2182 014a 03F07F03 		and	r3, r3, #127
 2183              	.LVL263:
 2184 014e C376     		strb	r3, [r0, #27]
 729:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[3] & 0xFF000000) >> 24);
 2185              		.loc 1 729 0
 2186 0150 ED68     		ldr	r5, [r5, #12]
 2187 0152 2C0E     		lsrs	r4, r5, #24
 2188              	.LVL264:
 730:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrProtectGrEnable = (tmp & 0x80) >> 7;
 2189              		.loc 1 730 0
 2190 0154 E109     		lsrs	r1, r4, #7
 2191 0156 0177     		strb	r1, [r0, #28]
 731:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.ManDeflECC = (tmp & 0x60) >> 5;
 2192              		.loc 1 731 0
 2193 0158 C4F34112 		ubfx	r2, r4, #5, #2
 2194 015c 4277     		strb	r2, [r0, #29]
 732:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WrSpeedFact = (tmp & 0x1C) >> 2;
 2195              		.loc 1 732 0
 2196 015e C4F38203 		ubfx	r3, r4, #2, #3
 2197 0162 8377     		strb	r3, [r0, #30]
 733:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.MaxWrBlockLen = (tmp & 0x03) << 2;
 2198              		.loc 1 733 0
 2199 0164 04F00304 		and	r4, r4, #3
 2200              	.LVL265:
 2201 0168 A100     		lsls	r1, r4, #2
 2202 016a C177     		strb	r1, [r0, #31]
 736:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[3] & 0x00FF0000) >> 16);
 2203              		.loc 1 736 0
 2204 016c C5F30742 		ubfx	r2, r5, #16, #8
 2205              	.LVL266:
 737:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.MaxWrBlockLen |= (tmp & 0xC0) >> 6;
 2206              		.loc 1 737 0
 2207 0170 C37F     		ldrb	r3, [r0, #31]	@ zero_extendqisi2
 2208 0172 43EA9214 		orr	r4, r3, r2, lsr #6
 2209 0176 C477     		strb	r4, [r0, #31]
 738:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.WriteBlockPaPartial = (tmp & 0x20) >> 5;
 2210              		.loc 1 738 0
 2211 0178 C2F34011 		ubfx	r1, r2, #5, #1
 2212 017c 80F82010 		strb	r1, [r0, #32]
 739:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved3 = 0;
 2213              		.loc 1 739 0
 2214 0180 0023     		movs	r3, #0
 2215 0182 80F82130 		strb	r3, [r0, #33]
 740:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.ContentProtectAppli = (tmp & 0x01);
 2216              		.loc 1 740 0
 2217 0186 02F00102 		and	r2, r2, #1
 2218              	.LVL267:
 2219 018a 80F82220 		strb	r2, [r0, #34]
 743:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CSD_Tab[3] & 0x0000FF00) >> 8);
 2220              		.loc 1 743 0
 2221 018e C5F30724 		ubfx	r4, r5, #8, #8
 2222              	.LVL268:
 744:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.FileFormatGrouop = (tmp & 0x80) >> 7;
 2223              		.loc 1 744 0
 2224 0192 E109     		lsrs	r1, r4, #7
 2225 0194 80F82310 		strb	r1, [r0, #35]
 745:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CopyFlag = (tmp & 0x40) >> 6;
 2226              		.loc 1 745 0
 2227 0198 C4F38013 		ubfx	r3, r4, #6, #1
 2228 019c 80F82430 		strb	r3, [r0, #36]
 746:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.PermWrProtect = (tmp & 0x20) >> 5;
 2229              		.loc 1 746 0
 2230 01a0 C4F34012 		ubfx	r2, r4, #5, #1
 2231 01a4 80F82520 		strb	r2, [r0, #37]
 747:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.TempWrProtect = (tmp & 0x10) >> 4;
 2232              		.loc 1 747 0
 2233 01a8 C4F30011 		ubfx	r1, r4, #4, #1
 2234 01ac 80F82610 		strb	r1, [r0, #38]
 748:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.FileFormat = (tmp & 0x0C) >> 2;
 2235              		.loc 1 748 0
 2236 01b0 C4F38103 		ubfx	r3, r4, #2, #2
 2237 01b4 80F82730 		strb	r3, [r0, #39]
 749:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.ECC = (tmp & 0x03);
 2238              		.loc 1 749 0
 2239 01b8 04F00304 		and	r4, r4, #3
 2240              	.LVL269:
 2241 01bc 80F82840 		strb	r4, [r0, #40]
 2242              	.LVL270:
 753:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.CSD_CRC = (tmp & 0xFE) >> 1;
 2243              		.loc 1 753 0
 2244 01c0 C5F34605 		ubfx	r5, r5, #1, #7
 2245              	.LVL271:
 2246 01c4 80F82950 		strb	r5, [r0, #41]
 754:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_csd.Reserved4 = 1;
 2247              		.loc 1 754 0
 2248 01c8 0121     		movs	r1, #1
 2249 01ca 80F82A10 		strb	r1, [r0, #42]
 758:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[0] & 0xFF000000) >> 24);
 2250              		.loc 1 758 0
 2251 01ce 2E4B     		ldr	r3, .L174+12
 2252 01d0 1A68     		ldr	r2, [r3, #0]
 2253 01d2 140E     		lsrs	r4, r2, #24
 2254              	.LVL272:
 759:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufacturerID = tmp;
 2255              		.loc 1 759 0
 2256 01d4 80F82C40 		strb	r4, [r0, #44]
 2257              	.LVL273:
 762:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[0] & 0x00FF0000) >> 16);
 2258              		.loc 1 762 0
 2259 01d8 C2F30745 		ubfx	r5, r2, #16, #8
 763:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.OEM_AppliID = tmp << 8;
 2260              		.loc 1 763 0
 2261 01dc 2C02     		lsls	r4, r5, #8
 2262 01de C485     		strh	r4, [r0, #46]	@ movhi
 2263              	.LVL274:
 767:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.OEM_AppliID |= tmp;
 2264              		.loc 1 767 0
 2265 01e0 C58D     		ldrh	r5, [r0, #46]
 2266 01e2 ACB2     		uxth	r4, r5
 766:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[0] & 0x000000FF00) >> 8);
 2267              		.loc 1 766 0
 2268 01e4 C2F30725 		ubfx	r5, r2, #8, #8
 767:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.OEM_AppliID |= tmp;
 2269              		.loc 1 767 0
 2270 01e8 2C43     		orrs	r4, r4, r5
 2271 01ea C485     		strh	r4, [r0, #46]	@ movhi
 2272              	.LVL275:
 771:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 = tmp << 24;
 2273              		.loc 1 771 0
 2274 01ec 1206     		lsls	r2, r2, #24
 2275              	.LVL276:
 2276 01ee 0263     		str	r2, [r0, #48]
 774:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[1] & 0xFF000000) >> 24);
 2277              		.loc 1 774 0
 2278 01f0 5A68     		ldr	r2, [r3, #4]
 2279              	.LVL277:
 775:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp << 16;
 2280              		.loc 1 775 0
 2281 01f2 046B     		ldr	r4, [r0, #48]
 2282              		.loc 1 3237 0
 2283 01f4 150E     		lsrs	r5, r2, #24
 775:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp << 16;
 2284              		.loc 1 775 0
 2285 01f6 44EA0544 		orr	r4, r4, r5, lsl #16
 2286 01fa 0463     		str	r4, [r0, #48]
 2287              	.LVL278:
 779:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp << 8;
 2288              		.loc 1 779 0
 2289 01fc 046B     		ldr	r4, [r0, #48]
 778:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[1] & 0x00FF0000) >> 16);
 2290              		.loc 1 778 0
 2291 01fe C2F30745 		ubfx	r5, r2, #16, #8
 779:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp << 8;
 2292              		.loc 1 779 0
 2293 0202 44EA0524 		orr	r4, r4, r5, lsl #8
 2294 0206 0463     		str	r4, [r0, #48]
 2295              	.LVL279:
 783:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp;
 2296              		.loc 1 783 0
 2297 0208 046B     		ldr	r4, [r0, #48]
 782:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[1] & 0x0000FF00) >> 8);
 2298              		.loc 1 782 0
 2299 020a C2F30725 		ubfx	r5, r2, #8, #8
 783:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName1 |= tmp;
 2300              		.loc 1 783 0
 2301 020e 2C43     		orrs	r4, r4, r5
 2302 0210 0463     		str	r4, [r0, #48]
 786:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)(CID_Tab[1] & 0x000000FF);
 2303              		.loc 1 786 0
 2304 0212 D2B2     		uxtb	r2, r2
 2305              	.LVL280:
 787:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdName2 = tmp;
 2306              		.loc 1 787 0
 2307 0214 80F83420 		strb	r2, [r0, #52]
 790:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[2] & 0xFF000000) >> 24);
 2308              		.loc 1 790 0
 2309 0218 9A68     		ldr	r2, [r3, #8]
 2310              	.LVL281:
 2311 021a 150E     		lsrs	r5, r2, #24
 2312              	.LVL282:
 791:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdRev = tmp;
 2313              		.loc 1 791 0
 2314 021c 80F83550 		strb	r5, [r0, #53]
 2315              	.LVL283:
 794:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[2] & 0x00FF0000) >> 16);
 2316              		.loc 1 794 0
 2317 0220 C2F30744 		ubfx	r4, r2, #16, #8
 795:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN = tmp << 24;
 2318              		.loc 1 795 0
 2319 0224 2506     		lsls	r5, r4, #24
 2320 0226 8563     		str	r5, [r0, #56]
 2321              	.LVL284:
 799:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp << 16;
 2322              		.loc 1 799 0
 2323 0228 846B     		ldr	r4, [r0, #56]
 798:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[2] & 0x0000FF00) >> 8);
 2324              		.loc 1 798 0
 2325 022a C2F30725 		ubfx	r5, r2, #8, #8
 799:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp << 16;
 2326              		.loc 1 799 0
 2327 022e 44EA0544 		orr	r4, r4, r5, lsl #16
 2328 0232 8463     		str	r4, [r0, #56]
 2329              	.LVL285:
 803:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp << 8;
 2330              		.loc 1 803 0
 2331 0234 846B     		ldr	r4, [r0, #56]
 2332              		.loc 1 3237 0
 2333 0236 D2B2     		uxtb	r2, r2
 2334              	.LVL286:
 803:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp << 8;
 2335              		.loc 1 803 0
 2336 0238 44EA0224 		orr	r4, r4, r2, lsl #8
 2337 023c 8463     		str	r4, [r0, #56]
 806:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[3] & 0xFF000000) >> 24);
 2338              		.loc 1 806 0
 2339 023e DB68     		ldr	r3, [r3, #12]
 2340              	.LVL287:
 807:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ProdSN |= tmp;
 2341              		.loc 1 807 0
 2342 0240 826B     		ldr	r2, [r0, #56]
 2343 0242 42EA1364 		orr	r4, r2, r3, lsr #24
 2344 0246 8463     		str	r4, [r0, #56]
 810:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[3] & 0x00FF0000) >> 16);
 2345              		.loc 1 810 0
 2346 0248 C3F30742 		ubfx	r2, r3, #16, #8
 2347              	.LVL288:
 811:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.Reserved1 |= (tmp & 0xF0) >> 4;
 2348              		.loc 1 811 0
 2349 024c 90F83C40 		ldrb	r4, [r0, #60]	@ zero_extendqisi2
 2350 0250 44EA1214 		orr	r4, r4, r2, lsr #4
 2351 0254 80F83C40 		strb	r4, [r0, #60]
 812:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufactDate = (tmp & 0x0F) << 8;
 2352              		.loc 1 812 0
 2353 0258 02F00F02 		and	r2, r2, #15
 2354              	.LVL289:
 2355 025c 1402     		lsls	r4, r2, #8
 2356 025e C487     		strh	r4, [r0, #62]	@ movhi
 2357              	.LVL290:
 816:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufactDate |= tmp;
 2358              		.loc 1 816 0
 2359 0260 C28F     		ldrh	r2, [r0, #62]
 2360 0262 92B2     		uxth	r2, r2
 815:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((CID_Tab[3] & 0x0000FF00) >> 8);
 2361              		.loc 1 815 0
 2362 0264 C3F30724 		ubfx	r4, r3, #8, #8
 816:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.ManufactDate |= tmp;
 2363              		.loc 1 816 0
 2364 0268 2243     		orrs	r2, r2, r4
 2365 026a C287     		strh	r2, [r0, #62]	@ movhi
 2366              	.LVL291:
 820:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.CID_CRC = (tmp & 0xFE) >> 1;
 2367              		.loc 1 820 0
 2368 026c C3F34603 		ubfx	r3, r3, #1, #7
 2369              	.LVL292:
 2370 0270 80F84030 		strb	r3, [r0, #64]
 821:lib/ff/sdio_stm32f1.c ****   cardinfo->SD_cid.Reserved2 = 1;
 2371              		.loc 1 821 0
 2372 0274 80F84110 		strb	r1, [r0, #65]
 824:lib/ff/sdio_stm32f1.c **** }
 2373              		.loc 1 824 0
 2374 0278 2A20     		movs	r0, #42
 2375              	.LVL293:
 2376 027a 70BD     		pop	{r4, r5, r6, pc}
 2377              	.L175:
 2378              		.align	2
 2379              	.L174:
 2380 027c 00000000 		.word	.LANCHOR4
 2381 0280 00000000 		.word	.LANCHOR1
 2382 0284 00000000 		.word	.LANCHOR6
 2383 0288 00000000 		.word	.LANCHOR5
 2384              		.cfi_endproc
 2385              	.LFE64:
 2387              		.section	.text.SD_EnableWideBusOperation,"ax",%progbits
 2388              		.align	1
 2389              		.global	SD_EnableWideBusOperation
 2390              		.thumb
 2391              		.thumb_func
 2393              	SD_EnableWideBusOperation:
 2394              	.LFB65:
 840:lib/ff/sdio_stm32f1.c **** {
 2395              		.loc 1 840 0
 2396              		.cfi_startproc
 2397              		@ args = 0, pretend = 0, frame = 0
 2398              		@ frame_needed = 0, uses_anonymous_args = 0
 2399              	.LVL294:
 2400 0000 38B5     		push	{r3, r4, r5, lr}
 2401              	.LCFI14:
 2402              		.cfi_def_cfa_offset 16
 2403              		.cfi_offset 3, -16
 2404              		.cfi_offset 4, -12
 2405              		.cfi_offset 5, -8
 2406              		.cfi_offset 14, -4
 2407 0002 0546     		mov	r5, r0
 2408              	.LVL295:
 844:lib/ff/sdio_stm32f1.c ****   if (SDIO_MULTIMEDIA_CARD == CardType)
 2409              		.loc 1 844 0
 2410 0004 194B     		ldr	r3, .L183
 2411 0006 1868     		ldr	r0, [r3, #0]
 2412              	.LVL296:
 2413 0008 0328     		cmp	r0, #3
 2414 000a 2BD0     		beq	.L181
 849:lib/ff/sdio_stm32f1.c ****   else if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardT
 2415              		.loc 1 849 0
 2416 000c 0228     		cmp	r0, #2
 2417 000e 27D8     		bhi	.L180
 851:lib/ff/sdio_stm32f1.c ****     if (SDIO_BusWide_8b == WideMode)
 2418              		.loc 1 851 0
 2419 0010 B5F5805F 		cmp	r5, #4096
 2420 0014 26D0     		beq	.L181
 856:lib/ff/sdio_stm32f1.c ****     else if (SDIO_BusWide_4b == WideMode)
 2421              		.loc 1 856 0
 2422 0016 B5F5006F 		cmp	r5, #2048
 2423 001a 0FD1     		bne	.L178
 858:lib/ff/sdio_stm32f1.c ****       errorstatus = SDEnWideBus(ENABLE);
 2424              		.loc 1 858 0
 2425 001c 0120     		movs	r0, #1
 2426 001e FFF7FEFF 		bl	SDEnWideBus
 2427              	.LVL297:
 2428 0022 0446     		mov	r4, r0
 2429              	.LVL298:
 860:lib/ff/sdio_stm32f1.c ****       if (SD_OK == errorstatus)
 2430              		.loc 1 860 0
 2431 0024 2A28     		cmp	r0, #42
 2432 0026 1ED1     		bne	.L177
 863:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockDiv = SDIO_TRANSFER_CLK_DIV; 
 2433              		.loc 1 863 0
 2434 0028 1148     		ldr	r0, .L183+4
 2435              	.LVL299:
 2436 002a 0123     		movs	r3, #1
 2437 002c 0375     		strb	r3, [r0, #20]
 864:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 2438              		.loc 1 864 0
 2439 002e 0021     		movs	r1, #0
 2440 0030 0160     		str	r1, [r0, #0]
 865:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 2441              		.loc 1 865 0
 2442 0032 4160     		str	r1, [r0, #4]
 866:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 2443              		.loc 1 866 0
 2444 0034 8160     		str	r1, [r0, #8]
 867:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_4b;
 2445              		.loc 1 867 0
 2446 0036 C560     		str	r5, [r0, #12]
 868:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 2447              		.loc 1 868 0
 2448 0038 0161     		str	r1, [r0, #16]
 2449 003a 0EE0     		b	.L182
 2450              	.LVL300:
 2451              	.L178:
 874:lib/ff/sdio_stm32f1.c ****       errorstatus = SDEnWideBus(DISABLE);
 2452              		.loc 1 874 0
 2453 003c 0020     		movs	r0, #0
 2454 003e FFF7FEFF 		bl	SDEnWideBus
 2455              	.LVL301:
 2456 0042 0446     		mov	r4, r0
 2457              	.LVL302:
 876:lib/ff/sdio_stm32f1.c ****       if (SD_OK == errorstatus)
 2458              		.loc 1 876 0
 2459 0044 2A28     		cmp	r0, #42
 2460 0046 0ED1     		bne	.L177
 879:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockDiv = SDIO_TRANSFER_CLK_DIV; 
 2461              		.loc 1 879 0
 2462 0048 0948     		ldr	r0, .L183+4
 2463              	.LVL303:
 2464 004a 0121     		movs	r1, #1
 2465 004c 0175     		strb	r1, [r0, #20]
 880:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 2466              		.loc 1 880 0
 2467 004e 0022     		movs	r2, #0
 2468 0050 0260     		str	r2, [r0, #0]
 881:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 2469              		.loc 1 881 0
 2470 0052 4260     		str	r2, [r0, #4]
 882:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 2471              		.loc 1 882 0
 2472 0054 8260     		str	r2, [r0, #8]
 883:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_1b;
 2473              		.loc 1 883 0
 2474 0056 C260     		str	r2, [r0, #12]
 884:lib/ff/sdio_stm32f1.c ****         SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 2475              		.loc 1 884 0
 2476 0058 0261     		str	r2, [r0, #16]
 2477              	.LVL304:
 2478              	.L182:
 885:lib/ff/sdio_stm32f1.c ****         SDIO_Init(&SDIO_InitStructure);
 2479              		.loc 1 885 0
 2480 005a FFF7FEFF 		bl	SDIO_Init
 2481              	.LVL305:
 2482 005e 02E0     		b	.L177
 2483              	.LVL306:
 2484              	.L180:
 841:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 2485              		.loc 1 841 0
 2486 0060 2A24     		movs	r4, #42
 2487 0062 00E0     		b	.L177
 2488              	.L181:
 847:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 2489              		.loc 1 847 0
 2490 0064 2724     		movs	r4, #39
 2491              	.LVL307:
 2492              	.L177:
 891:lib/ff/sdio_stm32f1.c **** }
 2493              		.loc 1 891 0
 2494 0066 2046     		mov	r0, r4
 2495 0068 38BD     		pop	{r3, r4, r5, pc}
 2496              	.L184:
 2497 006a 00BF     		.align	2
 2498              	.L183:
 2499 006c 00000000 		.word	.LANCHOR4
 2500 0070 00000000 		.word	.LANCHOR3
 2501              		.cfi_endproc
 2502              	.LFE65:
 2504              		.section	.text.SD_SetDeviceMode,"ax",%progbits
 2505              		.align	1
 2506              		.global	SD_SetDeviceMode
 2507              		.thumb
 2508              		.thumb_func
 2510              	SD_SetDeviceMode:
 2511              	.LFB66:
 906:lib/ff/sdio_stm32f1.c **** {
 2512              		.loc 1 906 0
 2513              		.cfi_startproc
 2514              		@ args = 0, pretend = 0, frame = 0
 2515              		@ frame_needed = 0, uses_anonymous_args = 0
 2516              		@ link register save eliminated.
 2517              	.LVL308:
 2518              	.LVL309:
 909:lib/ff/sdio_stm32f1.c ****   if ((Mode == SD_DMA_MODE) || (Mode == SD_INTERRUPT_MODE) || (Mode == SD_POLLING_MODE))
 2519              		.loc 1 909 0
 2520 0000 0228     		cmp	r0, #2
 2521 0002 03D8     		bhi	.L187
 911:lib/ff/sdio_stm32f1.c ****     DeviceMode = Mode;
 2522              		.loc 1 911 0
 2523 0004 024B     		ldr	r3, .L188
 2524 0006 1860     		str	r0, [r3, #0]
 907:lib/ff/sdio_stm32f1.c ****   SD_Error errorstatus = SD_OK;
 2525              		.loc 1 907 0
 2526 0008 2A20     		movs	r0, #42
 2527              	.LVL310:
 2528 000a 7047     		bx	lr
 2529              	.LVL311:
 2530              	.L187:
 915:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_INVALID_PARAMETER;
 2531              		.loc 1 915 0
 2532 000c 2620     		movs	r0, #38
 2533              	.LVL312:
 919:lib/ff/sdio_stm32f1.c **** }
 2534              		.loc 1 919 0
 2535 000e 7047     		bx	lr
 2536              	.L189:
 2537              		.align	2
 2538              	.L188:
 2539 0010 00000000 		.word	.LANCHOR7
 2540              		.cfi_endproc
 2541              	.LFE66:
 2543              		.section	.text.SD_SelectDeselect,"ax",%progbits
 2544              		.align	1
 2545              		.global	SD_SelectDeselect
 2546              		.thumb
 2547              		.thumb_func
 2549              	SD_SelectDeselect:
 2550              	.LFB67:
 930:lib/ff/sdio_stm32f1.c **** {
 2551              		.loc 1 930 0
 2552              		.cfi_startproc
 2553              		@ args = 0, pretend = 0, frame = 0
 2554              		@ frame_needed = 0, uses_anonymous_args = 0
 2555              	.LVL313:
 2556 0000 10B5     		push	{r4, lr}
 2557              	.LCFI15:
 2558              		.cfi_def_cfa_offset 8
 2559              		.cfi_offset 4, -8
 2560              		.cfi_offset 14, -4
 2561              	.LVL314:
 934:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument =  addr;
 2562              		.loc 1 934 0
 2563 0002 094B     		ldr	r3, .L191
 2564 0004 1860     		str	r0, [r3, #0]
 935:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEL_DESEL_CARD;
 2565              		.loc 1 935 0
 2566 0006 0724     		movs	r4, #7
 2567 0008 5C60     		str	r4, [r3, #4]
 936:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 2568              		.loc 1 936 0
 2569 000a 4022     		movs	r2, #64
 2570 000c 9A60     		str	r2, [r3, #8]
 937:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 2571              		.loc 1 937 0
 2572 000e 0020     		movs	r0, #0
 2573              	.LVL315:
 2574 0010 D860     		str	r0, [r3, #12]
 938:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 2575              		.loc 1 938 0
 2576 0012 4FF48061 		mov	r1, #1024
 2577 0016 1961     		str	r1, [r3, #16]
 939:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 2578              		.loc 1 939 0
 2579 0018 1846     		mov	r0, r3
 2580 001a FFF7FEFF 		bl	SDIO_SendCommand
 2581              	.LVL316:
 941:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 2582              		.loc 1 941 0
 2583 001e 2046     		mov	r0, r4
 944:lib/ff/sdio_stm32f1.c **** }
 2584              		.loc 1 944 0
 2585 0020 BDE81040 		pop	{r4, lr}
 941:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEL_DESEL_CARD);
 2586              		.loc 1 941 0
 2587 0024 FFF7FEBF 		b	CmdResp1Error
 2588              	.LVL317:
 2589              	.L192:
 2590              		.align	2
 2591              	.L191:
 2592 0028 00000000 		.word	.LANCHOR0
 2593              		.cfi_endproc
 2594              	.LFE67:
 2596              		.section	.text.SD_Init,"ax",%progbits
 2597              		.align	1
 2598              		.global	SD_Init
 2599              		.thumb
 2600              		.thumb_func
 2602              	SD_Init:
 2603              	.LFB57:
 179:lib/ff/sdio_stm32f1.c **** {
 2604              		.loc 1 179 0
 2605              		.cfi_startproc
 2606              		@ args = 0, pretend = 0, frame = 8
 2607              		@ frame_needed = 0, uses_anonymous_args = 0
 2608 0000 73B5     		push	{r0, r1, r4, r5, r6, lr}
 2609              	.LCFI16:
 2610              		.cfi_def_cfa_offset 24
 2611              		.cfi_offset 0, -24
 2612              		.cfi_offset 1, -20
 2613              		.cfi_offset 4, -16
 2614              		.cfi_offset 5, -12
 2615              		.cfi_offset 6, -8
 2616              		.cfi_offset 14, -4
 2617              	.LVL318:
 186:lib/ff/sdio_stm32f1.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC | RCC_APB2Periph_GPIOD | SD_DETECT_GPIO_CLK, ENABLE);
 2618              		.loc 1 186 0
 2619 0002 B020     		movs	r0, #176
 2620 0004 0121     		movs	r1, #1
 2621 0006 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 2622              	.LVL319:
 189:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9 | GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
 2623              		.loc 1 189 0
 2624 000a 4FF4F853 		mov	r3, #7936
 2625 000e ADF80030 		strh	r3, [sp, #0]	@ movhi
 190:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 2626              		.loc 1 190 0
 2627 0012 0320     		movs	r0, #3
 2628 0014 8DF80200 		strb	r0, [sp, #2]
 191:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
 2629              		.loc 1 191 0
 2630 0018 1821     		movs	r1, #24
 2631 001a 8DF80310 		strb	r1, [sp, #3]
 192:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOC, &GPIO_InitStructure);
 2632              		.loc 1 192 0
 2633 001e 2A48     		ldr	r0, .L196
 2634 0020 6946     		mov	r1, sp
 2635 0022 FFF7FEFF 		bl	GPIO_Init
 2636              	.LVL320:
 195:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 2637              		.loc 1 195 0
 2638 0026 0422     		movs	r2, #4
 2639 0028 ADF80020 		strh	r2, [sp, #0]	@ movhi
 196:lib/ff/sdio_stm32f1.c ****   GPIO_Init(GPIOD, &GPIO_InitStructure);
 2640              		.loc 1 196 0
 2641 002c 2748     		ldr	r0, .L196+4
 2642 002e 6946     		mov	r1, sp
 2643 0030 FFF7FEFF 		bl	GPIO_Init
 2644              	.LVL321:
 199:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Pin = SD_DETECT_PIN;
 2645              		.loc 1 199 0
 2646 0034 4FF40065 		mov	r5, #2048
 2647 0038 ADF80050 		strh	r5, [sp, #0]	@ movhi
 200:lib/ff/sdio_stm32f1.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
 2648              		.loc 1 200 0
 2649 003c 4823     		movs	r3, #72
 2650 003e 8DF80330 		strb	r3, [sp, #3]
 201:lib/ff/sdio_stm32f1.c ****   GPIO_Init(SD_DETECT_GPIO_PORT, &GPIO_InitStructure);
 2651              		.loc 1 201 0
 2652 0042 2348     		ldr	r0, .L196+8
 2653 0044 6946     		mov	r1, sp
 2654 0046 FFF7FEFF 		bl	GPIO_Init
 2655              	.LVL322:
 204:lib/ff/sdio_stm32f1.c ****   RCC_AHBPeriphClockCmd(RCC_AHBPeriph_SDIO, ENABLE);
 2656              		.loc 1 204 0
 2657 004a 4FF48060 		mov	r0, #1024
 2658 004e 0121     		movs	r1, #1
 2659 0050 FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 2660              	.LVL323:
 207:lib/ff/sdio_stm32f1.c ****   RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA2, ENABLE);
 2661              		.loc 1 207 0
 2662 0054 0220     		movs	r0, #2
 2663 0056 0121     		movs	r1, #1
 2664 0058 FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 2665              	.LVL324:
 211:lib/ff/sdio_stm32f1.c ****   SDIO_DeInit();
 2666              		.loc 1 211 0
 2667 005c FFF7FEFF 		bl	SDIO_DeInit
 2668              	.LVL325:
 213:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_PowerON();
 2669              		.loc 1 213 0
 2670 0060 FFF7FEFF 		bl	SD_PowerON
 2671              	.LVL326:
 215:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 2672              		.loc 1 215 0
 2673 0064 2A28     		cmp	r0, #42
 2674 0066 2ED1     		bne	.L194
 221:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_InitializeCards();
 2675              		.loc 1 221 0
 2676 0068 FFF7FEFF 		bl	SD_InitializeCards
 2677              	.LVL327:
 223:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 2678              		.loc 1 223 0
 2679 006c 2A28     		cmp	r0, #42
 2680 006e 2AD1     		bne	.L194
 231:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockDiv = SDIO_TRANSFER_CLK_DIV; 
 2681              		.loc 1 231 0
 2682 0070 1848     		ldr	r0, .L196+12
 2683              	.LVL328:
 2684 0072 0126     		movs	r6, #1
 2685 0074 0675     		strb	r6, [r0, #20]
 232:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockEdge = SDIO_ClockEdge_Rising;
 2686              		.loc 1 232 0
 2687 0076 0024     		movs	r4, #0
 2688 0078 0460     		str	r4, [r0, #0]
 233:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockBypass = SDIO_ClockBypass_Disable;
 2689              		.loc 1 233 0
 2690 007a 4460     		str	r4, [r0, #4]
 234:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_ClockPowerSave = SDIO_ClockPowerSave_Disable;
 2691              		.loc 1 234 0
 2692 007c 8460     		str	r4, [r0, #8]
 235:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_BusWide = SDIO_BusWide_1b;
 2693              		.loc 1 235 0
 2694 007e C460     		str	r4, [r0, #12]
 236:lib/ff/sdio_stm32f1.c ****   SDIO_InitStructure.SDIO_HardwareFlowControl = SDIO_HardwareFlowControl_Disable;
 2695              		.loc 1 236 0
 2696 0080 0461     		str	r4, [r0, #16]
 237:lib/ff/sdio_stm32f1.c ****   SDIO_Init(&SDIO_InitStructure);
 2697              		.loc 1 237 0
 2698 0082 FFF7FEFF 		bl	SDIO_Init
 2699              	.LVL329:
 240:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannel = SDIO_IRQn;
 2700              		.loc 1 240 0
 2701 0086 3120     		movs	r0, #49
 2702 0088 8DF80400 		strb	r0, [sp, #4]
 241:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
 2703              		.loc 1 241 0
 2704 008c 8DF80540 		strb	r4, [sp, #5]
 242:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 2705              		.loc 1 242 0
 2706 0090 8DF80640 		strb	r4, [sp, #6]
 243:lib/ff/sdio_stm32f1.c ****   NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 2707              		.loc 1 243 0
 2708 0094 8DF80760 		strb	r6, [sp, #7]
 244:lib/ff/sdio_stm32f1.c ****   NVIC_Init(&NVIC_InitStructure);
 2709              		.loc 1 244 0
 2710 0098 01A8     		add	r0, sp, #4
 2711 009a FFF7FEFF 		bl	NVIC_Init
 2712              	.LVL330:
 249:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_GetCardInfo(&SDCardInfo);
 2713              		.loc 1 249 0
 2714 009e 0E4E     		ldr	r6, .L196+16
 2715 00a0 3046     		mov	r0, r6
 2716 00a2 FFF7FEFF 		bl	SD_GetCardInfo
 2717              	.LVL331:
 252:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 2718              		.loc 1 252 0
 2719 00a6 2A28     		cmp	r0, #42
 2720 00a8 0DD1     		bne	.L194
 255:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_SelectDeselect((uint32_t) (SDCardInfo.RCA << 16));
 2721              		.loc 1 255 0
 2722 00aa B6F85410 		ldrh	r1, [r6, #84]
 2723 00ae 0804     		lsls	r0, r1, #16
 2724              	.LVL332:
 2725 00b0 FFF7FEFF 		bl	SD_SelectDeselect
 2726              	.LVL333:
 258:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 2727              		.loc 1 258 0
 2728 00b4 2A28     		cmp	r0, #42
 2729 00b6 06D1     		bne	.L194
 260:lib/ff/sdio_stm32f1.c ****     errorstatus = SD_EnableWideBusOperation(SDIO_BusWide_4b);
 2730              		.loc 1 260 0
 2731 00b8 2846     		mov	r0, r5
 2732              	.LVL334:
 2733 00ba FFF7FEFF 		bl	SD_EnableWideBusOperation
 2734              	.LVL335:
 264:lib/ff/sdio_stm32f1.c ****   if (errorstatus == SD_OK)
 2735              		.loc 1 264 0
 2736 00be 2A28     		cmp	r0, #42
 2737              	.LVL336:
 2738              	.LBB38:
 2739              	.LBB39:
 911:lib/ff/sdio_stm32f1.c ****     DeviceMode = Mode;
 2740              		.loc 1 911 0
 2741 00c0 04BF     		itt	eq
 2742 00c2 064A     		ldreq	r2, .L196+20
 2743 00c4 1460     		streq	r4, [r2, #0]
 2744              	.LVL337:
 2745              	.L194:
 2746              	.LBE39:
 2747              	.LBE38:
 270:lib/ff/sdio_stm32f1.c **** }
 2748              		.loc 1 270 0
 2749 00c6 7CBD     		pop	{r2, r3, r4, r5, r6, pc}
 2750              	.L197:
 2751              		.align	2
 2752              	.L196:
 2753 00c8 00100140 		.word	1073811456
 2754 00cc 00140140 		.word	1073812480
 2755 00d0 001C0140 		.word	1073814528
 2756 00d4 00000000 		.word	.LANCHOR3
 2757 00d8 00000000 		.word	.LANCHOR8
 2758 00dc 00000000 		.word	.LANCHOR7
 2759              		.cfi_endproc
 2760              	.LFE57:
 2762              		.section	.text.SD_ReadBlock,"ax",%progbits
 2763              		.align	1
 2764              		.global	SD_ReadBlock
 2765              		.thumb
 2766              		.thumb_func
 2768              	SD_ReadBlock:
 2769              	.LFB68:
 957:lib/ff/sdio_stm32f1.c **** {
 2770              		.loc 1 957 0
 2771              		.cfi_startproc
 2772              		@ args = 0, pretend = 0, frame = 8
 2773              		@ frame_needed = 0, uses_anonymous_args = 0
 2774              	.LVL338:
 2775 0000 2DE9F74F 		push	{r0, r1, r2, r4, r5, r6, r7, r8, r9, sl, fp, lr}
 2776              	.LCFI17:
 2777              		.cfi_def_cfa_offset 48
 2778              		.cfi_offset 0, -48
 2779              		.cfi_offset 1, -44
 2780              		.cfi_offset 2, -40
 2781              		.cfi_offset 4, -36
 2782              		.cfi_offset 5, -32
 2783              		.cfi_offset 6, -28
 2784              		.cfi_offset 7, -24
 2785              		.cfi_offset 8, -20
 2786              		.cfi_offset 9, -16
 2787              		.cfi_offset 10, -12
 2788              		.cfi_offset 11, -8
 2789              		.cfi_offset 14, -4
 2790 0004 8946     		mov	r9, r1
 2791 0006 1646     		mov	r6, r2
 2792              	.LVL339:
 962:lib/ff/sdio_stm32f1.c ****   if (NULL == readbuff)
 2793              		.loc 1 962 0
 2794 0008 8046     		mov	r8, r0
 2795 000a 08B9     		cbnz	r0, .L199
 2796              	.LVL340:
 2797              	.L202:
 965:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 2798              		.loc 1 965 0
 2799 000c 2624     		movs	r4, #38
 2800 000e F2E0     		b	.L200
 2801              	.LVL341:
 2802              	.L199:
 968:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
 2803              		.loc 1 968 0
 2804 0010 2A22     		movs	r2, #42
 2805              	.LVL342:
 2806 0012 7A4B     		ldr	r3, .L249
 2807 0014 1A70     		strb	r2, [r3, #0]
 969:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
 2808              		.loc 1 969 0
 2809 0016 0024     		movs	r4, #0
 2810 0018 7948     		ldr	r0, .L249+4
 2811              	.LVL343:
 2812 001a 0460     		str	r4, [r0, #0]
 970:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
 2813              		.loc 1 970 0
 2814 001c 7949     		ldr	r1, .L249+8
 2815              	.LVL344:
 2816 001e 0C60     		str	r4, [r1, #0]
 973:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 2817              		.loc 1 973 0
 2818 0020 7948     		ldr	r0, .L249+12
 2819 0022 7A4B     		ldr	r3, .L249+16
 974:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
 2820              		.loc 1 974 0
 2821 0024 80E81800 		stmia	r0, {r3, r4}
 975:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
 2822              		.loc 1 975 0
 2823 0028 8460     		str	r4, [r0, #8]
 976:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 2824              		.loc 1 976 0
 2825 002a C460     		str	r4, [r0, #12]
 977:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 2826              		.loc 1 977 0
 2827 002c 0461     		str	r4, [r0, #16]
 978:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
 2828              		.loc 1 978 0
 2829 002e 4461     		str	r4, [r0, #20]
 979:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 2830              		.loc 1 979 0
 2831 0030 FFF7FEFF 		bl	SDIO_DataConfig
 2832              	.LVL345:
 980:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
 2833              		.loc 1 980 0
 2834 0034 2046     		mov	r0, r4
 2835 0036 FFF7FEFF 		bl	SDIO_DMACmd
 2836              	.LVL346:
 982:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 2837              		.loc 1 982 0
 2838 003a 2046     		mov	r0, r4
 2839 003c FFF7FEFF 		bl	SDIO_GetResponse
 2840              	.LVL347:
 2841 0040 8301     		lsls	r3, r0, #6
 2842 0042 00F1D780 		bmi	.L223
 988:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 2843              		.loc 1 988 0
 2844 0046 724C     		ldr	r4, .L249+20
 2845 0048 2268     		ldr	r2, [r4, #0]
 2846 004a 022A     		cmp	r2, #2
 2847              	.LVL348:
 991:lib/ff/sdio_stm32f1.c ****     ReadAddr /= 512;
 2848              		.loc 1 991 0
 2849 004c 04BF     		itt	eq
 2850 004e 4FEA5929 		lsreq	r9, r9, #9
 2851              	.LVL349:
 990:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
 2852              		.loc 1 990 0
 2853 0052 4FF40076 		moveq	r6, #512
 2854              	.LVL350:
 993:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 2855              		.loc 1 993 0
 2856 0056 701E     		subs	r0, r6, #1
 2857 0058 83B2     		uxth	r3, r0
 2858 005a B3F5006F 		cmp	r3, #2048
 2859 005e D5D2     		bcs	.L202
 993:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 2860              		.loc 1 993 0 is_stmt 0 discriminator 1
 2861 0060 10EA0601 		ands	r1, r0, r6
 2862 0064 D2D1     		bne	.L202
 993:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 2863              		.loc 1 993 0
 2864 0066 3746     		mov	r7, r6
 2865              	.L203:
 2866              	.LVL351:
 2867              	.LBB44:
 2868              	.LBB45:
3046:lib/ff/sdio_stm32f1.c ****   while (NumberOfBytes != 1)
 2869              		.loc 1 3046 0 is_stmt 1
 2870 0068 012F     		cmp	r7, #1
 2871 006a 04D0     		beq	.L246
 2872              	.L204:
3048:lib/ff/sdio_stm32f1.c ****     NumberOfBytes >>= 1;
 2873              		.loc 1 3048 0
 2874 006c C7F34F07 		ubfx	r7, r7, #1, #16
 2875              	.LVL352:
3049:lib/ff/sdio_stm32f1.c ****     count++;
 2876              		.loc 1 3049 0
 2877 0070 4D1C     		adds	r5, r1, #1
 2878 0072 E9B2     		uxtb	r1, r5
 2879              	.LVL353:
 2880 0074 F8E7     		b	.L203
 2881              	.LVL354:
 2882              	.L246:
 2883              	.LBE45:
 2884              	.LBE44:
 998:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
 2885              		.loc 1 998 0
 2886 0076 674D     		ldr	r5, .L249+24
 2887 0078 2E60     		str	r6, [r5, #0]
 999:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
 2888              		.loc 1 999 0
 2889 007a 1024     		movs	r4, #16
 2890 007c 6C60     		str	r4, [r5, #4]
1000:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 2891              		.loc 1 1000 0
 2892 007e 4FF0400B 		mov	fp, #64
 2893 0082 C5F808B0 		str	fp, [r5, #8]
1001:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 2894              		.loc 1 1001 0
 2895 0086 4FF0000A 		mov	sl, #0
 2896 008a C5F80CA0 		str	sl, [r5, #12]
1002:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 2897              		.loc 1 1002 0
 2898 008e 4FF48062 		mov	r2, #1024
 2899 0092 2A61     		str	r2, [r5, #16]
1003:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 2900              		.loc 1 1003 0
 2901 0094 2846     		mov	r0, r5
 2902 0096 0191     		str	r1, [sp, #4]
 2903 0098 FFF7FEFF 		bl	SDIO_SendCommand
 2904              	.LVL355:
1005:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 2905              		.loc 1 1005 0
 2906 009c 2046     		mov	r0, r4
 2907 009e FFF7FEFF 		bl	CmdResp1Error
 2908              	.LVL356:
 2909 00a2 0446     		mov	r4, r0
 2910              	.LVL357:
1007:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 2911              		.loc 1 1007 0
 2912 00a4 2A28     		cmp	r0, #42
 2913 00a6 019B     		ldr	r3, [sp, #4]
 2914 00a8 40F0A580 		bne	.L200
1018:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 2915              		.loc 1 1018 0
 2916 00ac 5648     		ldr	r0, .L249+12
 2917              	.LVL358:
 2918 00ae 5749     		ldr	r1, .L249+16
1019:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = BlockSize;
 2919              		.loc 1 1019 0
 2920 00b0 80E84200 		stmia	r0, {r1, r6}
1020:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
 2921              		.loc 1 1020 0
 2922 00b4 1901     		lsls	r1, r3, #4
 2923 00b6 8160     		str	r1, [r0, #8]
1021:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
 2924              		.loc 1 1021 0
 2925 00b8 0224     		movs	r4, #2
 2926              	.LVL359:
 2927 00ba C460     		str	r4, [r0, #12]
1022:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 2928              		.loc 1 1022 0
 2929 00bc C0F810A0 		str	sl, [r0, #16]
1023:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
 2930              		.loc 1 1023 0
 2931 00c0 4761     		str	r7, [r0, #20]
1024:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 2932              		.loc 1 1024 0
 2933 00c2 FFF7FEFF 		bl	SDIO_DataConfig
 2934              	.LVL360:
1026:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = BlockSize;
 2935              		.loc 1 1026 0
 2936 00c6 4F48     		ldr	r0, .L249+8
 2937 00c8 0660     		str	r6, [r0, #0]
1027:lib/ff/sdio_stm32f1.c ****   StopCondition = 0;
 2938              		.loc 1 1027 0
 2939 00ca 534A     		ldr	r2, .L249+28
 2940 00cc C2F800A0 		str	sl, [r2, #0]
1028:lib/ff/sdio_stm32f1.c ****   DestBuffer = (uint32_t *)readbuff;
 2941              		.loc 1 1028 0
 2942 00d0 524B     		ldr	r3, .L249+32
 2943 00d2 C3F80080 		str	r8, [r3, #0]
1031:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)ReadAddr;
 2944              		.loc 1 1031 0
 2945 00d6 C5F80090 		str	r9, [r5, #0]
1032:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_READ_SINGLE_BLOCK;
 2946              		.loc 1 1032 0
 2947 00da 1124     		movs	r4, #17
 2948 00dc 6C60     		str	r4, [r5, #4]
1033:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 2949              		.loc 1 1033 0
 2950 00de C5F808B0 		str	fp, [r5, #8]
1034:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 2951              		.loc 1 1034 0
 2952 00e2 C5F80CA0 		str	sl, [r5, #12]
1035:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 2953              		.loc 1 1035 0
 2954 00e6 4FF48061 		mov	r1, #1024
 2955 00ea 2961     		str	r1, [r5, #16]
1036:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 2956              		.loc 1 1036 0
 2957 00ec 2846     		mov	r0, r5
 2958 00ee FFF7FEFF 		bl	SDIO_SendCommand
 2959              	.LVL361:
1038:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_READ_SINGLE_BLOCK);
 2960              		.loc 1 1038 0
 2961 00f2 2046     		mov	r0, r4
 2962 00f4 FFF7FEFF 		bl	CmdResp1Error
 2963              	.LVL362:
 2964 00f8 0446     		mov	r4, r0
 2965              	.LVL363:
1040:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 2966              		.loc 1 1040 0
 2967 00fa 2A28     		cmp	r0, #42
 2968 00fc 7BD1     		bne	.L200
1045:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_POLLING_MODE)
 2969              		.loc 1 1045 0
 2970 00fe 4848     		ldr	r0, .L249+36
 2971              	.LVL364:
 2972 0100 0268     		ldr	r2, [r0, #0]
 2973 0102 022A     		cmp	r2, #2
 2974 0104 49D1     		bne	.L205
1045:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_POLLING_MODE)
 2975              		.loc 1 1045 0 is_stmt 0 discriminator 1
 2976 0106 4546     		mov	r5, r8
 2977              	.LVL365:
 2978              	.L242:
1048:lib/ff/sdio_stm32f1.c ****     while (!(SDIO->STA &(SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DB
 2979              		.loc 1 1048 0 is_stmt 1 discriminator 1
 2980 0108 464E     		ldr	r6, .L249+40
 2981 010a 736B     		ldr	r3, [r6, #52]
 2982 010c 40F22A66 		movw	r6, #1578
 2983 0110 1E40     		ands	r6, r6, r3
 2984 0112 6EB9     		cbnz	r6, .L247
 2985              	.L209:
1050:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_RXFIFOHF) != RESET)
 2986              		.loc 1 1050 0
 2987 0114 4FF40040 		mov	r0, #32768
 2988 0118 FFF7FEFF 		bl	SDIO_GetFlagStatus
 2989              	.LVL366:
 2990 011c 0028     		cmp	r0, #0
 2991 011e F3D0     		beq	.L242
 2992              	.L208:
1054:lib/ff/sdio_stm32f1.c ****           *(tempbuff + count) = SDIO_ReadData();
 2993              		.loc 1 1054 0 discriminator 2
 2994 0120 FFF7FEFF 		bl	SDIO_ReadData
 2995              	.LVL367:
 2996 0124 A851     		str	r0, [r5, r6]
 2997 0126 0436     		adds	r6, r6, #4
1052:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < 8; count++)
 2998              		.loc 1 1052 0 discriminator 2
 2999 0128 202E     		cmp	r6, #32
 3000 012a F9D1     		bne	.L208
1056:lib/ff/sdio_stm32f1.c ****         tempbuff += 8;
 3001              		.loc 1 1056 0
 3002 012c 2035     		adds	r5, r5, #32
 3003              	.LVL368:
 3004 012e EBE7     		b	.L242
 3005              	.L247:
1060:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
 3006              		.loc 1 1060 0
 3007 0130 0820     		movs	r0, #8
 3008 0132 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3009              	.LVL369:
 3010 0136 20B1     		cbz	r0, .L210
1062:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
 3011              		.loc 1 1062 0
 3012 0138 0820     		movs	r0, #8
 3013 013a FFF7FEFF 		bl	SDIO_ClearFlag
 3014              	.LVL370:
1064:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 3015              		.loc 1 1064 0
 3016 013e 0424     		movs	r4, #4
 3017 0140 59E0     		b	.L200
 3018              	.LVL371:
 3019              	.L210:
1066:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
 3020              		.loc 1 1066 0
 3021 0142 0220     		movs	r0, #2
 3022 0144 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3023              	.LVL372:
 3024 0148 20B1     		cbz	r0, .L211
1068:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
 3025              		.loc 1 1068 0
 3026 014a 0220     		movs	r0, #2
 3027 014c FFF7FEFF 		bl	SDIO_ClearFlag
 3028              	.LVL373:
1070:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 3029              		.loc 1 1070 0
 3030 0150 0224     		movs	r4, #2
 3031 0152 50E0     		b	.L200
 3032              	.LVL374:
 3033              	.L211:
1072:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
 3034              		.loc 1 1072 0
 3035 0154 2020     		movs	r0, #32
 3036 0156 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3037              	.LVL375:
 3038 015a 20B1     		cbz	r0, .L212
1074:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
 3039              		.loc 1 1074 0
 3040 015c 2020     		movs	r0, #32
 3041 015e FFF7FEFF 		bl	SDIO_ClearFlag
 3042              	.LVL376:
1076:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 3043              		.loc 1 1076 0
 3044 0162 0624     		movs	r4, #6
 3045 0164 47E0     		b	.L200
 3046              	.LVL377:
 3047              	.L212:
1078:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
 3048              		.loc 1 1078 0
 3049 0166 4FF40070 		mov	r0, #512
 3050 016a FFF7FEFF 		bl	SDIO_GetFlagStatus
 3051              	.LVL378:
 3052 016e 28B1     		cbz	r0, .L243
1080:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_STBITERR);
 3053              		.loc 1 1080 0
 3054 0170 4FF40070 		mov	r0, #512
 3055 0174 FFF7FEFF 		bl	SDIO_ClearFlag
 3056              	.LVL379:
1082:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 3057              		.loc 1 1082 0
 3058 0178 0724     		movs	r4, #7
 3059 017a 3CE0     		b	.L200
 3060              	.LVL380:
 3061              	.L243:
1084:lib/ff/sdio_stm32f1.c ****     while (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
 3062              		.loc 1 1084 0 discriminator 1
 3063 017c 4FF40010 		mov	r0, #2097152
 3064 0180 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3065              	.LVL381:
 3066 0184 20B1     		cbz	r0, .L248
 3067              	.L215:
1086:lib/ff/sdio_stm32f1.c ****       *tempbuff = SDIO_ReadData();
 3068              		.loc 1 1086 0
 3069 0186 FFF7FEFF 		bl	SDIO_ReadData
 3070              	.LVL382:
 3071 018a 45F8040B 		str	r0, [r5], #4
 3072              	.LVL383:
 3073 018e F5E7     		b	.L243
 3074              	.LVL384:
 3075              	.L248:
1091:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 3076              		.loc 1 1091 0
 3077 0190 40F2FF50 		movw	r0, #1535
 3078 0194 FFF7FEFF 		bl	SDIO_ClearFlag
 3079              	.LVL385:
 3080 0198 2DE0     		b	.L200
 3081              	.LVL386:
 3082              	.L205:
1093:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_INTERRUPT_MODE)
 3083              		.loc 1 1093 0
 3084 019a 012A     		cmp	r2, #1
 3085 019c 0CD1     		bne	.L216
1095:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_IT
 3086              		.loc 1 1095 0
 3087 019e 48F22A30 		movw	r0, #33578
 3088 01a2 3946     		mov	r1, r7
 3089 01a4 FFF7FEFF 		bl	SDIO_ITConfig
 3090              	.LVL387:
 3091              	.L218:
1096:lib/ff/sdio_stm32f1.c ****     while ((TransferEnd == 0) && (TransferError == SD_OK))
 3092              		.loc 1 1096 0 discriminator 1
 3093 01a8 154B     		ldr	r3, .L249+4
 3094 01aa 1968     		ldr	r1, [r3, #0]
 3095 01ac 134B     		ldr	r3, .L249
 3096 01ae D9B9     		cbnz	r1, .L221
1096:lib/ff/sdio_stm32f1.c ****     while ((TransferEnd == 0) && (TransferError == SD_OK))
 3097              		.loc 1 1096 0 is_stmt 0 discriminator 2
 3098 01b0 1878     		ldrb	r0, [r3, #0]	@ zero_extendqisi2
 3099 01b2 2A28     		cmp	r0, #42
 3100 01b4 F8D0     		beq	.L218
 3101 01b6 17E0     		b	.L221
 3102              	.L216:
1103:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_DMA_MODE)
 3103              		.loc 1 1103 0 is_stmt 1
 3104 01b8 EAB9     		cbnz	r2, .L200
1105:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_IT
 3105              		.loc 1 1105 0
 3106 01ba 40F22A30 		movw	r0, #810
 3107 01be 3946     		mov	r1, r7
 3108 01c0 FFF7FEFF 		bl	SDIO_ITConfig
 3109              	.LVL388:
1106:lib/ff/sdio_stm32f1.c ****     SDIO_DMACmd(ENABLE);
 3110              		.loc 1 1106 0
 3111 01c4 3846     		mov	r0, r7
 3112 01c6 FFF7FEFF 		bl	SDIO_DMACmd
 3113              	.LVL389:
1107:lib/ff/sdio_stm32f1.c ****     SD_LowLevel_DMA_RxConfig((uint32_t *)readbuff, BlockSize);
 3114              		.loc 1 1107 0
 3115 01ca 4046     		mov	r0, r8
 3116 01cc 3146     		mov	r1, r6
 3117 01ce FFF7FEFF 		bl	SD_LowLevel_DMA_RxConfig
 3118              	.LVL390:
 3119              	.L222:
 3120              	.LBB46:
 3121              	.LBB47:
3137:lib/ff/sdio_stm32f1.c ****   return (uint32_t)DMA_GetFlagStatus(DMA2_FLAG_TC4);
 3122              		.loc 1 3137 0 discriminator 1
 3123 01d2 1548     		ldr	r0, .L249+44
 3124 01d4 FFF7FEFF 		bl	DMA_GetFlagStatus
 3125              	.LVL391:
 3126 01d8 084B     		ldr	r3, .L249
 3127              	.LBE47:
 3128              	.LBE46:
1108:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
 3129              		.loc 1 1108 0 discriminator 1
 3130 01da 28B9     		cbnz	r0, .L221
1108:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
 3131              		.loc 1 1108 0 is_stmt 0 discriminator 2
 3132 01dc 0849     		ldr	r1, .L249+4
 3133 01de 0868     		ldr	r0, [r1, #0]
 3134 01e0 10B9     		cbnz	r0, .L221
1108:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
 3135              		.loc 1 1108 0 discriminator 1
 3136 01e2 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 3137 01e4 2A2A     		cmp	r2, #42
 3138 01e6 F4D0     		beq	.L222
 3139              	.L221:
1110:lib/ff/sdio_stm32f1.c ****     if (TransferError != SD_OK)
 3140              		.loc 1 1110 0 is_stmt 1
 3141 01e8 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 3142 01ea 2A2A     		cmp	r2, #42
 3143 01ec 03D0     		beq	.L200
1112:lib/ff/sdio_stm32f1.c ****       return(TransferError);
 3144              		.loc 1 1112 0
 3145 01ee 034C     		ldr	r4, .L249
 3146              	.LVL392:
 3147 01f0 2478     		ldrb	r4, [r4, #0]	@ zero_extendqisi2
 3148 01f2 00E0     		b	.L200
 3149              	.LVL393:
 3150              	.L223:
 985:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 3151              		.loc 1 985 0
 3152 01f4 0E24     		movs	r4, #14
 3153              	.LVL394:
 3154              	.L200:
1116:lib/ff/sdio_stm32f1.c **** }
 3155              		.loc 1 1116 0
 3156 01f6 2046     		mov	r0, r4
 3157 01f8 BDE8FE8F 		pop	{r1, r2, r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 3158              	.L250:
 3159              		.align	2
 3160              	.L249:
 3161 01fc 00000000 		.word	.LANCHOR9
 3162 0200 00000000 		.word	.LANCHOR10
 3163 0204 00000000 		.word	.LANCHOR11
 3164 0208 00000000 		.word	.LANCHOR2
 3165 020c FFFF0F00 		.word	1048575
 3166 0210 00000000 		.word	.LANCHOR4
 3167 0214 00000000 		.word	.LANCHOR0
 3168 0218 00000000 		.word	.LANCHOR12
 3169 021c 00000000 		.word	.LANCHOR13
 3170 0220 00000000 		.word	.LANCHOR7
 3171 0224 00800140 		.word	1073840128
 3172 0228 00200010 		.word	268443648
 3173              		.cfi_endproc
 3174              	.LFE68:
 3176              		.section	.text.SD_ReadMultiBlocks,"ax",%progbits
 3177              		.align	1
 3178              		.global	SD_ReadMultiBlocks
 3179              		.thumb
 3180              		.thumb_func
 3182              	SD_ReadMultiBlocks:
 3183              	.LFB69:
1130:lib/ff/sdio_stm32f1.c **** {
 3184              		.loc 1 1130 0
 3185              		.cfi_startproc
 3186              		@ args = 0, pretend = 0, frame = 8
 3187              		@ frame_needed = 0, uses_anonymous_args = 0
 3188              	.LVL395:
 3189 0000 2DE9F74F 		push	{r0, r1, r2, r4, r5, r6, r7, r8, r9, sl, fp, lr}
 3190              	.LCFI18:
 3191              		.cfi_def_cfa_offset 48
 3192              		.cfi_offset 0, -48
 3193              		.cfi_offset 1, -44
 3194              		.cfi_offset 2, -40
 3195              		.cfi_offset 4, -36
 3196              		.cfi_offset 5, -32
 3197              		.cfi_offset 6, -28
 3198              		.cfi_offset 7, -24
 3199              		.cfi_offset 8, -20
 3200              		.cfi_offset 9, -16
 3201              		.cfi_offset 10, -12
 3202              		.cfi_offset 11, -8
 3203              		.cfi_offset 14, -4
 3204 0004 8846     		mov	r8, r1
 3205 0006 9346     		mov	fp, r2
 3206 0008 9A46     		mov	sl, r3
 3207              	.LVL396:
1135:lib/ff/sdio_stm32f1.c ****   if (NULL == readbuff)
 3208              		.loc 1 1135 0
 3209 000a 0746     		mov	r7, r0
 3210 000c 08B9     		cbnz	r0, .L252
 3211              	.LVL397:
 3212              	.L255:
1138:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 3213              		.loc 1 1138 0
 3214 000e 2624     		movs	r4, #38
 3215 0010 24E1     		b	.L253
 3216              	.LVL398:
 3217              	.L252:
1141:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
 3218              		.loc 1 1141 0
 3219 0012 2A21     		movs	r1, #42
 3220              	.LVL399:
 3221 0014 934B     		ldr	r3, .L315
 3222              	.LVL400:
 3223 0016 1970     		strb	r1, [r3, #0]
1142:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
 3224              		.loc 1 1142 0
 3225 0018 0024     		movs	r4, #0
 3226 001a 9348     		ldr	r0, .L315+4
 3227              	.LVL401:
 3228 001c 0460     		str	r4, [r0, #0]
1143:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
 3229              		.loc 1 1143 0
 3230 001e 934A     		ldr	r2, .L315+8
 3231              	.LVL402:
 3232 0020 1460     		str	r4, [r2, #0]
1146:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 3233              		.loc 1 1146 0
 3234 0022 9348     		ldr	r0, .L315+12
 3235 0024 934B     		ldr	r3, .L315+16
1147:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
 3236              		.loc 1 1147 0
 3237 0026 80E81800 		stmia	r0, {r3, r4}
1148:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
 3238              		.loc 1 1148 0
 3239 002a 8460     		str	r4, [r0, #8]
1149:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 3240              		.loc 1 1149 0
 3241 002c C460     		str	r4, [r0, #12]
1150:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 3242              		.loc 1 1150 0
 3243 002e 0461     		str	r4, [r0, #16]
1151:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
 3244              		.loc 1 1151 0
 3245 0030 4461     		str	r4, [r0, #20]
1152:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 3246              		.loc 1 1152 0
 3247 0032 FFF7FEFF 		bl	SDIO_DataConfig
 3248              	.LVL403:
1153:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
 3249              		.loc 1 1153 0
 3250 0036 2046     		mov	r0, r4
 3251 0038 FFF7FEFF 		bl	SDIO_DMACmd
 3252              	.LVL404:
1155:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 3253              		.loc 1 1155 0
 3254 003c 2046     		mov	r0, r4
 3255 003e FFF7FEFF 		bl	SDIO_GetResponse
 3256              	.LVL405:
 3257 0042 8201     		lsls	r2, r0, #6
 3258 0044 00F10781 		bmi	.L279
1161:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 3259              		.loc 1 1161 0
 3260 0048 8B4C     		ldr	r4, .L315+20
 3261 004a 2168     		ldr	r1, [r4, #0]
 3262 004c 0229     		cmp	r1, #2
 3263              	.LVL406:
1164:lib/ff/sdio_stm32f1.c ****     ReadAddr /= 512;
 3264              		.loc 1 1164 0
 3265 004e 04BF     		itt	eq
 3266 0050 4FEA5828 		lsreq	r8, r8, #9
 3267              	.LVL407:
1163:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
 3268              		.loc 1 1163 0
 3269 0054 4FF4007B 		moveq	fp, #512
 3270              	.LVL408:
1167:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && (0 == (BlockSize & (BlockSize - 1))))
 3271              		.loc 1 1167 0
 3272 0058 0BF1FF3C 		add	ip, fp, #-1
 3273 005c 1FFA8CF3 		uxth	r3, ip
 3274 0060 B3F5006F 		cmp	r3, #2048
 3275 0064 D3D2     		bcs	.L255
1167:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && (0 == (BlockSize & (BlockSize - 1))))
 3276              		.loc 1 1167 0 is_stmt 0 discriminator 1
 3277 0066 1CEA0B0E 		ands	lr, ip, fp
 3278 006a D0D1     		bne	.L255
1167:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && (0 == (BlockSize & (BlockSize - 1))))
 3279              		.loc 1 1167 0
 3280 006c 5E46     		mov	r6, fp
 3281              	.L256:
 3282              	.LVL409:
 3283              	.LBB52:
 3284              	.LBB53:
3046:lib/ff/sdio_stm32f1.c ****   while (NumberOfBytes != 1)
 3285              		.loc 1 3046 0 is_stmt 1
 3286 006e 012E     		cmp	r6, #1
 3287 0070 06D0     		beq	.L312
 3288              	.L257:
3048:lib/ff/sdio_stm32f1.c ****     NumberOfBytes >>= 1;
 3289              		.loc 1 3048 0
 3290 0072 C6F34F06 		ubfx	r6, r6, #1, #16
 3291              	.LVL410:
3049:lib/ff/sdio_stm32f1.c ****     count++;
 3292              		.loc 1 3049 0
 3293 0076 0EF10105 		add	r5, lr, #1
 3294 007a 5FFA85FE 		uxtb	lr, r5
 3295              	.LVL411:
 3296 007e F6E7     		b	.L256
 3297              	.LVL412:
 3298              	.L312:
 3299              	.LBE53:
 3300              	.LBE52:
1172:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
 3301              		.loc 1 1172 0
 3302 0080 7E4D     		ldr	r5, .L315+24
 3303 0082 C5F800B0 		str	fp, [r5, #0]
1173:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
 3304              		.loc 1 1173 0
 3305 0086 1024     		movs	r4, #16
 3306 0088 6C60     		str	r4, [r5, #4]
1174:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3307              		.loc 1 1174 0
 3308 008a 4020     		movs	r0, #64
 3309 008c A860     		str	r0, [r5, #8]
1175:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3310              		.loc 1 1175 0
 3311 008e 4FF00009 		mov	r9, #0
 3312 0092 C5F80C90 		str	r9, [r5, #12]
1176:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3313              		.loc 1 1176 0
 3314 0096 4FF48062 		mov	r2, #1024
 3315 009a 2A61     		str	r2, [r5, #16]
1177:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 3316              		.loc 1 1177 0
 3317 009c 2846     		mov	r0, r5
 3318 009e CDF804E0 		str	lr, [sp, #4]
 3319 00a2 FFF7FEFF 		bl	SDIO_SendCommand
 3320              	.LVL413:
1179:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 3321              		.loc 1 1179 0
 3322 00a6 2046     		mov	r0, r4
 3323 00a8 FFF7FEFF 		bl	CmdResp1Error
 3324              	.LVL414:
 3325 00ac 0446     		mov	r4, r0
 3326              	.LVL415:
1181:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 3327              		.loc 1 1181 0
 3328 00ae 2A28     		cmp	r0, #42
 3329 00b0 DDF804C0 		ldr	ip, [sp, #4]
 3330 00b4 40F0D280 		bne	.L253
1192:lib/ff/sdio_stm32f1.c ****   if (NumberOfBlocks > 1)
 3331              		.loc 1 1192 0
 3332 00b8 BAF1010F 		cmp	sl, #1
 3333 00bc 40F2CE80 		bls	.L253
1195:lib/ff/sdio_stm32f1.c ****     if (NumberOfBlocks * BlockSize > SD_MAX_DATA_LENGTH)
 3334              		.loc 1 1195 0
 3335 00c0 0AFB0BFA 		mul	sl, sl, fp
 3336              	.LVL416:
 3337 00c4 BAF1007F 		cmp	sl, #33554432
 3338 00c8 A1D2     		bcs	.L255
1201:lib/ff/sdio_stm32f1.c ****     TotalNumberOfBytes = NumberOfBlocks * BlockSize;
 3339              		.loc 1 1201 0
 3340 00ca 6849     		ldr	r1, .L315+8
 3341 00cc C1F800A0 		str	sl, [r1, #0]
1202:lib/ff/sdio_stm32f1.c ****     StopCondition = 1;
 3342              		.loc 1 1202 0
 3343 00d0 6B4B     		ldr	r3, .L315+28
 3344 00d2 1E60     		str	r6, [r3, #0]
1203:lib/ff/sdio_stm32f1.c ****     DestBuffer = (uint32_t *)readbuff;
 3345              		.loc 1 1203 0
 3346 00d4 6B48     		ldr	r0, .L315+32
 3347              	.LVL417:
 3348 00d6 0760     		str	r7, [r0, #0]
1205:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 3349              		.loc 1 1205 0
 3350 00d8 6548     		ldr	r0, .L315+12
 3351 00da 664A     		ldr	r2, .L315+16
1206:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataLength = NumberOfBlocks * BlockSize;
 3352              		.loc 1 1206 0
 3353 00dc 80E80404 		stmia	r0, {r2, sl}
1207:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
 3354              		.loc 1 1207 0
 3355 00e0 4FEA0C12 		lsl	r2, ip, #4
 3356 00e4 8260     		str	r2, [r0, #8]
1208:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
 3357              		.loc 1 1208 0
 3358 00e6 0221     		movs	r1, #2
 3359 00e8 C160     		str	r1, [r0, #12]
1209:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 3360              		.loc 1 1209 0
 3361 00ea C0F81090 		str	r9, [r0, #16]
1210:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
 3362              		.loc 1 1210 0
 3363 00ee 4661     		str	r6, [r0, #20]
1211:lib/ff/sdio_stm32f1.c ****     SDIO_DataConfig(&SDIO_DataInitStructure);
 3364              		.loc 1 1211 0
 3365 00f0 FFF7FEFF 		bl	SDIO_DataConfig
 3366              	.LVL418:
1214:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)ReadAddr;
 3367              		.loc 1 1214 0
 3368 00f4 C5F80080 		str	r8, [r5, #0]
1215:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_READ_MULT_BLOCK;
 3369              		.loc 1 1215 0
 3370 00f8 4FF01208 		mov	r8, #18
 3371              	.LVL419:
 3372 00fc C5F80480 		str	r8, [r5, #4]
1216:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3373              		.loc 1 1216 0
 3374 0100 4023     		movs	r3, #64
 3375 0102 AB60     		str	r3, [r5, #8]
1217:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3376              		.loc 1 1217 0
 3377 0104 C5F80C90 		str	r9, [r5, #12]
1218:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3378              		.loc 1 1218 0
 3379 0108 4FF48060 		mov	r0, #1024
 3380 010c 2861     		str	r0, [r5, #16]
1219:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 3381              		.loc 1 1219 0
 3382 010e 2846     		mov	r0, r5
 3383 0110 FFF7FEFF 		bl	SDIO_SendCommand
 3384              	.LVL420:
1221:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_READ_MULT_BLOCK);
 3385              		.loc 1 1221 0
 3386 0114 4046     		mov	r0, r8
 3387 0116 FFF7FEFF 		bl	CmdResp1Error
 3388              	.LVL421:
1223:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 3389              		.loc 1 1223 0
 3390 011a 2A28     		cmp	r0, #42
 3391 011c 40F09D80 		bne	.L281
1228:lib/ff/sdio_stm32f1.c ****     if (DeviceMode == SD_POLLING_MODE)
 3392              		.loc 1 1228 0
 3393 0120 594A     		ldr	r2, .L315+36
 3394 0122 1168     		ldr	r1, [r2, #0]
 3395 0124 0229     		cmp	r1, #2
 3396 0126 69D1     		bne	.L259
 3397              	.LVL422:
 3398              	.L308:
1231:lib/ff/sdio_stm32f1.c ****       while (!(SDIO->STA &(SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DATAEND | SDIO_FLAG_D
 3399              		.loc 1 1231 0 discriminator 1
 3400 0128 584B     		ldr	r3, .L315+40
 3401 012a 586B     		ldr	r0, [r3, #52]
 3402 012c 40F22A34 		movw	r4, #810
 3403 0130 0440     		ands	r4, r4, r0
 3404 0132 6CB9     		cbnz	r4, .L313
 3405              	.L263:
1233:lib/ff/sdio_stm32f1.c ****         if (SDIO_GetFlagStatus(SDIO_FLAG_RXFIFOHF) != RESET)
 3406              		.loc 1 1233 0
 3407 0134 4FF40040 		mov	r0, #32768
 3408 0138 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3409              	.LVL423:
 3410 013c 0028     		cmp	r0, #0
 3411 013e F3D0     		beq	.L308
 3412              	.L262:
1237:lib/ff/sdio_stm32f1.c ****             *(tempbuff + count) = SDIO_ReadData();
 3413              		.loc 1 1237 0 discriminator 2
 3414 0140 FFF7FEFF 		bl	SDIO_ReadData
 3415              	.LVL424:
 3416 0144 3851     		str	r0, [r7, r4]
 3417 0146 0434     		adds	r4, r4, #4
1235:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < SD_HALFFIFO; count++)
 3418              		.loc 1 1235 0 discriminator 2
 3419 0148 202C     		cmp	r4, #32
 3420 014a F9D1     		bne	.L262
1239:lib/ff/sdio_stm32f1.c ****           tempbuff += SD_HALFFIFO;
 3421              		.loc 1 1239 0
 3422 014c 2037     		adds	r7, r7, #32
 3423              	.LVL425:
 3424 014e EBE7     		b	.L308
 3425              	.L313:
1243:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
 3426              		.loc 1 1243 0
 3427 0150 0820     		movs	r0, #8
 3428 0152 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3429              	.LVL426:
 3430 0156 20B1     		cbz	r0, .L264
1245:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
 3431              		.loc 1 1245 0
 3432 0158 0820     		movs	r0, #8
 3433 015a FFF7FEFF 		bl	SDIO_ClearFlag
 3434              	.LVL427:
1247:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 3435              		.loc 1 1247 0
 3436 015e 0424     		movs	r4, #4
 3437 0160 7CE0     		b	.L253
 3438              	.LVL428:
 3439              	.L264:
1249:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
 3440              		.loc 1 1249 0
 3441 0162 0220     		movs	r0, #2
 3442 0164 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3443              	.LVL429:
 3444 0168 20B1     		cbz	r0, .L265
1251:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
 3445              		.loc 1 1251 0
 3446 016a 0220     		movs	r0, #2
 3447 016c FFF7FEFF 		bl	SDIO_ClearFlag
 3448              	.LVL430:
1253:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 3449              		.loc 1 1253 0
 3450 0170 0224     		movs	r4, #2
 3451 0172 73E0     		b	.L253
 3452              	.LVL431:
 3453              	.L265:
1255:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
 3454              		.loc 1 1255 0
 3455 0174 2020     		movs	r0, #32
 3456 0176 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3457              	.LVL432:
 3458 017a 20B1     		cbz	r0, .L266
1257:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
 3459              		.loc 1 1257 0
 3460 017c 2020     		movs	r0, #32
 3461 017e FFF7FEFF 		bl	SDIO_ClearFlag
 3462              	.LVL433:
1259:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 3463              		.loc 1 1259 0
 3464 0182 0624     		movs	r4, #6
 3465 0184 6AE0     		b	.L253
 3466              	.LVL434:
 3467              	.L266:
1261:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
 3468              		.loc 1 1261 0
 3469 0186 4FF40070 		mov	r0, #512
 3470 018a FFF7FEFF 		bl	SDIO_GetFlagStatus
 3471              	.LVL435:
 3472 018e 28B1     		cbz	r0, .L309
1263:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_STBITERR);
 3473              		.loc 1 1263 0
 3474 0190 4FF40070 		mov	r0, #512
 3475 0194 FFF7FEFF 		bl	SDIO_ClearFlag
 3476              	.LVL436:
1265:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 3477              		.loc 1 1265 0
 3478 0198 0724     		movs	r4, #7
 3479 019a 5FE0     		b	.L253
 3480              	.LVL437:
 3481              	.L309:
1267:lib/ff/sdio_stm32f1.c ****       while (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
 3482              		.loc 1 1267 0 discriminator 1
 3483 019c 4FF40010 		mov	r0, #2097152
 3484 01a0 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3485              	.LVL438:
 3486 01a4 20B1     		cbz	r0, .L314
 3487              	.L269:
1269:lib/ff/sdio_stm32f1.c ****         *tempbuff = SDIO_ReadData();
 3488              		.loc 1 1269 0
 3489 01a6 FFF7FEFF 		bl	SDIO_ReadData
 3490              	.LVL439:
 3491 01aa 47F8040B 		str	r0, [r7], #4
 3492              	.LVL440:
 3493 01ae F5E7     		b	.L309
 3494              	.LVL441:
 3495              	.L314:
1273:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DATAEND) != RESET)
 3496              		.loc 1 1273 0
 3497 01b0 4FF48070 		mov	r0, #256
 3498 01b4 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3499              	.LVL442:
 3500 01b8 28B9     		cbnz	r0, .L270
 3501              	.L272:
 3502              	.LVL443:
1295:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 3503              		.loc 1 1295 0
 3504 01ba 40F2FF50 		movw	r0, #1535
 3505 01be FFF7FEFF 		bl	SDIO_ClearFlag
 3506              	.LVL444:
 3507 01c2 2A24     		movs	r4, #42
 3508 01c4 4AE0     		b	.L253
 3509              	.LVL445:
 3510              	.L270:
1276:lib/ff/sdio_stm32f1.c ****         if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_HIGH_CAPACITY_SD_CARD == CardType
 3511              		.loc 1 1276 0
 3512 01c6 2C4A     		ldr	r2, .L315+20
 3513 01c8 1168     		ldr	r1, [r2, #0]
 3514 01ca 19B1     		cbz	r1, .L271
1276:lib/ff/sdio_stm32f1.c ****         if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_HIGH_CAPACITY_SD_CARD == CardType
 3515              		.loc 1 1276 0 is_stmt 0 discriminator 1
 3516 01cc 0229     		cmp	r1, #2
 3517 01ce 01D0     		beq	.L271
 3518 01d0 0129     		cmp	r1, #1
 3519 01d2 F2D1     		bne	.L272
 3520              	.L271:
1279:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 3521              		.loc 1 1279 0 is_stmt 1
 3522 01d4 2948     		ldr	r0, .L315+24
1280:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_STOP_TRANSMISSION;
 3523              		.loc 1 1280 0
 3524 01d6 0022     		movs	r2, #0
 3525 01d8 0C24     		movs	r4, #12
 3526 01da 80E81400 		stmia	r0, {r2, r4}
1281:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3527              		.loc 1 1281 0
 3528 01de 4023     		movs	r3, #64
 3529 01e0 8360     		str	r3, [r0, #8]
1282:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3530              		.loc 1 1282 0
 3531 01e2 C260     		str	r2, [r0, #12]
1283:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3532              		.loc 1 1283 0
 3533 01e4 4FF48062 		mov	r2, #1024
 3534 01e8 0261     		str	r2, [r0, #16]
1284:lib/ff/sdio_stm32f1.c ****           SDIO_SendCommand(&SDIO_CmdInitStructure);
 3535              		.loc 1 1284 0
 3536 01ea FFF7FEFF 		bl	SDIO_SendCommand
 3537              	.LVL446:
1286:lib/ff/sdio_stm32f1.c ****           errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 3538              		.loc 1 1286 0
 3539 01ee 2046     		mov	r0, r4
 3540 01f0 FFF7FEFF 		bl	CmdResp1Error
 3541              	.LVL447:
 3542 01f4 0446     		mov	r4, r0
 3543              	.LVL448:
1288:lib/ff/sdio_stm32f1.c ****           if (errorstatus != SD_OK)
 3544              		.loc 1 1288 0
 3545 01f6 2A28     		cmp	r0, #42
 3546 01f8 30D1     		bne	.L253
 3547 01fa DEE7     		b	.L272
 3548              	.LVL449:
 3549              	.L259:
1297:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_INTERRUPT_MODE)
 3550              		.loc 1 1297 0
 3551 01fc 0129     		cmp	r1, #1
 3552 01fe 0CD1     		bne	.L273
1299:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_
 3553              		.loc 1 1299 0
 3554 0200 48F22A30 		movw	r0, #33578
 3555              	.LVL450:
 3556 0204 3146     		mov	r1, r6
 3557 0206 FFF7FEFF 		bl	SDIO_ITConfig
 3558              	.LVL451:
 3559              	.L275:
1300:lib/ff/sdio_stm32f1.c ****       while ((TransferEnd == 0) && (TransferError == SD_OK))
 3560              		.loc 1 1300 0 discriminator 1
 3561 020a 174B     		ldr	r3, .L315+4
 3562 020c 1868     		ldr	r0, [r3, #0]
 3563 020e 154B     		ldr	r3, .L315
 3564 0210 D8B9     		cbnz	r0, .L277
1300:lib/ff/sdio_stm32f1.c ****       while ((TransferEnd == 0) && (TransferError == SD_OK))
 3565              		.loc 1 1300 0 is_stmt 0 discriminator 2
 3566 0212 1A78     		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 3567 0214 2A2A     		cmp	r2, #42
 3568 0216 F8D0     		beq	.L275
 3569 0218 17E0     		b	.L277
 3570              	.LVL452:
 3571              	.L273:
1307:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_DMA_MODE)
 3572              		.loc 1 1307 0 is_stmt 1
 3573 021a F9B9     		cbnz	r1, .L253
1309:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_RXOVERR | SDIO_
 3574              		.loc 1 1309 0
 3575 021c 40F22A30 		movw	r0, #810
 3576              	.LVL453:
 3577 0220 3146     		mov	r1, r6
 3578 0222 FFF7FEFF 		bl	SDIO_ITConfig
 3579              	.LVL454:
1310:lib/ff/sdio_stm32f1.c ****       SDIO_DMACmd(ENABLE);
 3580              		.loc 1 1310 0
 3581 0226 3046     		mov	r0, r6
 3582 0228 FFF7FEFF 		bl	SDIO_DMACmd
 3583              	.LVL455:
1311:lib/ff/sdio_stm32f1.c ****       SD_LowLevel_DMA_RxConfig((uint32_t *)readbuff, (NumberOfBlocks * BlockSize));
 3584              		.loc 1 1311 0
 3585 022c 3846     		mov	r0, r7
 3586 022e 5146     		mov	r1, sl
 3587 0230 FFF7FEFF 		bl	SD_LowLevel_DMA_RxConfig
 3588              	.LVL456:
 3589              	.L278:
 3590              	.LBB54:
 3591              	.LBB55:
3137:lib/ff/sdio_stm32f1.c ****   return (uint32_t)DMA_GetFlagStatus(DMA2_FLAG_TC4);
 3592              		.loc 1 3137 0 discriminator 1
 3593 0234 1648     		ldr	r0, .L315+44
 3594 0236 FFF7FEFF 		bl	DMA_GetFlagStatus
 3595              	.LVL457:
 3596 023a 0A4B     		ldr	r3, .L315
 3597              	.LBE55:
 3598              	.LBE54:
1312:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
 3599              		.loc 1 1312 0 discriminator 1
 3600 023c 28B9     		cbnz	r0, .L277
1312:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
 3601              		.loc 1 1312 0 is_stmt 0 discriminator 2
 3602 023e 0A48     		ldr	r0, .L315+4
 3603 0240 0268     		ldr	r2, [r0, #0]
 3604 0242 12B9     		cbnz	r2, .L277
1312:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
 3605              		.loc 1 1312 0 discriminator 1
 3606 0244 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 3607 0246 2A29     		cmp	r1, #42
 3608 0248 F4D0     		beq	.L278
 3609              	.L277:
1314:lib/ff/sdio_stm32f1.c ****       if (TransferError != SD_OK)
 3610              		.loc 1 1314 0 is_stmt 1
 3611 024a 1978     		ldrb	r1, [r3, #0]	@ zero_extendqisi2
 3612 024c 2A29     		cmp	r1, #42
 3613 024e 05D0     		beq	.L253
1316:lib/ff/sdio_stm32f1.c ****         return(TransferError);
 3614              		.loc 1 1316 0
 3615 0250 044C     		ldr	r4, .L315
 3616 0252 2478     		ldrb	r4, [r4, #0]	@ zero_extendqisi2
 3617 0254 02E0     		b	.L253
 3618              	.LVL458:
 3619              	.L279:
1158:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 3620              		.loc 1 1158 0
 3621 0256 0E24     		movs	r4, #14
 3622 0258 00E0     		b	.L253
 3623              	.LVL459:
 3624              	.L281:
1223:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 3625              		.loc 1 1223 0
 3626 025a 0446     		mov	r4, r0
 3627              	.LVL460:
 3628              	.L253:
1321:lib/ff/sdio_stm32f1.c **** }
 3629              		.loc 1 1321 0
 3630 025c 2046     		mov	r0, r4
 3631 025e BDE8FE8F 		pop	{r1, r2, r3, r4, r5, r6, r7, r8, r9, sl, fp, pc}
 3632              	.L316:
 3633 0262 00BF     		.align	2
 3634              	.L315:
 3635 0264 00000000 		.word	.LANCHOR9
 3636 0268 00000000 		.word	.LANCHOR10
 3637 026c 00000000 		.word	.LANCHOR11
 3638 0270 00000000 		.word	.LANCHOR2
 3639 0274 FFFF0F00 		.word	1048575
 3640 0278 00000000 		.word	.LANCHOR4
 3641 027c 00000000 		.word	.LANCHOR0
 3642 0280 00000000 		.word	.LANCHOR12
 3643 0284 00000000 		.word	.LANCHOR13
 3644 0288 00000000 		.word	.LANCHOR7
 3645 028c 00800140 		.word	1073840128
 3646 0290 00200010 		.word	268443648
 3647              		.cfi_endproc
 3648              	.LFE69:
 3650              		.section	.text.SD_WriteBlock,"ax",%progbits
 3651              		.align	1
 3652              		.global	SD_WriteBlock
 3653              		.thumb
 3654              		.thumb_func
 3656              	SD_WriteBlock:
 3657              	.LFB70:
1334:lib/ff/sdio_stm32f1.c **** {
 3658              		.loc 1 1334 0
 3659              		.cfi_startproc
 3660              		@ args = 0, pretend = 0, frame = 16
 3661              		@ frame_needed = 0, uses_anonymous_args = 0
 3662              	.LVL461:
 3663 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 3664              	.LCFI19:
 3665              		.cfi_def_cfa_offset 36
 3666              		.cfi_offset 4, -36
 3667              		.cfi_offset 5, -32
 3668              		.cfi_offset 6, -28
 3669              		.cfi_offset 7, -24
 3670              		.cfi_offset 8, -20
 3671              		.cfi_offset 9, -16
 3672              		.cfi_offset 10, -12
 3673              		.cfi_offset 11, -8
 3674              		.cfi_offset 14, -4
 3675 0004 85B0     		sub	sp, sp, #20
 3676              	.LCFI20:
 3677              		.cfi_def_cfa_offset 56
 3678 0006 0F46     		mov	r7, r1
 3679 0008 1546     		mov	r5, r2
 3680              	.LVL462:
1336:lib/ff/sdio_stm32f1.c ****   uint8_t  power = 0, cardstate = 0;
 3681              		.loc 1 1336 0
 3682 000a 0024     		movs	r4, #0
 3683 000c 8DF80F40 		strb	r4, [sp, #15]
 3684              	.LVL463:
1341:lib/ff/sdio_stm32f1.c ****   if (writebuff == NULL)
 3685              		.loc 1 1341 0
 3686 0010 0646     		mov	r6, r0
 3687 0012 08B9     		cbnz	r0, .L318
 3688              	.LVL464:
 3689              	.L321:
1344:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 3690              		.loc 1 1344 0
 3691 0014 2620     		movs	r0, #38
 3692 0016 50E1     		b	.L319
 3693              	.LVL465:
 3694              	.L318:
1347:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
 3695              		.loc 1 1347 0
 3696 0018 2A22     		movs	r2, #42
 3697              	.LVL466:
 3698 001a A94B     		ldr	r3, .L383
 3699 001c 1A70     		strb	r2, [r3, #0]
1348:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
 3700              		.loc 1 1348 0
 3701 001e A948     		ldr	r0, .L383+4
 3702              	.LVL467:
 3703 0020 0460     		str	r4, [r0, #0]
1349:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
 3704              		.loc 1 1349 0
 3705 0022 A949     		ldr	r1, .L383+8
 3706              	.LVL468:
 3707 0024 0C60     		str	r4, [r1, #0]
1351:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 3708              		.loc 1 1351 0
 3709 0026 A948     		ldr	r0, .L383+12
 3710 0028 A94A     		ldr	r2, .L383+16
1352:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
 3711              		.loc 1 1352 0
 3712 002a 80E81400 		stmia	r0, {r2, r4}
1353:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
 3713              		.loc 1 1353 0
 3714 002e 8460     		str	r4, [r0, #8]
1354:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 3715              		.loc 1 1354 0
 3716 0030 C460     		str	r4, [r0, #12]
1355:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 3717              		.loc 1 1355 0
 3718 0032 0461     		str	r4, [r0, #16]
1356:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
 3719              		.loc 1 1356 0
 3720 0034 4461     		str	r4, [r0, #20]
1357:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 3721              		.loc 1 1357 0
 3722 0036 FFF7FEFF 		bl	SDIO_DataConfig
 3723              	.LVL469:
1358:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
 3724              		.loc 1 1358 0
 3725 003a 2046     		mov	r0, r4
 3726 003c FFF7FEFF 		bl	SDIO_DMACmd
 3727              	.LVL470:
1360:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 3728              		.loc 1 1360 0
 3729 0040 2046     		mov	r0, r4
 3730 0042 FFF7FEFF 		bl	SDIO_GetResponse
 3731              	.LVL471:
 3732 0046 8101     		lsls	r1, r0, #6
 3733 0048 00F13481 		bmi	.L348
1366:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 3734              		.loc 1 1366 0
 3735 004c A14A     		ldr	r2, .L383+20
 3736 004e 1368     		ldr	r3, [r2, #0]
 3737 0050 022B     		cmp	r3, #2
 3738 0052 02D1     		bne	.L320
 3739              	.LVL472:
1369:lib/ff/sdio_stm32f1.c ****     WriteAddr /= 512;
 3740              		.loc 1 1369 0
 3741 0054 7F0A     		lsrs	r7, r7, #9
 3742              	.LVL473:
1368:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
 3743              		.loc 1 1368 0
 3744 0056 4FF40075 		mov	r5, #512
 3745              	.LVL474:
 3746              	.L320:
1373:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 3747              		.loc 1 1373 0
 3748 005a 05F1FF38 		add	r8, r5, #-1
 3749 005e 1FFA88F0 		uxth	r0, r8
 3750 0062 B0F5006F 		cmp	r0, #2048
 3751 0066 D5D2     		bcs	.L321
1373:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 3752              		.loc 1 1373 0 is_stmt 0 discriminator 1
 3753 0068 18EA0508 		ands	r8, r8, r5
 3754 006c D2D1     		bne	.L321
1373:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 3755              		.loc 1 1373 0
 3756 006e 2C46     		mov	r4, r5
 3757              	.L322:
 3758              	.LVL475:
 3759              	.LBB60:
 3760              	.LBB61:
3046:lib/ff/sdio_stm32f1.c ****   while (NumberOfBytes != 1)
 3761              		.loc 1 3046 0 is_stmt 1
 3762 0070 012C     		cmp	r4, #1
 3763 0072 06D0     		beq	.L380
 3764              	.L323:
3048:lib/ff/sdio_stm32f1.c ****     NumberOfBytes >>= 1;
 3765              		.loc 1 3048 0
 3766 0074 C4F34F04 		ubfx	r4, r4, #1, #16
 3767              	.LVL476:
3049:lib/ff/sdio_stm32f1.c ****     count++;
 3768              		.loc 1 3049 0
 3769 0078 08F10108 		add	r8, r8, #1
 3770              	.LVL477:
 3771 007c 5FFA88F8 		uxtb	r8, r8
 3772              	.LVL478:
 3773 0080 F6E7     		b	.L322
 3774              	.L380:
 3775              	.LVL479:
 3776              	.LBE61:
 3777              	.LBE60:
1377:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
 3778              		.loc 1 1377 0
 3779 0082 954C     		ldr	r4, .L383+24
 3780              	.LVL480:
 3781 0084 2560     		str	r5, [r4, #0]
1378:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
 3782              		.loc 1 1378 0
 3783 0086 4FF0100A 		mov	sl, #16
 3784 008a C4F804A0 		str	sl, [r4, #4]
1379:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3785              		.loc 1 1379 0
 3786 008e 4021     		movs	r1, #64
 3787 0090 A160     		str	r1, [r4, #8]
1380:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3788              		.loc 1 1380 0
 3789 0092 4FF00009 		mov	r9, #0
 3790 0096 C4F80C90 		str	r9, [r4, #12]
1381:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3791              		.loc 1 1381 0
 3792 009a 4FF4806B 		mov	fp, #1024
 3793 009e C4F810B0 		str	fp, [r4, #16]
1382:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 3794              		.loc 1 1382 0
 3795 00a2 2046     		mov	r0, r4
 3796 00a4 0191     		str	r1, [sp, #4]
 3797 00a6 FFF7FEFF 		bl	SDIO_SendCommand
 3798              	.LVL481:
1384:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 3799              		.loc 1 1384 0
 3800 00aa 5046     		mov	r0, sl
 3801 00ac FFF7FEFF 		bl	CmdResp1Error
 3802              	.LVL482:
1386:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 3803              		.loc 1 1386 0
 3804 00b0 2A28     		cmp	r0, #42
 3805 00b2 019B     		ldr	r3, [sp, #4]
 3806 00b4 40F00181 		bne	.L319
1398:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
 3807              		.loc 1 1398 0
 3808 00b8 884A     		ldr	r2, .L383+28
 3809 00ba 1068     		ldr	r0, [r2, #0]
 3810              	.LVL483:
 3811 00bc 00FA0AF1 		lsl	r1, r0, sl
 3812 00c0 2160     		str	r1, [r4, #0]
1399:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
 3813              		.loc 1 1399 0
 3814 00c2 4FF00D0A 		mov	sl, #13
 3815 00c6 C4F804A0 		str	sl, [r4, #4]
1400:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3816              		.loc 1 1400 0
 3817 00ca A360     		str	r3, [r4, #8]
1401:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3818              		.loc 1 1401 0
 3819 00cc C4F80C90 		str	r9, [r4, #12]
1402:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3820              		.loc 1 1402 0
 3821 00d0 C4F810B0 		str	fp, [r4, #16]
1403:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 3822              		.loc 1 1403 0
 3823 00d4 2046     		mov	r0, r4
 3824 00d6 FFF7FEFF 		bl	SDIO_SendCommand
 3825              	.LVL484:
1405:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
 3826              		.loc 1 1405 0
 3827 00da 5046     		mov	r0, sl
 3828 00dc FFF7FEFF 		bl	CmdResp1Error
 3829              	.LVL485:
1407:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 3830              		.loc 1 1407 0
 3831 00e0 2A28     		cmp	r0, #42
 3832 00e2 40F0EA80 		bne	.L319
1412:lib/ff/sdio_stm32f1.c ****   cardstatus = SDIO_GetResponse(SDIO_RESP1);
 3833              		.loc 1 1412 0
 3834 00e6 4846     		mov	r0, r9
 3835              	.LVL486:
 3836 00e8 FFF7FEFF 		bl	SDIO_GetResponse
 3837              	.LVL487:
1414:lib/ff/sdio_stm32f1.c ****   timeout = SD_DATATIMEOUT;
 3838              		.loc 1 1414 0
 3839 00ec 784C     		ldr	r4, .L383+16
 3840              	.LVL488:
 3841              	.L324:
1416:lib/ff/sdio_stm32f1.c ****   while (((cardstatus & 0x00000100) == 0) && (timeout > 0))
 3842              		.loc 1 1416 0 discriminator 1
 3843 00ee 10F48079 		ands	r9, r0, #256
 3844 00f2 1FD1     		bne	.L325
1416:lib/ff/sdio_stm32f1.c ****   while (((cardstatus & 0x00000100) == 0) && (timeout > 0))
 3845              		.loc 1 1416 0 is_stmt 0 discriminator 2
 3846 00f4 002C     		cmp	r4, #0
 3847 00f6 00F0DF80 		beq	.L350
 3848              	.L326:
1418:lib/ff/sdio_stm32f1.c ****     timeout--;
 3849              		.loc 1 1418 0 is_stmt 1
 3850 00fa 013C     		subs	r4, r4, #1
 3851              	.LVL489:
1419:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
 3852              		.loc 1 1419 0
 3853 00fc 7648     		ldr	r0, .L383+24
 3854              	.LVL490:
 3855 00fe 774A     		ldr	r2, .L383+28
 3856 0100 1368     		ldr	r3, [r2, #0]
 3857 0102 1904     		lsls	r1, r3, #16
 3858 0104 0160     		str	r1, [r0, #0]
1420:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
 3859              		.loc 1 1420 0
 3860 0106 4FF00D0A 		mov	sl, #13
 3861 010a C0F804A0 		str	sl, [r0, #4]
1421:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3862              		.loc 1 1421 0
 3863 010e 4022     		movs	r2, #64
 3864 0110 8260     		str	r2, [r0, #8]
1422:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3865              		.loc 1 1422 0
 3866 0112 C0F80C90 		str	r9, [r0, #12]
1423:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3867              		.loc 1 1423 0
 3868 0116 4FF48063 		mov	r3, #1024
 3869 011a 0361     		str	r3, [r0, #16]
1424:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 3870              		.loc 1 1424 0
 3871 011c FFF7FEFF 		bl	SDIO_SendCommand
 3872              	.LVL491:
1426:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
 3873              		.loc 1 1426 0
 3874 0120 5046     		mov	r0, sl
 3875 0122 FFF7FEFF 		bl	CmdResp1Error
 3876              	.LVL492:
1428:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 3877              		.loc 1 1428 0
 3878 0126 2A28     		cmp	r0, #42
 3879 0128 40F0C780 		bne	.L319
1432:lib/ff/sdio_stm32f1.c ****     cardstatus = SDIO_GetResponse(SDIO_RESP1);
 3880              		.loc 1 1432 0
 3881 012c 4846     		mov	r0, r9
 3882              	.LVL493:
 3883 012e FFF7FEFF 		bl	SDIO_GetResponse
 3884              	.LVL494:
 3885 0132 DCE7     		b	.L324
 3886              	.L325:
1435:lib/ff/sdio_stm32f1.c ****   if (timeout == 0)
 3887              		.loc 1 1435 0
 3888 0134 002C     		cmp	r4, #0
 3889 0136 00F0BF80 		beq	.L350
1441:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = WriteAddr;
 3890              		.loc 1 1441 0
 3891 013a 6748     		ldr	r0, .L383+24
 3892              	.LVL495:
 3893 013c 0760     		str	r7, [r0, #0]
1442:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_WRITE_SINGLE_BLOCK;
 3894              		.loc 1 1442 0
 3895 013e 1824     		movs	r4, #24
 3896              	.LVL496:
 3897 0140 4460     		str	r4, [r0, #4]
1443:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 3898              		.loc 1 1443 0
 3899 0142 4027     		movs	r7, #64
 3900              	.LVL497:
 3901 0144 8760     		str	r7, [r0, #8]
1444:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 3902              		.loc 1 1444 0
 3903 0146 0027     		movs	r7, #0
 3904 0148 C760     		str	r7, [r0, #12]
1445:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 3905              		.loc 1 1445 0
 3906 014a 4FF48063 		mov	r3, #1024
 3907 014e 0361     		str	r3, [r0, #16]
1446:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 3908              		.loc 1 1446 0
 3909 0150 FFF7FEFF 		bl	SDIO_SendCommand
 3910              	.LVL498:
1448:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_WRITE_SINGLE_BLOCK);
 3911              		.loc 1 1448 0
 3912 0154 2046     		mov	r0, r4
 3913 0156 FFF7FEFF 		bl	CmdResp1Error
 3914              	.LVL499:
1450:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 3915              		.loc 1 1450 0
 3916 015a 2A28     		cmp	r0, #42
 3917 015c 40F0AD80 		bne	.L319
1455:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = BlockSize;
 3918              		.loc 1 1455 0
 3919 0160 594C     		ldr	r4, .L383+8
 3920 0162 2560     		str	r5, [r4, #0]
1456:lib/ff/sdio_stm32f1.c ****   StopCondition = 0;
 3921              		.loc 1 1456 0
 3922 0164 5E4A     		ldr	r2, .L383+32
 3923 0166 1760     		str	r7, [r2, #0]
1457:lib/ff/sdio_stm32f1.c ****   SrcBuffer = (uint32_t *)writebuff;
 3924              		.loc 1 1457 0
 3925 0168 5E48     		ldr	r0, .L383+36
 3926              	.LVL500:
 3927 016a 0660     		str	r6, [r0, #0]
1459:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 3928              		.loc 1 1459 0
 3929 016c 5748     		ldr	r0, .L383+12
 3930 016e 584A     		ldr	r2, .L383+16
1460:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = BlockSize;
 3931              		.loc 1 1460 0
 3932 0170 80E82400 		stmia	r0, {r2, r5}
1461:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
 3933              		.loc 1 1461 0
 3934 0174 4FEA0811 		lsl	r1, r8, #4
 3935 0178 8160     		str	r1, [r0, #8]
1462:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 3936              		.loc 1 1462 0
 3937 017a C760     		str	r7, [r0, #12]
1463:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 3938              		.loc 1 1463 0
 3939 017c 0761     		str	r7, [r0, #16]
1464:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
 3940              		.loc 1 1464 0
 3941 017e 0124     		movs	r4, #1
 3942 0180 4461     		str	r4, [r0, #20]
1465:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 3943              		.loc 1 1465 0
 3944 0182 FFF7FEFF 		bl	SDIO_DataConfig
 3945              	.LVL501:
1468:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_POLLING_MODE)
 3946              		.loc 1 1468 0
 3947 0186 584B     		ldr	r3, .L383+40
 3948 0188 1968     		ldr	r1, [r3, #0]
 3949 018a 0229     		cmp	r1, #2
 3950 018c 56D1     		bne	.L377
 3951 018e 3446     		mov	r4, r6
 3952 0190 3D46     		mov	r5, r7
 3953              	.LVL502:
 3954              	.L376:
1470:lib/ff/sdio_stm32f1.c ****     while (!(SDIO->STA & (SDIO_FLAG_DBCKEND | SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_D
 3955              		.loc 1 1470 0 discriminator 1
 3956 0192 564E     		ldr	r6, .L383+44
 3957 0194 726B     		ldr	r2, [r6, #52]
 3958 0196 40F21A66 		movw	r6, #1562
 3959 019a 1640     		ands	r6, r6, r2
 3960 019c 3EBB     		cbnz	r6, .L381
 3961              	.L336:
1472:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_TXFIFOHE) != RESET)
 3962              		.loc 1 1472 0
 3963 019e 4FF48040 		mov	r0, #16384
 3964 01a2 FFF7FEFF 		bl	SDIO_GetFlagStatus
 3965              	.LVL503:
 3966 01a6 0028     		cmp	r0, #0
 3967 01a8 F3D0     		beq	.L376
1474:lib/ff/sdio_stm32f1.c ****         if ((TotalNumberOfBytes - bytestransferred) < 32)
 3968              		.loc 1 1474 0
 3969 01aa 4748     		ldr	r0, .L383+8
 3970 01ac 0268     		ldr	r2, [r0, #0]
 3971 01ae 531B     		subs	r3, r2, r5
 3972 01b0 1F2B     		cmp	r3, #31
 3973 01b2 13D8     		bhi	.L330
1476:lib/ff/sdio_stm32f1.c ****           restwords = ((TotalNumberOfBytes - bytestransferred) % 4 == 0) ? ((TotalNumberOfBytes - b
 3974              		.loc 1 1476 0
 3975 01b4 13F0030F 		tst	r3, #3
 3976 01b8 4FEA9307 		lsr	r7, r3, #2
 3977 01bc 18BF     		it	ne
 3978 01be 0137     		addne	r7, r7, #1
 3979              	.LVL504:
1478:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
 3980              		.loc 1 1478 0
 3981 01c0 0026     		movs	r6, #0
 3982              	.LVL505:
 3983              	.L333:
1478:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
 3984              		.loc 1 1478 0 is_stmt 0 discriminator 1
 3985 01c2 BE42     		cmp	r6, r7
 3986 01c4 4FEA8601 		lsl	r1, r6, #2
 3987 01c8 05D0     		beq	.L382
 3988              	.L334:
1480:lib/ff/sdio_stm32f1.c ****             SDIO_WriteData(*tempbuff);
 3989              		.loc 1 1480 0 is_stmt 1 discriminator 2
 3990 01ca 54F82600 		ldr	r0, [r4, r6, lsl #2]
 3991 01ce FFF7FEFF 		bl	SDIO_WriteData
 3992              	.LVL506:
1478:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
 3993              		.loc 1 1478 0 discriminator 2
 3994 01d2 0136     		adds	r6, r6, #1
 3995              	.LVL507:
 3996 01d4 F5E7     		b	.L333
 3997              	.L382:
 3998 01d6 6D18     		adds	r5, r5, r1
 3999 01d8 6418     		adds	r4, r4, r1
 4000 01da DAE7     		b	.L376
 4001              	.LVL508:
 4002              	.L330:
1487:lib/ff/sdio_stm32f1.c ****             SDIO_WriteData(*(tempbuff + count));
 4003              		.loc 1 1487 0 discriminator 2
 4004 01dc A059     		ldr	r0, [r4, r6]
 4005 01de FFF7FEFF 		bl	SDIO_WriteData
 4006              	.LVL509:
 4007 01e2 0436     		adds	r6, r6, #4
1485:lib/ff/sdio_stm32f1.c ****           for (count = 0; count < 8; count++)
 4008              		.loc 1 1485 0 discriminator 2
 4009 01e4 202E     		cmp	r6, #32
 4010 01e6 F9D1     		bne	.L330
1489:lib/ff/sdio_stm32f1.c ****           tempbuff += 8;
 4011              		.loc 1 1489 0
 4012 01e8 2034     		adds	r4, r4, #32
 4013              	.LVL510:
1490:lib/ff/sdio_stm32f1.c ****           bytestransferred += 32;
 4014              		.loc 1 1490 0
 4015 01ea 2035     		adds	r5, r5, #32
 4016              	.LVL511:
 4017 01ec D1E7     		b	.L376
 4018              	.L381:
1494:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
 4019              		.loc 1 1494 0
 4020 01ee 0820     		movs	r0, #8
 4021 01f0 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4022              	.LVL512:
 4023 01f4 20B1     		cbz	r0, .L337
1496:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
 4024              		.loc 1 1496 0
 4025 01f6 0820     		movs	r0, #8
 4026 01f8 FFF7FEFF 		bl	SDIO_ClearFlag
 4027              	.LVL513:
1498:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 4028              		.loc 1 1498 0
 4029 01fc 0420     		movs	r0, #4
 4030 01fe 5CE0     		b	.L319
 4031              	.LVL514:
 4032              	.L337:
1500:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
 4033              		.loc 1 1500 0
 4034 0200 0220     		movs	r0, #2
 4035 0202 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4036              	.LVL515:
 4037 0206 20B1     		cbz	r0, .L338
1502:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
 4038              		.loc 1 1502 0
 4039 0208 0220     		movs	r0, #2
 4040 020a FFF7FEFF 		bl	SDIO_ClearFlag
 4041              	.LVL516:
1504:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 4042              		.loc 1 1504 0
 4043 020e 0220     		movs	r0, #2
 4044 0210 53E0     		b	.L319
 4045              	.LVL517:
 4046              	.L338:
1506:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_TXUNDERR) != RESET)
 4047              		.loc 1 1506 0
 4048 0212 1020     		movs	r0, #16
 4049 0214 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4050              	.LVL518:
 4051 0218 20B1     		cbz	r0, .L339
1508:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_TXUNDERR);
 4052              		.loc 1 1508 0
 4053 021a 1020     		movs	r0, #16
 4054 021c FFF7FEFF 		bl	SDIO_ClearFlag
 4055              	.LVL519:
1510:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 4056              		.loc 1 1510 0
 4057 0220 0520     		movs	r0, #5
 4058 0222 4AE0     		b	.L319
 4059              	.LVL520:
 4060              	.L339:
1512:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
 4061              		.loc 1 1512 0
 4062 0224 4FF40070 		mov	r0, #512
 4063 0228 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4064              	.LVL521:
 4065 022c 0028     		cmp	r0, #0
 4066 022e 31D0     		beq	.L340
1514:lib/ff/sdio_stm32f1.c ****       SDIO_ClearFlag(SDIO_FLAG_STBITERR);
 4067              		.loc 1 1514 0
 4068 0230 4FF40070 		mov	r0, #512
 4069 0234 FFF7FEFF 		bl	SDIO_ClearFlag
 4070              	.LVL522:
1516:lib/ff/sdio_stm32f1.c ****       return(errorstatus);
 4071              		.loc 1 1516 0
 4072 0238 0720     		movs	r0, #7
 4073 023a 3EE0     		b	.L319
 4074              	.LVL523:
 4075              	.L377:
1519:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_INTERRUPT_MODE)
 4076              		.loc 1 1519 0
 4077 023c 0129     		cmp	r1, #1
 4078 023e 0BD1     		bne	.L341
1521:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_FLAG_TXFIFOHE | SDIO
 4079              		.loc 1 1521 0
 4080 0240 44F21A30 		movw	r0, #17178
 4081 0244 FFF7FEFF 		bl	SDIO_ITConfig
 4082              	.LVL524:
 4083              	.L343:
1522:lib/ff/sdio_stm32f1.c ****     while ((TransferEnd == 0) && (TransferError == SD_OK))
 4084              		.loc 1 1522 0 discriminator 1
 4085 0248 1E49     		ldr	r1, .L383+4
 4086 024a 0A68     		ldr	r2, [r1, #0]
 4087 024c 1C49     		ldr	r1, .L383
 4088 024e DAB9     		cbnz	r2, .L344
1522:lib/ff/sdio_stm32f1.c ****     while ((TransferEnd == 0) && (TransferError == SD_OK))
 4089              		.loc 1 1522 0 is_stmt 0 discriminator 2
 4090 0250 0878     		ldrb	r0, [r1, #0]	@ zero_extendqisi2
 4091 0252 2A28     		cmp	r0, #42
 4092 0254 F8D0     		beq	.L343
 4093 0256 17E0     		b	.L344
 4094              	.L341:
1529:lib/ff/sdio_stm32f1.c ****   else if (DeviceMode == SD_DMA_MODE)
 4095              		.loc 1 1529 0 is_stmt 1
 4096 0258 E1B9     		cbnz	r1, .L340
1531:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_TXUNDERR | SDIO_I
 4097              		.loc 1 1531 0
 4098 025a 40F21A30 		movw	r0, #794
 4099 025e 2146     		mov	r1, r4
 4100 0260 FFF7FEFF 		bl	SDIO_ITConfig
 4101              	.LVL525:
1532:lib/ff/sdio_stm32f1.c ****     SD_LowLevel_DMA_TxConfig((uint32_t *)writebuff, BlockSize);
 4102              		.loc 1 1532 0
 4103 0264 3046     		mov	r0, r6
 4104 0266 2946     		mov	r1, r5
 4105 0268 FFF7FEFF 		bl	SD_LowLevel_DMA_TxConfig
 4106              	.LVL526:
1533:lib/ff/sdio_stm32f1.c ****     SDIO_DMACmd(ENABLE);
 4107              		.loc 1 1533 0
 4108 026c 2046     		mov	r0, r4
 4109 026e FFF7FEFF 		bl	SDIO_DMACmd
 4110              	.LVL527:
 4111              	.L345:
 4112              	.LBB62:
 4113              	.LBB63:
3137:lib/ff/sdio_stm32f1.c ****   return (uint32_t)DMA_GetFlagStatus(DMA2_FLAG_TC4);
 4114              		.loc 1 3137 0 discriminator 1
 4115 0272 1F48     		ldr	r0, .L383+48
 4116 0274 FFF7FEFF 		bl	DMA_GetFlagStatus
 4117              	.LVL528:
 4118 0278 1149     		ldr	r1, .L383
 4119              	.LBE63:
 4120              	.LBE62:
1534:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
 4121              		.loc 1 1534 0 discriminator 1
 4122 027a 28B9     		cbnz	r0, .L344
1534:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
 4123              		.loc 1 1534 0 is_stmt 0 discriminator 2
 4124 027c 114A     		ldr	r2, .L383+4
 4125 027e 1068     		ldr	r0, [r2, #0]
 4126 0280 10B9     		cbnz	r0, .L344
1534:lib/ff/sdio_stm32f1.c ****     while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_OK)
 4127              		.loc 1 1534 0 discriminator 1
 4128 0282 0B78     		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 4129 0284 2A2B     		cmp	r3, #42
 4130 0286 F4D0     		beq	.L345
 4131              	.L344:
1536:lib/ff/sdio_stm32f1.c ****     if (TransferError != SD_OK)
 4132              		.loc 1 1536 0 is_stmt 1
 4133 0288 0B78     		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 4134 028a 2A2B     		cmp	r3, #42
 4135 028c 02D0     		beq	.L340
1538:lib/ff/sdio_stm32f1.c ****       return(TransferError);
 4136              		.loc 1 1538 0
 4137 028e 0C49     		ldr	r1, .L383
 4138 0290 0878     		ldrb	r0, [r1, #0]	@ zero_extendqisi2
 4139 0292 12E0     		b	.L319
 4140              	.LVL529:
 4141              	.L340:
1543:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 4142              		.loc 1 1543 0
 4143 0294 40F2FF50 		movw	r0, #1535
 4144 0298 FFF7FEFF 		bl	SDIO_ClearFlag
 4145              	.LVL530:
 4146              	.L347:
1550:lib/ff/sdio_stm32f1.c ****     errorstatus = IsCardProgramming(&cardstate);
 4147              		.loc 1 1550 0
 4148 029c 0DF10F00 		add	r0, sp, #15
 4149 02a0 FFF7FEFF 		bl	IsCardProgramming
 4150              	.LVL531:
1548:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_REC
 4151              		.loc 1 1548 0
 4152 02a4 2A28     		cmp	r0, #42
 4153 02a6 08D1     		bne	.L319
1548:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_REC
 4154              		.loc 1 1548 0 is_stmt 0 discriminator 2
 4155 02a8 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 4156              	.LVL532:
 4157 02ac 991F     		subs	r1, r3, #6
 4158              	.LVL533:
 4159 02ae 0129     		cmp	r1, #1
 4160 02b0 F4D9     		bls	.L347
 4161 02b2 02E0     		b	.L319
 4162              	.LVL534:
 4163              	.L348:
1363:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 4164              		.loc 1 1363 0 is_stmt 1
 4165 02b4 0E20     		movs	r0, #14
 4166 02b6 00E0     		b	.L319
 4167              	.LVL535:
 4168              	.L350:
1437:lib/ff/sdio_stm32f1.c ****     return(SD_ERROR);
 4169              		.loc 1 1437 0
 4170 02b8 2920     		movs	r0, #41
 4171              	.LVL536:
 4172              	.L319:
1554:lib/ff/sdio_stm32f1.c **** }
 4173              		.loc 1 1554 0
 4174 02ba 05B0     		add	sp, sp, #20
 4175 02bc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 4176              	.L384:
 4177              		.align	2
 4178              	.L383:
 4179 02c0 00000000 		.word	.LANCHOR9
 4180 02c4 00000000 		.word	.LANCHOR10
 4181 02c8 00000000 		.word	.LANCHOR11
 4182 02cc 00000000 		.word	.LANCHOR2
 4183 02d0 FFFF0F00 		.word	1048575
 4184 02d4 00000000 		.word	.LANCHOR4
 4185 02d8 00000000 		.word	.LANCHOR0
 4186 02dc 00000000 		.word	.LANCHOR1
 4187 02e0 00000000 		.word	.LANCHOR12
 4188 02e4 00000000 		.word	.LANCHOR14
 4189 02e8 00000000 		.word	.LANCHOR7
 4190 02ec 00800140 		.word	1073840128
 4191 02f0 00200010 		.word	268443648
 4192              		.cfi_endproc
 4193              	.LFE70:
 4195              		.section	.text.SD_WriteMultiBlocks,"ax",%progbits
 4196              		.align	1
 4197              		.global	SD_WriteMultiBlocks
 4198              		.thumb
 4199              		.thumb_func
 4201              	SD_WriteMultiBlocks:
 4202              	.LFB71:
1568:lib/ff/sdio_stm32f1.c **** {
 4203              		.loc 1 1568 0
 4204              		.cfi_startproc
 4205              		@ args = 0, pretend = 0, frame = 24
 4206              		@ frame_needed = 0, uses_anonymous_args = 0
 4207              	.LVL537:
 4208 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, sl, fp, lr}
 4209              	.LCFI21:
 4210              		.cfi_def_cfa_offset 36
 4211              		.cfi_offset 4, -36
 4212              		.cfi_offset 5, -32
 4213              		.cfi_offset 6, -28
 4214              		.cfi_offset 7, -24
 4215              		.cfi_offset 8, -20
 4216              		.cfi_offset 9, -16
 4217              		.cfi_offset 10, -12
 4218              		.cfi_offset 11, -8
 4219              		.cfi_offset 14, -4
 4220 0004 87B0     		sub	sp, sp, #28
 4221              	.LCFI22:
 4222              		.cfi_def_cfa_offset 64
 4223 0006 8A46     		mov	sl, r1
 4224 0008 1446     		mov	r4, r2
 4225 000a 9B46     		mov	fp, r3
 4226              	.LVL538:
1570:lib/ff/sdio_stm32f1.c ****   uint8_t  power = 0, cardstate = 0;
 4227              		.loc 1 1570 0
 4228 000c 0026     		movs	r6, #0
 4229 000e 8DF81360 		strb	r6, [sp, #19]
 4230              	.LVL539:
1574:lib/ff/sdio_stm32f1.c ****   __IO uint32_t count = 0;
 4231              		.loc 1 1574 0
 4232 0012 0596     		str	r6, [sp, #20]
 4233              	.LVL540:
1576:lib/ff/sdio_stm32f1.c ****   if (writebuff == NULL)
 4234              		.loc 1 1576 0
 4235 0014 0390     		str	r0, [sp, #12]
 4236 0016 08B9     		cbnz	r0, .L386
 4237              	.LVL541:
 4238              	.L389:
1579:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 4239              		.loc 1 1579 0
 4240 0018 2620     		movs	r0, #38
 4241 001a A8E1     		b	.L387
 4242              	.LVL542:
 4243              	.L386:
1582:lib/ff/sdio_stm32f1.c ****   TransferError = SD_OK;
 4244              		.loc 1 1582 0
 4245 001c 2A22     		movs	r2, #42
 4246              	.LVL543:
 4247 001e AB4B     		ldr	r3, .L457
 4248              	.LVL544:
 4249 0020 1A70     		strb	r2, [r3, #0]
1583:lib/ff/sdio_stm32f1.c ****   TransferEnd = 0;
 4250              		.loc 1 1583 0
 4251 0022 AB48     		ldr	r0, .L457+4
 4252              	.LVL545:
 4253 0024 0660     		str	r6, [r0, #0]
1584:lib/ff/sdio_stm32f1.c ****   TotalNumberOfBytes = 0;
 4254              		.loc 1 1584 0
 4255 0026 AB49     		ldr	r1, .L457+8
 4256              	.LVL546:
 4257 0028 0E60     		str	r6, [r1, #0]
1586:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 4258              		.loc 1 1586 0
 4259 002a AB48     		ldr	r0, .L457+12
 4260 002c AB4B     		ldr	r3, .L457+16
1587:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 0;
 4261              		.loc 1 1587 0
 4262 002e 80E84800 		stmia	r0, {r3, r6}
1588:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_1b;
 4263              		.loc 1 1588 0
 4264 0032 8660     		str	r6, [r0, #8]
1589:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 4265              		.loc 1 1589 0
 4266 0034 C660     		str	r6, [r0, #12]
1590:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 4267              		.loc 1 1590 0
 4268 0036 0661     		str	r6, [r0, #16]
1591:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Disable;
 4269              		.loc 1 1591 0
 4270 0038 4661     		str	r6, [r0, #20]
1592:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 4271              		.loc 1 1592 0
 4272 003a FFF7FEFF 		bl	SDIO_DataConfig
 4273              	.LVL547:
1593:lib/ff/sdio_stm32f1.c ****   SDIO_DMACmd(DISABLE);
 4274              		.loc 1 1593 0
 4275 003e 3046     		mov	r0, r6
 4276 0040 FFF7FEFF 		bl	SDIO_DMACmd
 4277              	.LVL548:
1595:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 4278              		.loc 1 1595 0
 4279 0044 3046     		mov	r0, r6
 4280 0046 FFF7FEFF 		bl	SDIO_GetResponse
 4281              	.LVL549:
 4282 004a 8001     		lsls	r0, r0, #6
 4283 004c 00F18E81 		bmi	.L421
1601:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 4284              		.loc 1 1601 0
 4285 0050 A34A     		ldr	r2, .L457+20
 4286 0052 1368     		ldr	r3, [r2, #0]
 4287 0054 022B     		cmp	r3, #2
 4288              	.LVL550:
1604:lib/ff/sdio_stm32f1.c ****     WriteAddr /= 512;
 4289              		.loc 1 1604 0
 4290 0056 04BF     		itt	eq
 4291 0058 4FEA5A2A 		lsreq	sl, sl, #9
 4292              	.LVL551:
1603:lib/ff/sdio_stm32f1.c ****     BlockSize = 512;
 4293              		.loc 1 1603 0
 4294 005c 4FF40074 		moveq	r4, #512
 4295              	.LVL552:
1608:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 4296              		.loc 1 1608 0
 4297 0060 04F1FF39 		add	r9, r4, #-1
 4298 0064 1FFA89F0 		uxth	r0, r9
 4299 0068 B0F5006F 		cmp	r0, #2048
 4300 006c D4D2     		bcs	.L389
1608:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 4301              		.loc 1 1608 0 is_stmt 0 discriminator 1
 4302 006e 19EA0409 		ands	r9, r9, r4
 4303 0072 D1D1     		bne	.L389
1608:lib/ff/sdio_stm32f1.c ****   if ((BlockSize > 0) && (BlockSize <= 2048) && ((BlockSize & (BlockSize - 1)) == 0))
 4304              		.loc 1 1608 0
 4305 0074 2546     		mov	r5, r4
 4306              	.L390:
 4307              	.LVL553:
 4308              	.LBB68:
 4309              	.LBB69:
3046:lib/ff/sdio_stm32f1.c ****   while (NumberOfBytes != 1)
 4310              		.loc 1 3046 0 is_stmt 1
 4311 0076 012D     		cmp	r5, #1
 4312 0078 06D0     		beq	.L452
 4313              	.L391:
3048:lib/ff/sdio_stm32f1.c ****     NumberOfBytes >>= 1;
 4314              		.loc 1 3048 0
 4315 007a C5F34F05 		ubfx	r5, r5, #1, #16
 4316              	.LVL554:
3049:lib/ff/sdio_stm32f1.c ****     count++;
 4317              		.loc 1 3049 0
 4318 007e 09F10109 		add	r9, r9, #1
 4319              	.LVL555:
 4320 0082 5FFA89F9 		uxtb	r9, r9
 4321              	.LVL556:
 4322 0086 F6E7     		b	.L390
 4323              	.L452:
 4324              	.LVL557:
 4325              	.LBE69:
 4326              	.LBE68:
1612:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) BlockSize;
 4327              		.loc 1 1612 0
 4328 0088 964D     		ldr	r5, .L457+24
 4329              	.LVL558:
 4330 008a 2C60     		str	r4, [r5, #0]
1613:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
 4331              		.loc 1 1613 0
 4332 008c 1021     		movs	r1, #16
 4333 008e 6960     		str	r1, [r5, #4]
1614:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4334              		.loc 1 1614 0
 4335 0090 4FF04008 		mov	r8, #64
 4336 0094 C5F80880 		str	r8, [r5, #8]
1615:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4337              		.loc 1 1615 0
 4338 0098 0027     		movs	r7, #0
 4339 009a EF60     		str	r7, [r5, #12]
1616:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4340              		.loc 1 1616 0
 4341 009c 4FF48066 		mov	r6, #1024
 4342 00a0 2E61     		str	r6, [r5, #16]
1617:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 4343              		.loc 1 1617 0
 4344 00a2 2846     		mov	r0, r5
 4345 00a4 0191     		str	r1, [sp, #4]
 4346 00a6 FFF7FEFF 		bl	SDIO_SendCommand
 4347              	.LVL559:
1619:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 4348              		.loc 1 1619 0
 4349 00aa 019A     		ldr	r2, [sp, #4]
 4350 00ac 1046     		mov	r0, r2
 4351 00ae FFF7FEFF 		bl	CmdResp1Error
 4352              	.LVL560:
1621:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 4353              		.loc 1 1621 0
 4354 00b2 2A28     		cmp	r0, #42
 4355 00b4 40F05B81 		bne	.L387
1633:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
 4356              		.loc 1 1633 0
 4357 00b8 8B4B     		ldr	r3, .L457+28
 4358 00ba 1868     		ldr	r0, [r3, #0]
 4359              	.LVL561:
 4360 00bc 0104     		lsls	r1, r0, #16
 4361 00be 2960     		str	r1, [r5, #0]
1634:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
 4362              		.loc 1 1634 0
 4363 00c0 0D22     		movs	r2, #13
 4364 00c2 6A60     		str	r2, [r5, #4]
1635:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4365              		.loc 1 1635 0
 4366 00c4 C5F80880 		str	r8, [r5, #8]
1636:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4367              		.loc 1 1636 0
 4368 00c8 EF60     		str	r7, [r5, #12]
1637:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4369              		.loc 1 1637 0
 4370 00ca 2E61     		str	r6, [r5, #16]
1638:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 4371              		.loc 1 1638 0
 4372 00cc 2846     		mov	r0, r5
 4373 00ce 0292     		str	r2, [sp, #8]
 4374 00d0 0193     		str	r3, [sp, #4]
 4375 00d2 FFF7FEFF 		bl	SDIO_SendCommand
 4376              	.LVL562:
1640:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
 4377              		.loc 1 1640 0
 4378 00d6 029B     		ldr	r3, [sp, #8]
 4379 00d8 1846     		mov	r0, r3
 4380 00da FFF7FEFF 		bl	CmdResp1Error
 4381              	.LVL563:
1642:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 4382              		.loc 1 1642 0
 4383 00de 2A28     		cmp	r0, #42
 4384 00e0 019A     		ldr	r2, [sp, #4]
 4385 00e2 40F04481 		bne	.L387
1647:lib/ff/sdio_stm32f1.c ****   if (NumberOfBlocks > 1)
 4386              		.loc 1 1647 0
 4387 00e6 BBF1010F 		cmp	fp, #1
 4388 00ea 40F22581 		bls	.L392
1650:lib/ff/sdio_stm32f1.c ****     if (NumberOfBlocks * BlockSize > SD_MAX_DATA_LENGTH)
 4389              		.loc 1 1650 0
 4390 00ee 0BFB04F4 		mul	r4, fp, r4
 4391              	.LVL564:
 4392 00f2 B4F1007F 		cmp	r4, #33554432
 4393 00f6 8FD2     		bcs	.L389
1656:lib/ff/sdio_stm32f1.c ****     if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType
 4394              		.loc 1 1656 0
 4395 00f8 7948     		ldr	r0, .L457+20
 4396              	.LVL565:
 4397 00fa 0168     		ldr	r1, [r0, #0]
 4398 00fc 0229     		cmp	r1, #2
 4399 00fe 14D9     		bls	.L393
 4400              	.LVL566:
 4401              	.L395:
1690:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)WriteAddr;
 4402              		.loc 1 1690 0
 4403 0100 7848     		ldr	r0, .L457+24
 4404 0102 C0F800A0 		str	sl, [r0, #0]
1691:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_WRITE_MULT_BLOCK;
 4405              		.loc 1 1691 0
 4406 0106 1927     		movs	r7, #25
 4407 0108 4760     		str	r7, [r0, #4]
1692:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4408              		.loc 1 1692 0
 4409 010a 4026     		movs	r6, #64
 4410 010c 8660     		str	r6, [r0, #8]
1693:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4411              		.loc 1 1693 0
 4412 010e 0026     		movs	r6, #0
 4413 0110 C660     		str	r6, [r0, #12]
1694:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4414              		.loc 1 1694 0
 4415 0112 4FF48063 		mov	r3, #1024
 4416 0116 0361     		str	r3, [r0, #16]
1695:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 4417              		.loc 1 1695 0
 4418 0118 FFF7FEFF 		bl	SDIO_SendCommand
 4419              	.LVL567:
1697:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_WRITE_MULT_BLOCK);
 4420              		.loc 1 1697 0
 4421 011c 3846     		mov	r0, r7
 4422 011e FFF7FEFF 		bl	CmdResp1Error
 4423              	.LVL568:
1699:lib/ff/sdio_stm32f1.c ****     if (SD_OK != errorstatus)
 4424              		.loc 1 1699 0
 4425 0122 2A28     		cmp	r0, #42
 4426 0124 40F02381 		bne	.L387
 4427 0128 26E0     		b	.L453
 4428              	.LVL569:
 4429              	.L393:
1659:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) (RCA << 16);
 4430              		.loc 1 1659 0
 4431 012a 1368     		ldr	r3, [r2, #0]
 4432 012c 1A04     		lsls	r2, r3, #16
 4433 012e 2A60     		str	r2, [r5, #0]
1660:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 4434              		.loc 1 1660 0
 4435 0130 3721     		movs	r1, #55
 4436 0132 6960     		str	r1, [r5, #4]
1661:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4437              		.loc 1 1661 0
 4438 0134 C5F80880 		str	r8, [r5, #8]
1662:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4439              		.loc 1 1662 0
 4440 0138 EF60     		str	r7, [r5, #12]
1663:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4441              		.loc 1 1663 0
 4442 013a 2E61     		str	r6, [r5, #16]
1664:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 4443              		.loc 1 1664 0
 4444 013c 2846     		mov	r0, r5
 4445 013e 0191     		str	r1, [sp, #4]
 4446 0140 FFF7FEFF 		bl	SDIO_SendCommand
 4447              	.LVL570:
1667:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 4448              		.loc 1 1667 0
 4449 0144 0198     		ldr	r0, [sp, #4]
 4450 0146 FFF7FEFF 		bl	CmdResp1Error
 4451              	.LVL571:
1669:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 4452              		.loc 1 1669 0
 4453 014a 2A28     		cmp	r0, #42
 4454 014c 40F00F81 		bne	.L387
1674:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Argument = (uint32_t)NumberOfBlocks;
 4455              		.loc 1 1674 0
 4456 0150 C5F800B0 		str	fp, [r5, #0]
1675:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCK_COUNT;
 4457              		.loc 1 1675 0
 4458 0154 4FF0170B 		mov	fp, #23
 4459              	.LVL572:
 4460 0158 C5F804B0 		str	fp, [r5, #4]
1676:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4461              		.loc 1 1676 0
 4462 015c C5F80880 		str	r8, [r5, #8]
1677:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4463              		.loc 1 1677 0
 4464 0160 EF60     		str	r7, [r5, #12]
1678:lib/ff/sdio_stm32f1.c ****       SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4465              		.loc 1 1678 0
 4466 0162 2E61     		str	r6, [r5, #16]
1679:lib/ff/sdio_stm32f1.c ****       SDIO_SendCommand(&SDIO_CmdInitStructure);
 4467              		.loc 1 1679 0
 4468 0164 2846     		mov	r0, r5
 4469              	.LVL573:
 4470 0166 FFF7FEFF 		bl	SDIO_SendCommand
 4471              	.LVL574:
1681:lib/ff/sdio_stm32f1.c ****       errorstatus = CmdResp1Error(SD_CMD_SET_BLOCK_COUNT);
 4472              		.loc 1 1681 0
 4473 016a 5846     		mov	r0, fp
 4474 016c FFF7FEFF 		bl	CmdResp1Error
 4475              	.LVL575:
1683:lib/ff/sdio_stm32f1.c ****       if (errorstatus != SD_OK)
 4476              		.loc 1 1683 0
 4477 0170 2A28     		cmp	r0, #42
 4478 0172 40F0FC80 		bne	.L387
 4479 0176 C3E7     		b	.L395
 4480              	.L453:
1704:lib/ff/sdio_stm32f1.c ****     TotalNumberOfBytes = NumberOfBlocks * BlockSize;
 4481              		.loc 1 1704 0
 4482 0178 564F     		ldr	r7, .L457+8
 4483 017a 3C60     		str	r4, [r7, #0]
1705:lib/ff/sdio_stm32f1.c ****     StopCondition = 1;
 4484              		.loc 1 1705 0
 4485 017c 0127     		movs	r7, #1
 4486 017e 5B4A     		ldr	r2, .L457+32
 4487 0180 1760     		str	r7, [r2, #0]
1706:lib/ff/sdio_stm32f1.c ****     SrcBuffer = (uint32_t *)writebuff;
 4488              		.loc 1 1706 0
 4489 0182 5B49     		ldr	r1, .L457+36
 4490 0184 0398     		ldr	r0, [sp, #12]
 4491              	.LVL576:
 4492 0186 0860     		str	r0, [r1, #0]
1708:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 4493              		.loc 1 1708 0
 4494 0188 5348     		ldr	r0, .L457+12
 4495 018a 544A     		ldr	r2, .L457+16
1709:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataLength = NumberOfBlocks * BlockSize;
 4496              		.loc 1 1709 0
 4497 018c 80E81400 		stmia	r0, {r2, r4}
1710:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DataBlockSize = (uint32_t) power << 4;
 4498              		.loc 1 1710 0
 4499 0190 4FEA0913 		lsl	r3, r9, #4
 4500 0194 8360     		str	r3, [r0, #8]
1711:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToCard;
 4501              		.loc 1 1711 0
 4502 0196 C660     		str	r6, [r0, #12]
1712:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 4503              		.loc 1 1712 0
 4504 0198 0661     		str	r6, [r0, #16]
1713:lib/ff/sdio_stm32f1.c ****     SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
 4505              		.loc 1 1713 0
 4506 019a 4761     		str	r7, [r0, #20]
1714:lib/ff/sdio_stm32f1.c ****     SDIO_DataConfig(&SDIO_DataInitStructure);
 4507              		.loc 1 1714 0
 4508 019c FFF7FEFF 		bl	SDIO_DataConfig
 4509              	.LVL577:
1716:lib/ff/sdio_stm32f1.c ****     if (DeviceMode == SD_POLLING_MODE)
 4510              		.loc 1 1716 0
 4511 01a0 544A     		ldr	r2, .L457+40
 4512 01a2 1168     		ldr	r1, [r2, #0]
 4513 01a4 0229     		cmp	r1, #2
 4514 01a6 40F08180 		bne	.L448
 4515 01aa 039D     		ldr	r5, [sp, #12]
 4516              	.LVL578:
 4517              	.L446:
1718:lib/ff/sdio_stm32f1.c ****       while (!(SDIO->STA & (SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DATAEND | SDIO_FLAG
 4518              		.loc 1 1718 0 discriminator 1
 4519 01ac 524C     		ldr	r4, .L457+44
 4520 01ae 606B     		ldr	r0, [r4, #52]
 4521 01b0 40F21A34 		movw	r4, #794
 4522 01b4 0440     		ands	r4, r4, r0
 4523 01b6 002C     		cmp	r4, #0
 4524 01b8 35D1     		bne	.L454
 4525              	.L407:
1720:lib/ff/sdio_stm32f1.c ****         if (SDIO_GetFlagStatus(SDIO_FLAG_TXFIFOHE) != RESET)
 4526              		.loc 1 1720 0
 4527 01ba 4FF48040 		mov	r0, #16384
 4528 01be FFF7FEFF 		bl	SDIO_GetFlagStatus
 4529              	.LVL579:
 4530 01c2 0028     		cmp	r0, #0
 4531 01c4 F2D0     		beq	.L446
1722:lib/ff/sdio_stm32f1.c ****           if (!((TotalNumberOfBytes - bytestransferred) < SD_HALFFIFOBYTES))
 4532              		.loc 1 1722 0
 4533 01c6 4349     		ldr	r1, .L457+8
 4534 01c8 0B68     		ldr	r3, [r1, #0]
 4535 01ca 981B     		subs	r0, r3, r6
 4536 01cc 1F28     		cmp	r0, #31
 4537 01ce 11D9     		bls	.L399
1724:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < SD_HALFFIFO; count++)
 4538              		.loc 1 1724 0
 4539 01d0 0594     		str	r4, [sp, #20]
 4540              	.L400:
1724:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < SD_HALFFIFO; count++)
 4541              		.loc 1 1724 0 is_stmt 0 discriminator 1
 4542 01d2 0599     		ldr	r1, [sp, #20]
 4543 01d4 0729     		cmp	r1, #7
 4544 01d6 08D8     		bhi	.L455
 4545              	.L401:
1726:lib/ff/sdio_stm32f1.c ****               SDIO_WriteData(*(tempbuff + count));
 4546              		.loc 1 1726 0 is_stmt 1 discriminator 2
 4547 01d8 059B     		ldr	r3, [sp, #20]
 4548 01da 55F82300 		ldr	r0, [r5, r3, lsl #2]
 4549 01de FFF7FEFF 		bl	SDIO_WriteData
 4550              	.LVL580:
1724:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < SD_HALFFIFO; count++)
 4551              		.loc 1 1724 0 discriminator 2
 4552 01e2 059C     		ldr	r4, [sp, #20]
 4553 01e4 601C     		adds	r0, r4, #1
 4554              	.LVL581:
 4555 01e6 0590     		str	r0, [sp, #20]
 4556              	.LVL582:
 4557 01e8 F3E7     		b	.L400
 4558              	.L455:
1728:lib/ff/sdio_stm32f1.c ****             tempbuff += SD_HALFFIFO;
 4559              		.loc 1 1728 0
 4560 01ea 05F12004 		add	r4, r5, #32
 4561              	.LVL583:
1729:lib/ff/sdio_stm32f1.c ****             bytestransferred += SD_HALFFIFOBYTES;
 4562              		.loc 1 1729 0
 4563 01ee 06F12001 		add	r1, r6, #32
 4564              	.LVL584:
 4565 01f2 15E0     		b	.L402
 4566              	.LVL585:
 4567              	.L399:
1733:lib/ff/sdio_stm32f1.c ****             restwords = ((TotalNumberOfBytes - bytestransferred) % 4 == 0) ? ((TotalNumberOfBytes -
 4568              		.loc 1 1733 0
 4569 01f4 10F0030F 		tst	r0, #3
 4570 01f8 4FEA9007 		lsr	r7, r0, #2
 4571 01fc 18BF     		it	ne
 4572 01fe 0137     		addne	r7, r7, #1
 4573              	.LVL586:
1736:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
 4574              		.loc 1 1736 0
 4575 0200 0024     		movs	r4, #0
 4576 0202 0594     		str	r4, [sp, #20]
 4577 0204 2C46     		mov	r4, r5
 4578              	.LVL587:
 4579              	.L405:
1567:lib/ff/sdio_stm32f1.c **** SD_Error SD_WriteMultiBlocks(uint8_t *writebuff, uint32_t WriteAddr, uint16_t BlockSize, uint32_t N
 4580              		.loc 1 1567 0 discriminator 1
 4581 0206 721B     		subs	r2, r6, r5
 4582 0208 A118     		adds	r1, r4, r2
1736:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
 4583              		.loc 1 1736 0 discriminator 1
 4584 020a 059B     		ldr	r3, [sp, #20]
 4585 020c BB42     		cmp	r3, r7
 4586 020e 07D2     		bcs	.L402
 4587              	.L406:
1738:lib/ff/sdio_stm32f1.c ****               SDIO_WriteData(*tempbuff);
 4588              		.loc 1 1738 0 discriminator 2
 4589 0210 54F8040B 		ldr	r0, [r4], #4
 4590              	.LVL588:
 4591 0214 FFF7FEFF 		bl	SDIO_WriteData
 4592              	.LVL589:
1736:lib/ff/sdio_stm32f1.c ****             for (count = 0; count < restwords; count++, tempbuff++, bytestransferred += 4)
 4593              		.loc 1 1736 0 discriminator 2
 4594 0218 0598     		ldr	r0, [sp, #20]
 4595 021a 421C     		adds	r2, r0, #1
 4596              	.LVL590:
 4597 021c 0592     		str	r2, [sp, #20]
 4598              	.LVL591:
 4599 021e F2E7     		b	.L405
 4600              	.LVL592:
 4601              	.L402:
1716:lib/ff/sdio_stm32f1.c ****     if (DeviceMode == SD_POLLING_MODE)
 4602              		.loc 1 1716 0 discriminator 1
 4603 0220 2546     		mov	r5, r4
 4604 0222 0E46     		mov	r6, r1
 4605 0224 C2E7     		b	.L446
 4606              	.LVL593:
 4607              	.L454:
1744:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
 4608              		.loc 1 1744 0
 4609 0226 0820     		movs	r0, #8
 4610 0228 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4611              	.LVL594:
 4612 022c 20B1     		cbz	r0, .L408
1746:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
 4613              		.loc 1 1746 0
 4614 022e 0820     		movs	r0, #8
 4615 0230 FFF7FEFF 		bl	SDIO_ClearFlag
 4616              	.LVL595:
1748:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 4617              		.loc 1 1748 0
 4618 0234 0420     		movs	r0, #4
 4619 0236 9AE0     		b	.L387
 4620              	.LVL596:
 4621              	.L408:
1750:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
 4622              		.loc 1 1750 0
 4623 0238 0220     		movs	r0, #2
 4624 023a FFF7FEFF 		bl	SDIO_GetFlagStatus
 4625              	.LVL597:
 4626 023e 20B1     		cbz	r0, .L409
1752:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
 4627              		.loc 1 1752 0
 4628 0240 0220     		movs	r0, #2
 4629 0242 FFF7FEFF 		bl	SDIO_ClearFlag
 4630              	.LVL598:
1754:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 4631              		.loc 1 1754 0
 4632 0246 0220     		movs	r0, #2
 4633 0248 91E0     		b	.L387
 4634              	.LVL599:
 4635              	.L409:
1756:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_TXUNDERR) != RESET)
 4636              		.loc 1 1756 0
 4637 024a 1020     		movs	r0, #16
 4638 024c FFF7FEFF 		bl	SDIO_GetFlagStatus
 4639              	.LVL600:
 4640 0250 20B1     		cbz	r0, .L410
1758:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_TXUNDERR);
 4641              		.loc 1 1758 0
 4642 0252 1020     		movs	r0, #16
 4643 0254 FFF7FEFF 		bl	SDIO_ClearFlag
 4644              	.LVL601:
1760:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 4645              		.loc 1 1760 0
 4646 0258 0520     		movs	r0, #5
 4647 025a 88E0     		b	.L387
 4648              	.LVL602:
 4649              	.L410:
1762:lib/ff/sdio_stm32f1.c ****       else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
 4650              		.loc 1 1762 0
 4651 025c 4FF40070 		mov	r0, #512
 4652 0260 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4653              	.LVL603:
 4654 0264 0446     		mov	r4, r0
 4655 0266 28B1     		cbz	r0, .L411
1764:lib/ff/sdio_stm32f1.c ****         SDIO_ClearFlag(SDIO_FLAG_STBITERR);
 4656              		.loc 1 1764 0
 4657 0268 4FF40070 		mov	r0, #512
 4658 026c FFF7FEFF 		bl	SDIO_ClearFlag
 4659              	.LVL604:
1766:lib/ff/sdio_stm32f1.c ****         return(errorstatus);
 4660              		.loc 1 1766 0
 4661 0270 0720     		movs	r0, #7
 4662 0272 7CE0     		b	.L387
 4663              	.LVL605:
 4664              	.L411:
1769:lib/ff/sdio_stm32f1.c ****       if (SDIO_GetFlagStatus(SDIO_FLAG_DATAEND) != RESET)
 4665              		.loc 1 1769 0
 4666 0274 4FF48070 		mov	r0, #256
 4667 0278 FFF7FEFF 		bl	SDIO_GetFlagStatus
 4668              	.LVL606:
 4669 027c 0028     		cmp	r0, #0
 4670 027e 5BD0     		beq	.L392
1771:lib/ff/sdio_stm32f1.c ****        if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardT
 4671              		.loc 1 1771 0
 4672 0280 174B     		ldr	r3, .L457+20
 4673 0282 1A68     		ldr	r2, [r3, #0]
 4674 0284 022A     		cmp	r2, #2
 4675 0286 57D8     		bhi	.L392
1774:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 4676              		.loc 1 1774 0
 4677 0288 1648     		ldr	r0, .L457+24
 4678 028a 0460     		str	r4, [r0, #0]
1775:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_STOP_TRANSMISSION;
 4679              		.loc 1 1775 0
 4680 028c 0C25     		movs	r5, #12
 4681              	.LVL607:
 4682 028e 4560     		str	r5, [r0, #4]
1776:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4683              		.loc 1 1776 0
 4684 0290 4021     		movs	r1, #64
 4685 0292 8160     		str	r1, [r0, #8]
1777:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4686              		.loc 1 1777 0
 4687 0294 C460     		str	r4, [r0, #12]
1778:lib/ff/sdio_stm32f1.c ****           SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4688              		.loc 1 1778 0
 4689 0296 4FF48063 		mov	r3, #1024
 4690 029a 0361     		str	r3, [r0, #16]
1779:lib/ff/sdio_stm32f1.c ****           SDIO_SendCommand(&SDIO_CmdInitStructure);
 4691              		.loc 1 1779 0
 4692 029c FFF7FEFF 		bl	SDIO_SendCommand
 4693              	.LVL608:
1782:lib/ff/sdio_stm32f1.c ****           errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 4694              		.loc 1 1782 0
 4695 02a0 2846     		mov	r0, r5
 4696 02a2 FFF7FEFF 		bl	CmdResp1Error
 4697              	.LVL609:
1784:lib/ff/sdio_stm32f1.c ****           if (errorstatus != SD_OK)
 4698              		.loc 1 1784 0
 4699 02a6 2A28     		cmp	r0, #42
 4700 02a8 61D1     		bne	.L387
 4701 02aa 45E0     		b	.L392
 4702              	.LVL610:
 4703              	.L448:
1791:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_INTERRUPT_MODE)
 4704              		.loc 1 1791 0
 4705 02ac 0129     		cmp	r1, #1
 4706 02ae 25D1     		bne	.L412
1793:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_TXFIFOHE | SDIO
 4707              		.loc 1 1793 0
 4708 02b0 44F21A30 		movw	r0, #17178
 4709 02b4 FFF7FEFF 		bl	SDIO_ITConfig
 4710              	.LVL611:
 4711              	.L414:
1794:lib/ff/sdio_stm32f1.c ****       while ((TransferEnd == 0) && (TransferError == SD_OK))
 4712              		.loc 1 1794 0 discriminator 1
 4713 02b8 0549     		ldr	r1, .L457+4
 4714 02ba 0868     		ldr	r0, [r1, #0]
 4715 02bc 0349     		ldr	r1, .L457
 4716 02be 0028     		cmp	r0, #0
 4717 02c0 34D1     		bne	.L415
1794:lib/ff/sdio_stm32f1.c ****       while ((TransferEnd == 0) && (TransferError == SD_OK))
 4718              		.loc 1 1794 0 is_stmt 0 discriminator 2
 4719 02c2 0B78     		ldrb	r3, [r1, #0]	@ zero_extendqisi2
 4720 02c4 2A2B     		cmp	r3, #42
 4721 02c6 F7D0     		beq	.L414
 4722 02c8 30E0     		b	.L415
 4723              	.L458:
 4724 02ca 00BF     		.align	2
 4725              	.L457:
 4726 02cc 00000000 		.word	.LANCHOR9
 4727 02d0 00000000 		.word	.LANCHOR10
 4728 02d4 00000000 		.word	.LANCHOR11
 4729 02d8 00000000 		.word	.LANCHOR2
 4730 02dc FFFF0F00 		.word	1048575
 4731 02e0 00000000 		.word	.LANCHOR4
 4732 02e4 00000000 		.word	.LANCHOR0
 4733 02e8 00000000 		.word	.LANCHOR1
 4734 02ec 00000000 		.word	.LANCHOR12
 4735 02f0 00000000 		.word	.LANCHOR14
 4736 02f4 00000000 		.word	.LANCHOR7
 4737 02f8 00800140 		.word	1073840128
 4738              	.L412:
1801:lib/ff/sdio_stm32f1.c ****     else if (DeviceMode == SD_DMA_MODE)
 4739              		.loc 1 1801 0 is_stmt 1
 4740 02fc E1B9     		cbnz	r1, .L392
1803:lib/ff/sdio_stm32f1.c ****       SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND | SDIO_IT_TXUNDERR | SDIO
 4741              		.loc 1 1803 0
 4742 02fe 40F21A30 		movw	r0, #794
 4743 0302 3946     		mov	r1, r7
 4744 0304 FFF7FEFF 		bl	SDIO_ITConfig
 4745              	.LVL612:
1804:lib/ff/sdio_stm32f1.c ****       SDIO_DMACmd(ENABLE);
 4746              		.loc 1 1804 0
 4747 0308 3846     		mov	r0, r7
 4748 030a FFF7FEFF 		bl	SDIO_DMACmd
 4749              	.LVL613:
1805:lib/ff/sdio_stm32f1.c ****       SD_LowLevel_DMA_TxConfig((uint32_t *)writebuff, (NumberOfBlocks * BlockSize));
 4750              		.loc 1 1805 0
 4751 030e 0398     		ldr	r0, [sp, #12]
 4752 0310 2146     		mov	r1, r4
 4753 0312 FFF7FEFF 		bl	SD_LowLevel_DMA_TxConfig
 4754              	.LVL614:
 4755              	.L416:
 4756              	.LBB70:
 4757              	.LBB71:
3137:lib/ff/sdio_stm32f1.c ****   return (uint32_t)DMA_GetFlagStatus(DMA2_FLAG_TC4);
 4758              		.loc 1 3137 0 discriminator 1
 4759 0316 1748     		ldr	r0, .L459
 4760 0318 FFF7FEFF 		bl	DMA_GetFlagStatus
 4761              	.LVL615:
 4762 031c 1649     		ldr	r1, .L459+4
 4763              	.LBE71:
 4764              	.LBE70:
1806:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
 4765              		.loc 1 1806 0 discriminator 1
 4766 031e 28B9     		cbnz	r0, .L415
1806:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
 4767              		.loc 1 1806 0 is_stmt 0 discriminator 2
 4768 0320 1648     		ldr	r0, .L459+8
 4769 0322 0368     		ldr	r3, [r0, #0]
 4770 0324 13B9     		cbnz	r3, .L415
1806:lib/ff/sdio_stm32f1.c ****       while ((SD_DMAEndOfTransferStatus() == RESET) && (TransferEnd == 0) && (TransferError == SD_O
 4771              		.loc 1 1806 0 discriminator 1
 4772 0326 0A78     		ldrb	r2, [r1, #0]	@ zero_extendqisi2
 4773 0328 2A2A     		cmp	r2, #42
 4774 032a F4D0     		beq	.L416
 4775              	.L415:
1808:lib/ff/sdio_stm32f1.c ****       if (TransferError != SD_OK)
 4776              		.loc 1 1808 0 is_stmt 1
 4777 032c 0A78     		ldrb	r2, [r1, #0]	@ zero_extendqisi2
 4778 032e 2A2A     		cmp	r2, #42
 4779 0330 02D0     		beq	.L392
1810:lib/ff/sdio_stm32f1.c ****         return(TransferError);
 4780              		.loc 1 1810 0
 4781 0332 1149     		ldr	r1, .L459+4
 4782 0334 0878     		ldrb	r0, [r1, #0]	@ zero_extendqisi2
 4783 0336 1AE0     		b	.L387
 4784              	.LVL616:
 4785              	.L392:
1815:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 4786              		.loc 1 1815 0
 4787 0338 40F2FF50 		movw	r0, #1535
 4788 033c FFF7FEFF 		bl	SDIO_ClearFlag
 4789              	.LVL617:
1818:lib/ff/sdio_stm32f1.c ****   for(count = 0; count < 0xFFFF; count++)
 4790              		.loc 1 1818 0
 4791 0340 0022     		movs	r2, #0
 4792              	.L449:
1818:lib/ff/sdio_stm32f1.c ****   for(count = 0; count < 0xFFFF; count++)
 4793              		.loc 1 1818 0 is_stmt 0 discriminator 2
 4794 0342 0592     		str	r2, [sp, #20]
 4795 0344 0598     		ldr	r0, [sp, #20]
 4796 0346 4FF6FE72 		movw	r2, #65534
 4797 034a 9042     		cmp	r0, r2
 4798 034c 07D8     		bhi	.L420
 4799              	.L418:
 4800 034e 0598     		ldr	r0, [sp, #20]
 4801 0350 421C     		adds	r2, r0, #1
 4802              	.LVL618:
 4803 0352 F6E7     		b	.L449
 4804              	.LVL619:
 4805              	.L456:
1824:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_REC
 4806              		.loc 1 1824 0 is_stmt 1 discriminator 2
 4807 0354 9DF81310 		ldrb	r1, [sp, #19]	@ zero_extendqisi2
 4808              	.LVL620:
 4809 0358 8B1F     		subs	r3, r1, #6
 4810              	.LVL621:
 4811 035a 012B     		cmp	r3, #1
 4812 035c 07D8     		bhi	.L387
 4813              	.LVL622:
 4814              	.L420:
1826:lib/ff/sdio_stm32f1.c ****     errorstatus = IsCardProgramming(&cardstate);
 4815              		.loc 1 1826 0
 4816 035e 0DF11300 		add	r0, sp, #19
 4817 0362 FFF7FEFF 		bl	IsCardProgramming
 4818              	.LVL623:
1824:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_REC
 4819              		.loc 1 1824 0
 4820 0366 2A28     		cmp	r0, #42
 4821 0368 F4D0     		beq	.L456
 4822 036a 00E0     		b	.L387
 4823              	.LVL624:
 4824              	.L421:
1598:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 4825              		.loc 1 1598 0
 4826 036c 0E20     		movs	r0, #14
 4827              	.LVL625:
 4828              	.L387:
1830:lib/ff/sdio_stm32f1.c **** }
 4829              		.loc 1 1830 0
 4830 036e 07B0     		add	sp, sp, #28
 4831 0370 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, sl, fp, pc}
 4832              	.L460:
 4833              		.align	2
 4834              	.L459:
 4835 0374 00200010 		.word	268443648
 4836 0378 00000000 		.word	.LANCHOR9
 4837 037c 00000000 		.word	.LANCHOR10
 4838              		.cfi_endproc
 4839              	.LFE71:
 4841              		.section	.text.SD_GetTransferState,"ax",%progbits
 4842              		.align	1
 4843              		.global	SD_GetTransferState
 4844              		.thumb
 4845              		.thumb_func
 4847              	SD_GetTransferState:
 4848              	.LFB72:
1844:lib/ff/sdio_stm32f1.c **** {
 4849              		.loc 1 1844 0
 4850              		.cfi_startproc
 4851              		@ args = 0, pretend = 0, frame = 0
 4852              		@ frame_needed = 0, uses_anonymous_args = 0
 4853              		@ link register save eliminated.
1845:lib/ff/sdio_stm32f1.c ****   if (SDIO->STA & (SDIO_FLAG_TXACT | SDIO_FLAG_RXACT))
 4854              		.loc 1 1845 0
 4855 0000 034B     		ldr	r3, .L462
 4856 0002 586B     		ldr	r0, [r3, #52]
 4857 0004 10F4405F 		tst	r0, #12288
1853:lib/ff/sdio_stm32f1.c **** }
 4858              		.loc 1 1853 0
 4859 0008 0CBF     		ite	eq
 4860 000a 0020     		moveq	r0, #0
 4861 000c 0120     		movne	r0, #1
 4862 000e 7047     		bx	lr
 4863              	.L463:
 4864              		.align	2
 4865              	.L462:
 4866 0010 00800140 		.word	1073840128
 4867              		.cfi_endproc
 4868              	.LFE72:
 4870              		.section	.text.SD_StopTransfer,"ax",%progbits
 4871              		.align	1
 4872              		.global	SD_StopTransfer
 4873              		.thumb
 4874              		.thumb_func
 4876              	SD_StopTransfer:
 4877              	.LFB73:
1864:lib/ff/sdio_stm32f1.c **** {
 4878              		.loc 1 1864 0
 4879              		.cfi_startproc
 4880              		@ args = 0, pretend = 0, frame = 0
 4881              		@ frame_needed = 0, uses_anonymous_args = 0
 4882 0000 10B5     		push	{r4, lr}
 4883              	.LCFI23:
 4884              		.cfi_def_cfa_offset 8
 4885              		.cfi_offset 4, -8
 4886              		.cfi_offset 14, -4
 4887              	.LVL626:
1868:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0x0;
 4888              		.loc 1 1868 0
 4889 0002 0948     		ldr	r0, .L465
1869:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_STOP_TRANSMISSION;
 4890              		.loc 1 1869 0
 4891 0004 0022     		movs	r2, #0
 4892 0006 0C24     		movs	r4, #12
 4893 0008 80E81400 		stmia	r0, {r2, r4}
1870:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 4894              		.loc 1 1870 0
 4895 000c 4021     		movs	r1, #64
 4896 000e 8160     		str	r1, [r0, #8]
1871:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 4897              		.loc 1 1871 0
 4898 0010 C260     		str	r2, [r0, #12]
1872:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 4899              		.loc 1 1872 0
 4900 0012 4FF48062 		mov	r2, #1024
 4901 0016 0261     		str	r2, [r0, #16]
1873:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 4902              		.loc 1 1873 0
 4903 0018 FFF7FEFF 		bl	SDIO_SendCommand
 4904              	.LVL627:
1875:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 4905              		.loc 1 1875 0
 4906 001c 2046     		mov	r0, r4
1878:lib/ff/sdio_stm32f1.c **** }
 4907              		.loc 1 1878 0
 4908 001e BDE81040 		pop	{r4, lr}
1875:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_STOP_TRANSMISSION);
 4909              		.loc 1 1875 0
 4910 0022 FFF7FEBF 		b	CmdResp1Error
 4911              	.LVL628:
 4912              	.L466:
 4913 0026 00BF     		.align	2
 4914              	.L465:
 4915 0028 00000000 		.word	.LANCHOR0
 4916              		.cfi_endproc
 4917              	.LFE73:
 4919              		.section	.text.SD_Erase,"ax",%progbits
 4920              		.align	1
 4921              		.global	SD_Erase
 4922              		.thumb
 4923              		.thumb_func
 4925              	SD_Erase:
 4926              	.LFB74:
1890:lib/ff/sdio_stm32f1.c **** {
 4927              		.loc 1 1890 0
 4928              		.cfi_startproc
 4929              		@ args = 0, pretend = 0, frame = 8
 4930              		@ frame_needed = 0, uses_anonymous_args = 0
 4931              	.LVL629:
 4932 0000 2DE9F743 		push	{r0, r1, r2, r4, r5, r6, r7, r8, r9, lr}
 4933              	.LCFI24:
 4934              		.cfi_def_cfa_offset 40
 4935              		.cfi_offset 0, -40
 4936              		.cfi_offset 1, -36
 4937              		.cfi_offset 2, -32
 4938              		.cfi_offset 4, -28
 4939              		.cfi_offset 5, -24
 4940              		.cfi_offset 6, -20
 4941              		.cfi_offset 7, -16
 4942              		.cfi_offset 8, -12
 4943              		.cfi_offset 9, -8
 4944              		.cfi_offset 14, -4
 4945 0004 0646     		mov	r6, r0
 4946 0006 0D46     		mov	r5, r1
 4947              	.LVL630:
1893:lib/ff/sdio_stm32f1.c ****   __IO uint32_t maxdelay = 0;
 4948              		.loc 1 1893 0
 4949 0008 0020     		movs	r0, #0
 4950              	.LVL631:
 4951 000a 0190     		str	r0, [sp, #4]
 4952              	.LVL632:
1894:lib/ff/sdio_stm32f1.c ****   uint8_t cardstate = 0;
 4953              		.loc 1 1894 0
 4954 000c 8DF80300 		strb	r0, [sp, #3]
 4955              	.LVL633:
1897:lib/ff/sdio_stm32f1.c ****   if (((CSD_Tab[1] >> 20) & SD_CCCC_ERASE) == 0)
 4956              		.loc 1 1897 0
 4957 0010 334B     		ldr	r3, .L479
 4958 0012 5968     		ldr	r1, [r3, #4]
 4959              	.LVL634:
 4960 0014 8A01     		lsls	r2, r1, #6
 4961 0016 5ED5     		bpl	.L476
1903:lib/ff/sdio_stm32f1.c ****   maxdelay = 120000 / ((SDIO->CLKCR & 0xFF) + 2);
 4962              		.loc 1 1903 0
 4963 0018 324A     		ldr	r2, .L479+4
 4964 001a 5368     		ldr	r3, [r2, #4]
 4965 001c D9B2     		uxtb	r1, r3
 4966 001e 8B1C     		adds	r3, r1, #2
 4967 0020 314A     		ldr	r2, .L479+8
 4968 0022 B2FBF3F1 		udiv	r1, r2, r3
 4969              	.LVL635:
 4970 0026 0191     		str	r1, [sp, #4]
 4971              	.LVL636:
1905:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 4972              		.loc 1 1905 0
 4973 0028 FFF7FEFF 		bl	SDIO_GetResponse
 4974              	.LVL637:
 4975 002c 8301     		lsls	r3, r0, #6
 4976 002e 54D4     		bmi	.L477
1911:lib/ff/sdio_stm32f1.c ****   if (CardType == SDIO_HIGH_CAPACITY_SD_CARD)
 4977              		.loc 1 1911 0
 4978 0030 2E48     		ldr	r0, .L479+12
 4979 0032 0468     		ldr	r4, [r0, #0]
 4980 0034 022C     		cmp	r4, #2
 4981 0036 02D1     		bne	.L469
1913:lib/ff/sdio_stm32f1.c ****     startaddr /= 512;
 4982              		.loc 1 1913 0
 4983 0038 760A     		lsrs	r6, r6, #9
 4984              	.LVL638:
1914:lib/ff/sdio_stm32f1.c ****     endaddr /= 512;
 4985              		.loc 1 1914 0
 4986 003a 6D0A     		lsrs	r5, r5, #9
 4987              	.LVL639:
 4988 003c 13E0     		b	.L470
 4989              	.L469:
1918:lib/ff/sdio_stm32f1.c ****   if ((SDIO_STD_CAPACITY_SD_CARD_V1_1 == CardType) || (SDIO_STD_CAPACITY_SD_CARD_V2_0 == CardType) 
 4990              		.loc 1 1918 0
 4991 003e 12D9     		bls	.L470
 4992              	.LVL640:
 4993              	.L472:
1950:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0;
 4994              		.loc 1 1950 0
 4995 0040 2B48     		ldr	r0, .L479+16
1951:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_ERASE;
 4996              		.loc 1 1951 0
 4997 0042 0024     		movs	r4, #0
 4998 0044 2625     		movs	r5, #38
 4999 0046 80E83000 		stmia	r0, {r4, r5}
1952:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5000              		.loc 1 1952 0
 5001 004a 4023     		movs	r3, #64
 5002 004c 8360     		str	r3, [r0, #8]
1953:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5003              		.loc 1 1953 0
 5004 004e C460     		str	r4, [r0, #12]
1954:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5005              		.loc 1 1954 0
 5006 0050 4FF48062 		mov	r2, #1024
 5007 0054 0261     		str	r2, [r0, #16]
1955:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 5008              		.loc 1 1955 0
 5009 0056 FFF7FEFF 		bl	SDIO_SendCommand
 5010              	.LVL641:
1957:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_ERASE);
 5011              		.loc 1 1957 0
 5012 005a 2846     		mov	r0, r5
 5013 005c FFF7FEFF 		bl	CmdResp1Error
 5014              	.LVL642:
1959:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 5015              		.loc 1 1959 0
 5016 0060 2A28     		cmp	r0, #42
 5017 0062 3BD1     		bne	.L468
 5018 0064 26E0     		b	.L471
 5019              	.LVL643:
 5020              	.L470:
1921:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = startaddr;
 5021              		.loc 1 1921 0
 5022 0066 224C     		ldr	r4, .L479+16
 5023 0068 2660     		str	r6, [r4, #0]
1922:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_ERASE_GRP_START;
 5024              		.loc 1 1922 0
 5025 006a 4FF02009 		mov	r9, #32
 5026 006e C4F80490 		str	r9, [r4, #4]
1923:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5027              		.loc 1 1923 0
 5028 0072 4FF04008 		mov	r8, #64
 5029 0076 C4F80880 		str	r8, [r4, #8]
1924:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5030              		.loc 1 1924 0
 5031 007a 0027     		movs	r7, #0
 5032 007c E760     		str	r7, [r4, #12]
1925:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5033              		.loc 1 1925 0
 5034 007e 4FF48066 		mov	r6, #1024
 5035              	.LVL644:
 5036 0082 2661     		str	r6, [r4, #16]
1926:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 5037              		.loc 1 1926 0
 5038 0084 2046     		mov	r0, r4
 5039 0086 FFF7FEFF 		bl	SDIO_SendCommand
 5040              	.LVL645:
1928:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SD_ERASE_GRP_START);
 5041              		.loc 1 1928 0
 5042 008a 4846     		mov	r0, r9
 5043 008c FFF7FEFF 		bl	CmdResp1Error
 5044              	.LVL646:
1929:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 5045              		.loc 1 1929 0
 5046 0090 2A28     		cmp	r0, #42
 5047 0092 23D1     		bne	.L468
1935:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Argument = endaddr;
 5048              		.loc 1 1935 0
 5049 0094 2560     		str	r5, [r4, #0]
1936:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_ERASE_GRP_END;
 5050              		.loc 1 1936 0
 5051 0096 2125     		movs	r5, #33
 5052              	.LVL647:
 5053 0098 6560     		str	r5, [r4, #4]
1937:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5054              		.loc 1 1937 0
 5055 009a C4F80880 		str	r8, [r4, #8]
1938:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5056              		.loc 1 1938 0
 5057 009e E760     		str	r7, [r4, #12]
1939:lib/ff/sdio_stm32f1.c ****     SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5058              		.loc 1 1939 0
 5059 00a0 2661     		str	r6, [r4, #16]
1940:lib/ff/sdio_stm32f1.c ****     SDIO_SendCommand(&SDIO_CmdInitStructure);
 5060              		.loc 1 1940 0
 5061 00a2 2046     		mov	r0, r4
 5062              	.LVL648:
 5063 00a4 FFF7FEFF 		bl	SDIO_SendCommand
 5064              	.LVL649:
1942:lib/ff/sdio_stm32f1.c ****     errorstatus = CmdResp1Error(SD_CMD_SD_ERASE_GRP_END);
 5065              		.loc 1 1942 0
 5066 00a8 2846     		mov	r0, r5
 5067 00aa FFF7FEFF 		bl	CmdResp1Error
 5068              	.LVL650:
1943:lib/ff/sdio_stm32f1.c ****     if (errorstatus != SD_OK)
 5069              		.loc 1 1943 0
 5070 00ae 2A28     		cmp	r0, #42
 5071 00b0 14D1     		bne	.L468
 5072 00b2 C5E7     		b	.L472
 5073              	.LVL651:
 5074              	.L471:
1964:lib/ff/sdio_stm32f1.c ****   for (delay = 0; delay < maxdelay; delay++)
 5075              		.loc 1 1964 0 discriminator 1
 5076 00b4 0199     		ldr	r1, [sp, #4]
 5077 00b6 8C42     		cmp	r4, r1
 5078 00b8 06D2     		bcs	.L475
 5079              	.L473:
1964:lib/ff/sdio_stm32f1.c ****   for (delay = 0; delay < maxdelay; delay++)
 5080              		.loc 1 1964 0 is_stmt 0 discriminator 2
 5081 00ba 0134     		adds	r4, r4, #1
 5082              	.LVL652:
 5083 00bc FAE7     		b	.L471
 5084              	.L478:
1970:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((SD_CARD_PROGRAMMING == cardstate) || (SD_CARD_RECEIVING == car
 5085              		.loc 1 1970 0 is_stmt 1 discriminator 2
 5086 00be 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 5087              	.LVL653:
 5088 00c2 9A1F     		subs	r2, r3, #6
 5089              	.LVL654:
 5090 00c4 012A     		cmp	r2, #1
 5091 00c6 09D8     		bhi	.L468
 5092              	.LVL655:
 5093              	.L475:
1972:lib/ff/sdio_stm32f1.c ****     errorstatus = IsCardProgramming(&cardstate);
 5094              		.loc 1 1972 0
 5095 00c8 0DF10300 		add	r0, sp, #3
 5096 00cc FFF7FEFF 		bl	IsCardProgramming
 5097              	.LVL656:
1970:lib/ff/sdio_stm32f1.c ****   while ((errorstatus == SD_OK) && ((SD_CARD_PROGRAMMING == cardstate) || (SD_CARD_RECEIVING == car
 5098              		.loc 1 1970 0
 5099 00d0 2A28     		cmp	r0, #42
 5100 00d2 F4D0     		beq	.L478
 5101 00d4 02E0     		b	.L468
 5102              	.LVL657:
 5103              	.L476:
1900:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5104              		.loc 1 1900 0
 5105 00d6 2520     		movs	r0, #37
 5106 00d8 00E0     		b	.L468
 5107              	.L477:
1908:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5108              		.loc 1 1908 0
 5109 00da 0E20     		movs	r0, #14
 5110              	.LVL658:
 5111              	.L468:
1976:lib/ff/sdio_stm32f1.c **** }
 5112              		.loc 1 1976 0
 5113 00dc BDE8FE83 		pop	{r1, r2, r3, r4, r5, r6, r7, r8, r9, pc}
 5114              	.L480:
 5115              		.align	2
 5116              	.L479:
 5117 00e0 00000000 		.word	.LANCHOR6
 5118 00e4 00800140 		.word	1073840128
 5119 00e8 C0D40100 		.word	120000
 5120 00ec 00000000 		.word	.LANCHOR4
 5121 00f0 00000000 		.word	.LANCHOR0
 5122              		.cfi_endproc
 5123              	.LFE74:
 5125              		.section	.text.SD_SendStatus,"ax",%progbits
 5126              		.align	1
 5127              		.global	SD_SendStatus
 5128              		.thumb
 5129              		.thumb_func
 5131              	SD_SendStatus:
 5132              	.LFB75:
1988:lib/ff/sdio_stm32f1.c **** {
 5133              		.loc 1 1988 0
 5134              		.cfi_startproc
 5135              		@ args = 0, pretend = 0, frame = 0
 5136              		@ frame_needed = 0, uses_anonymous_args = 0
 5137              	.LVL659:
 5138 0000 70B5     		push	{r4, r5, r6, lr}
 5139              	.LCFI25:
 5140              		.cfi_def_cfa_offset 16
 5141              		.cfi_offset 4, -16
 5142              		.cfi_offset 5, -12
 5143              		.cfi_offset 6, -8
 5144              		.cfi_offset 14, -4
 5145              	.LVL660:
1991:lib/ff/sdio_stm32f1.c ****   if (pcardstatus == NULL)
 5146              		.loc 1 1991 0
 5147 0002 0546     		mov	r5, r0
 5148 0004 D0B1     		cbz	r0, .L483
1997:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
 5149              		.loc 1 1997 0
 5150 0006 0F48     		ldr	r0, .L484
 5151              	.LVL661:
 5152 0008 0F4A     		ldr	r2, .L484+4
 5153 000a 1168     		ldr	r1, [r2, #0]
 5154 000c 0B04     		lsls	r3, r1, #16
 5155 000e 0360     		str	r3, [r0, #0]
1998:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SEND_STATUS;
 5156              		.loc 1 1998 0
 5157 0010 0D24     		movs	r4, #13
 5158 0012 4460     		str	r4, [r0, #4]
1999:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5159              		.loc 1 1999 0
 5160 0014 4026     		movs	r6, #64
 5161 0016 8660     		str	r6, [r0, #8]
2000:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5162              		.loc 1 2000 0
 5163 0018 0026     		movs	r6, #0
 5164 001a C660     		str	r6, [r0, #12]
2001:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5165              		.loc 1 2001 0
 5166 001c 4FF48062 		mov	r2, #1024
 5167 0020 0261     		str	r2, [r0, #16]
2002:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 5168              		.loc 1 2002 0
 5169 0022 FFF7FEFF 		bl	SDIO_SendCommand
 5170              	.LVL662:
2005:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SEND_STATUS);
 5171              		.loc 1 2005 0
 5172 0026 2046     		mov	r0, r4
 5173 0028 FFF7FEFF 		bl	CmdResp1Error
 5174              	.LVL663:
 5175 002c 0446     		mov	r4, r0
 5176              	.LVL664:
2007:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 5177              		.loc 1 2007 0
 5178 002e 2A28     		cmp	r0, #42
 5179 0030 05D1     		bne	.L482
2012:lib/ff/sdio_stm32f1.c ****   *pcardstatus = SDIO_GetResponse(SDIO_RESP1);
 5180              		.loc 1 2012 0
 5181 0032 3046     		mov	r0, r6
 5182              	.LVL665:
 5183 0034 FFF7FEFF 		bl	SDIO_GetResponse
 5184              	.LVL666:
 5185 0038 2860     		str	r0, [r5, #0]
2014:lib/ff/sdio_stm32f1.c ****   return(errorstatus);
 5186              		.loc 1 2014 0
 5187 003a 00E0     		b	.L482
 5188              	.LVL667:
 5189              	.L483:
1994:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5190              		.loc 1 1994 0
 5191 003c 2624     		movs	r4, #38
 5192              	.LVL668:
 5193              	.L482:
2015:lib/ff/sdio_stm32f1.c **** }
 5194              		.loc 1 2015 0
 5195 003e 2046     		mov	r0, r4
 5196 0040 70BD     		pop	{r4, r5, r6, pc}
 5197              	.L485:
 5198 0042 00BF     		.align	2
 5199              	.L484:
 5200 0044 00000000 		.word	.LANCHOR0
 5201 0048 00000000 		.word	.LANCHOR1
 5202              		.cfi_endproc
 5203              	.LFE75:
 5205              		.section	.text.SD_GetState,"ax",%progbits
 5206              		.align	1
 5207              		.global	SD_GetState
 5208              		.thumb
 5209              		.thumb_func
 5211              	SD_GetState:
 5212              	.LFB59:
 312:lib/ff/sdio_stm32f1.c **** {
 5213              		.loc 1 312 0
 5214              		.cfi_startproc
 5215              		@ args = 0, pretend = 0, frame = 8
 5216              		@ frame_needed = 0, uses_anonymous_args = 0
 5217 0000 07B5     		push	{r0, r1, r2, lr}
 5218              	.LCFI26:
 5219              		.cfi_def_cfa_offset 16
 5220              		.cfi_offset 0, -16
 5221              		.cfi_offset 1, -12
 5222              		.cfi_offset 2, -8
 5223              		.cfi_offset 14, -4
 313:lib/ff/sdio_stm32f1.c ****   uint32_t resp1 = 0;
 5224              		.loc 1 313 0
 5225 0002 0023     		movs	r3, #0
 5226 0004 0193     		str	r3, [sp, #4]
 5227              	.LVL669:
 5228              	.LBB72:
 5229              	.LBB73:
 342:lib/ff/sdio_stm32f1.c ****   __IO uint8_t status = SD_PRESENT;
 5230              		.loc 1 342 0
 5231 0006 0120     		movs	r0, #1
 5232 0008 8DF80300 		strb	r0, [sp, #3]
 5233              	.LVL670:
 352:lib/ff/sdio_stm32f1.c ****   return status;
 5234              		.loc 1 352 0
 5235 000c 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 5236              	.LVL671:
 5237              	.LBE73:
 5238              	.LBE72:
 315:lib/ff/sdio_stm32f1.c ****   if(SD_Detect()== SD_PRESENT)
 5239              		.loc 1 315 0
 5240 0010 0129     		cmp	r1, #1
 5241 0012 01D0     		beq	.L487
 5242              	.L489:
 328:lib/ff/sdio_stm32f1.c ****     return SD_CARD_ERROR;
 5243              		.loc 1 328 0
 5244 0014 FF20     		movs	r0, #255
 5245 0016 07E0     		b	.L488
 5246              	.L487:
 317:lib/ff/sdio_stm32f1.c ****     if (SD_SendStatus(&resp1) != SD_OK)
 5247              		.loc 1 317 0
 5248 0018 01A8     		add	r0, sp, #4
 5249 001a FFF7FEFF 		bl	SD_SendStatus
 5250              	.LVL672:
 5251 001e 2A28     		cmp	r0, #42
 5252 0020 F8D1     		bne	.L489
 323:lib/ff/sdio_stm32f1.c ****       return (SDCardState)((resp1 >> 9) & 0x0F);
 5253              		.loc 1 323 0
 5254 0022 019A     		ldr	r2, [sp, #4]
 5255 0024 C2F34320 		ubfx	r0, r2, #9, #4
 5256              	.LVL673:
 5257              	.L488:
 330:lib/ff/sdio_stm32f1.c **** }
 5258              		.loc 1 330 0
 5259 0028 0EBD     		pop	{r1, r2, r3, pc}
 5260              		.cfi_endproc
 5261              	.LFE59:
 5263              		.section	.text.SD_GetStatus,"ax",%progbits
 5264              		.align	1
 5265              		.global	SD_GetStatus
 5266              		.thumb
 5267              		.thumb_func
 5269              	SD_GetStatus:
 5270              	.LFB58:
 284:lib/ff/sdio_stm32f1.c **** {
 5271              		.loc 1 284 0
 5272              		.cfi_startproc
 5273              		@ args = 0, pretend = 0, frame = 0
 5274              		@ frame_needed = 0, uses_anonymous_args = 0
 5275 0000 08B5     		push	{r3, lr}
 5276              	.LCFI27:
 5277              		.cfi_def_cfa_offset 8
 5278              		.cfi_offset 3, -8
 5279              		.cfi_offset 14, -4
 5280              	.LVL674:
 287:lib/ff/sdio_stm32f1.c ****   cardstate = SD_GetState();
 5281              		.loc 1 287 0
 5282 0002 FFF7FEFF 		bl	SD_GetState
 5283              	.LVL675:
 289:lib/ff/sdio_stm32f1.c ****   if (cardstate == SD_CARD_TRANSFER)
 5284              		.loc 1 289 0
 5285 0006 0428     		cmp	r0, #4
 5286 0008 04D0     		beq	.L492
 295:lib/ff/sdio_stm32f1.c ****     return (SD_TRANSFER_ERROR);
 5287              		.loc 1 295 0
 5288 000a FF28     		cmp	r0, #255
 5289 000c 14BF     		ite	ne
 5290 000e 0120     		movne	r0, #1
 5291 0010 0220     		moveq	r0, #2
 5292              	.LVL676:
 5293 0012 08BD     		pop	{r3, pc}
 5294              	.LVL677:
 5295              	.L492:
 291:lib/ff/sdio_stm32f1.c ****     return(SD_TRANSFER_OK);
 5296              		.loc 1 291 0
 5297 0014 0020     		movs	r0, #0
 5298              	.LVL678:
 301:lib/ff/sdio_stm32f1.c **** }
 5299              		.loc 1 301 0
 5300 0016 08BD     		pop	{r3, pc}
 5301              		.cfi_endproc
 5302              	.LFE58:
 5304              		.section	.text.SD_SendSDStatus,"ax",%progbits
 5305              		.align	1
 5306              		.global	SD_SendSDStatus
 5307              		.thumb
 5308              		.thumb_func
 5310              	SD_SendSDStatus:
 5311              	.LFB76:
2027:lib/ff/sdio_stm32f1.c **** {
 5312              		.loc 1 2027 0
 5313              		.cfi_startproc
 5314              		@ args = 0, pretend = 0, frame = 0
 5315              		@ frame_needed = 0, uses_anonymous_args = 0
 5316              	.LVL679:
 5317 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 5318              	.LCFI28:
 5319              		.cfi_def_cfa_offset 32
 5320              		.cfi_offset 3, -32
 5321              		.cfi_offset 4, -28
 5322              		.cfi_offset 5, -24
 5323              		.cfi_offset 6, -20
 5324              		.cfi_offset 7, -16
 5325              		.cfi_offset 8, -12
 5326              		.cfi_offset 9, -8
 5327              		.cfi_offset 14, -4
 5328 0004 0646     		mov	r6, r0
 5329              	.LVL680:
2031:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED)
 5330              		.loc 1 2031 0
 5331 0006 0020     		movs	r0, #0
 5332              	.LVL681:
 5333 0008 FFF7FEFF 		bl	SDIO_GetResponse
 5334              	.LVL682:
 5335 000c 10F00077 		ands	r7, r0, #33554432
 5336 0010 40F09B80 		bne	.L507
2038:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 64;
 5337              		.loc 1 2038 0
 5338 0014 4F4C     		ldr	r4, .L519
 5339 0016 4FF04008 		mov	r8, #64
 5340 001a C4F80080 		str	r8, [r4, #0]
2039:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SET_BLOCKLEN;
 5341              		.loc 1 2039 0
 5342 001e 1025     		movs	r5, #16
 5343 0020 6560     		str	r5, [r4, #4]
2040:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5344              		.loc 1 2040 0
 5345 0022 C4F80880 		str	r8, [r4, #8]
2041:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5346              		.loc 1 2041 0
 5347 0026 E760     		str	r7, [r4, #12]
2042:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5348              		.loc 1 2042 0
 5349 0028 4FF48069 		mov	r9, #1024
 5350 002c C4F81090 		str	r9, [r4, #16]
2043:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 5351              		.loc 1 2043 0
 5352 0030 2046     		mov	r0, r4
 5353 0032 FFF7FEFF 		bl	SDIO_SendCommand
 5354              	.LVL683:
2045:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SET_BLOCKLEN);
 5355              		.loc 1 2045 0
 5356 0036 2846     		mov	r0, r5
 5357 0038 FFF7FEFF 		bl	CmdResp1Error
 5358              	.LVL684:
 5359 003c 0546     		mov	r5, r0
 5360              	.LVL685:
2047:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 5361              		.loc 1 2047 0
 5362 003e 2A28     		cmp	r0, #42
 5363 0040 40F08480 		bne	.L495
2053:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = (uint32_t) RCA << 16;
 5364              		.loc 1 2053 0
 5365 0044 444B     		ldr	r3, .L519+4
 5366 0046 1868     		ldr	r0, [r3, #0]
 5367              	.LVL686:
 5368 0048 0104     		lsls	r1, r0, #16
 5369 004a 2160     		str	r1, [r4, #0]
2054:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_APP_CMD;
 5370              		.loc 1 2054 0
 5371 004c 3725     		movs	r5, #55
 5372              	.LVL687:
 5373 004e 6560     		str	r5, [r4, #4]
2055:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5374              		.loc 1 2055 0
 5375 0050 C4F80880 		str	r8, [r4, #8]
2056:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5376              		.loc 1 2056 0
 5377 0054 E760     		str	r7, [r4, #12]
2057:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5378              		.loc 1 2057 0
 5379 0056 C4F81090 		str	r9, [r4, #16]
2058:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 5380              		.loc 1 2058 0
 5381 005a 2046     		mov	r0, r4
 5382 005c FFF7FEFF 		bl	SDIO_SendCommand
 5383              	.LVL688:
2059:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_APP_CMD);
 5384              		.loc 1 2059 0
 5385 0060 2846     		mov	r0, r5
 5386 0062 FFF7FEFF 		bl	CmdResp1Error
 5387              	.LVL689:
 5388 0066 0546     		mov	r5, r0
 5389              	.LVL690:
2061:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 5390              		.loc 1 2061 0
 5391 0068 2A28     		cmp	r0, #42
 5392 006a 6FD1     		bne	.L495
2066:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataTimeOut = SD_DATATIMEOUT;
 5393              		.loc 1 2066 0
 5394 006c 3B48     		ldr	r0, .L519+8
 5395              	.LVL691:
 5396 006e 3C4B     		ldr	r3, .L519+12
2067:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataLength = 64;
 5397              		.loc 1 2067 0
 5398 0070 80E80801 		stmia	r0, {r3, r8}
2068:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DataBlockSize = SDIO_DataBlockSize_64b;
 5399              		.loc 1 2068 0
 5400 0074 6022     		movs	r2, #96
 5401 0076 8260     		str	r2, [r0, #8]
2069:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferDir = SDIO_TransferDir_ToSDIO;
 5402              		.loc 1 2069 0
 5403 0078 0223     		movs	r3, #2
 5404 007a C360     		str	r3, [r0, #12]
2070:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_TransferMode = SDIO_TransferMode_Block;
 5405              		.loc 1 2070 0
 5406 007c 0761     		str	r7, [r0, #16]
2071:lib/ff/sdio_stm32f1.c ****   SDIO_DataInitStructure.SDIO_DPSM = SDIO_DPSM_Enable;
 5407              		.loc 1 2071 0
 5408 007e 0121     		movs	r1, #1
 5409 0080 4161     		str	r1, [r0, #20]
2072:lib/ff/sdio_stm32f1.c ****   SDIO_DataConfig(&SDIO_DataInitStructure);
 5410              		.loc 1 2072 0
 5411 0082 FFF7FEFF 		bl	SDIO_DataConfig
 5412              	.LVL692:
2075:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Argument = 0;
 5413              		.loc 1 2075 0
 5414 0086 2760     		str	r7, [r4, #0]
2076:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CmdIndex = SD_CMD_SD_APP_STAUS;
 5415              		.loc 1 2076 0
 5416 0088 0D25     		movs	r5, #13
 5417              	.LVL693:
 5418 008a 6560     		str	r5, [r4, #4]
2077:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Response = SDIO_Response_Short;
 5419              		.loc 1 2077 0
 5420 008c C4F80880 		str	r8, [r4, #8]
2078:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_Wait = SDIO_Wait_No;
 5421              		.loc 1 2078 0
 5422 0090 E760     		str	r7, [r4, #12]
2079:lib/ff/sdio_stm32f1.c ****   SDIO_CmdInitStructure.SDIO_CPSM = SDIO_CPSM_Enable;
 5423              		.loc 1 2079 0
 5424 0092 C4F81090 		str	r9, [r4, #16]
2080:lib/ff/sdio_stm32f1.c ****   SDIO_SendCommand(&SDIO_CmdInitStructure);
 5425              		.loc 1 2080 0
 5426 0096 2046     		mov	r0, r4
 5427 0098 FFF7FEFF 		bl	SDIO_SendCommand
 5428              	.LVL694:
2081:lib/ff/sdio_stm32f1.c ****   errorstatus = CmdResp1Error(SD_CMD_SD_APP_STAUS);
 5429              		.loc 1 2081 0
 5430 009c 2846     		mov	r0, r5
 5431 009e FFF7FEFF 		bl	CmdResp1Error
 5432              	.LVL695:
 5433 00a2 0546     		mov	r5, r0
 5434              	.LVL696:
2083:lib/ff/sdio_stm32f1.c ****   if (errorstatus != SD_OK)
 5435              		.loc 1 2083 0
 5436 00a4 2A28     		cmp	r0, #42
 5437 00a6 51D1     		bne	.L495
 5438              	.LVL697:
 5439              	.L515:
2088:lib/ff/sdio_stm32f1.c ****   while (!(SDIO->STA &(SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | SDIO_FLAG_DBCK
 5440              		.loc 1 2088 0 discriminator 1
 5441 00a8 2E4C     		ldr	r4, .L519+16
 5442 00aa 606B     		ldr	r0, [r4, #52]
 5443 00ac 40F22A64 		movw	r4, #1578
 5444 00b0 0440     		ands	r4, r4, r0
 5445 00b2 6CB9     		cbnz	r4, .L517
 5446              	.L499:
2090:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetFlagStatus(SDIO_FLAG_RXFIFOHF) != RESET)
 5447              		.loc 1 2090 0
 5448 00b4 4FF40040 		mov	r0, #32768
 5449 00b8 FFF7FEFF 		bl	SDIO_GetFlagStatus
 5450              	.LVL698:
 5451 00bc 0028     		cmp	r0, #0
 5452 00be F3D0     		beq	.L515
 5453              	.L498:
2094:lib/ff/sdio_stm32f1.c ****         *(psdstatus + count) = SDIO_ReadData();
 5454              		.loc 1 2094 0 discriminator 2
 5455 00c0 FFF7FEFF 		bl	SDIO_ReadData
 5456              	.LVL699:
 5457 00c4 3051     		str	r0, [r6, r4]
 5458 00c6 0434     		adds	r4, r4, #4
2092:lib/ff/sdio_stm32f1.c ****       for (count = 0; count < 8; count++)
 5459              		.loc 1 2092 0 discriminator 2
 5460 00c8 202C     		cmp	r4, #32
 5461 00ca F9D1     		bne	.L498
2096:lib/ff/sdio_stm32f1.c ****       psdstatus += 8;
 5462              		.loc 1 2096 0
 5463 00cc 2036     		adds	r6, r6, #32
 5464              	.LVL700:
 5465 00ce EBE7     		b	.L515
 5466              	.L517:
2100:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetFlagStatus(SDIO_FLAG_DTIMEOUT) != RESET)
 5467              		.loc 1 2100 0
 5468 00d0 0820     		movs	r0, #8
 5469 00d2 FFF7FEFF 		bl	SDIO_GetFlagStatus
 5470              	.LVL701:
 5471 00d6 20B1     		cbz	r0, .L500
2102:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DTIMEOUT);
 5472              		.loc 1 2102 0
 5473 00d8 0820     		movs	r0, #8
 5474 00da FFF7FEFF 		bl	SDIO_ClearFlag
 5475              	.LVL702:
2104:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5476              		.loc 1 2104 0
 5477 00de 0425     		movs	r5, #4
 5478 00e0 34E0     		b	.L495
 5479              	.LVL703:
 5480              	.L500:
2106:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_DCRCFAIL) != RESET)
 5481              		.loc 1 2106 0
 5482 00e2 0220     		movs	r0, #2
 5483 00e4 FFF7FEFF 		bl	SDIO_GetFlagStatus
 5484              	.LVL704:
 5485 00e8 20B1     		cbz	r0, .L501
2108:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_DCRCFAIL);
 5486              		.loc 1 2108 0
 5487 00ea 0220     		movs	r0, #2
 5488 00ec FFF7FEFF 		bl	SDIO_ClearFlag
 5489              	.LVL705:
2110:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5490              		.loc 1 2110 0
 5491 00f0 0225     		movs	r5, #2
 5492 00f2 2BE0     		b	.L495
 5493              	.LVL706:
 5494              	.L501:
2112:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_RXOVERR) != RESET)
 5495              		.loc 1 2112 0
 5496 00f4 2020     		movs	r0, #32
 5497 00f6 FFF7FEFF 		bl	SDIO_GetFlagStatus
 5498              	.LVL707:
 5499 00fa 20B1     		cbz	r0, .L502
2114:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_RXOVERR);
 5500              		.loc 1 2114 0
 5501 00fc 2020     		movs	r0, #32
 5502 00fe FFF7FEFF 		bl	SDIO_ClearFlag
 5503              	.LVL708:
2116:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5504              		.loc 1 2116 0
 5505 0102 0625     		movs	r5, #6
 5506 0104 22E0     		b	.L495
 5507              	.LVL709:
 5508              	.L502:
2118:lib/ff/sdio_stm32f1.c ****   else if (SDIO_GetFlagStatus(SDIO_FLAG_STBITERR) != RESET)
 5509              		.loc 1 2118 0
 5510 0106 4FF40070 		mov	r0, #512
 5511 010a FFF7FEFF 		bl	SDIO_GetFlagStatus
 5512              	.LVL710:
 5513 010e 28B1     		cbz	r0, .L516
2120:lib/ff/sdio_stm32f1.c ****     SDIO_ClearFlag(SDIO_FLAG_STBITERR);
 5514              		.loc 1 2120 0
 5515 0110 4FF40070 		mov	r0, #512
 5516 0114 FFF7FEFF 		bl	SDIO_ClearFlag
 5517              	.LVL711:
2122:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5518              		.loc 1 2122 0
 5519 0118 0725     		movs	r5, #7
 5520 011a 17E0     		b	.L495
 5521              	.LVL712:
 5522              	.L516:
2125:lib/ff/sdio_stm32f1.c ****   while (SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)
 5523              		.loc 1 2125 0 discriminator 1
 5524 011c 4FF40010 		mov	r0, #2097152
 5525 0120 FFF7FEFF 		bl	SDIO_GetFlagStatus
 5526              	.LVL713:
 5527 0124 20B1     		cbz	r0, .L518
 5528              	.L505:
2127:lib/ff/sdio_stm32f1.c ****     *psdstatus = SDIO_ReadData();
 5529              		.loc 1 2127 0
 5530 0126 FFF7FEFF 		bl	SDIO_ReadData
 5531              	.LVL714:
 5532 012a 46F8040B 		str	r0, [r6], #4
 5533              	.LVL715:
 5534 012e F5E7     		b	.L516
 5535              	.LVL716:
 5536              	.L518:
2132:lib/ff/sdio_stm32f1.c ****   SDIO_ClearFlag(SDIO_STATIC_FLAGS);
 5537              		.loc 1 2132 0
 5538 0130 40F2FF50 		movw	r0, #1535
 5539 0134 FFF7FEFF 		bl	SDIO_ClearFlag
 5540              	.LVL717:
2133:lib/ff/sdio_stm32f1.c ****   psdstatus -= 16;
 5541              		.loc 1 2133 0
 5542 0138 A6F14003 		sub	r3, r6, #64
 5543              	.LVL718:
 5544              	.L506:
2136:lib/ff/sdio_stm32f1.c ****     psdstatus[count] = ((psdstatus[count] & SD_0TO7BITS) << 24) |((psdstatus[count] & SD_8TO15BITS)
 5545              		.loc 1 2136 0 discriminator 2
 5546 013c 1A68     		ldr	r2, [r3, #0]
 5547 013e 11BA     		rev	r1, r2
 5548 0140 43F8041B 		str	r1, [r3], #4
2134:lib/ff/sdio_stm32f1.c ****   for (count = 0; count < 16; count++)
 5549              		.loc 1 2134 0 discriminator 2
 5550 0144 B342     		cmp	r3, r6
 5551 0146 F9D1     		bne	.L506
 5552 0148 00E0     		b	.L495
 5553              	.LVL719:
 5554              	.L507:
2034:lib/ff/sdio_stm32f1.c ****     return(errorstatus);
 5555              		.loc 1 2034 0
 5556 014a 0E25     		movs	r5, #14
 5557              	.LVL720:
 5558              	.L495:
2140:lib/ff/sdio_stm32f1.c **** }
 5559              		.loc 1 2140 0
 5560 014c 2846     		mov	r0, r5
 5561 014e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 5562              	.L520:
 5563 0152 00BF     		.align	2
 5564              	.L519:
 5565 0154 00000000 		.word	.LANCHOR0
 5566 0158 00000000 		.word	.LANCHOR1
 5567 015c 00000000 		.word	.LANCHOR2
 5568 0160 FFFF0F00 		.word	1048575
 5569 0164 00800140 		.word	1073840128
 5570              		.cfi_endproc
 5571              	.LFE76:
 5573              		.section	.text.SD_ProcessIRQSrc,"ax",%progbits
 5574              		.align	1
 5575              		.global	SD_ProcessIRQSrc
 5576              		.thumb
 5577              		.thumb_func
 5579              	SD_ProcessIRQSrc:
 5580              	.LFB77:
2151:lib/ff/sdio_stm32f1.c **** {
 5581              		.loc 1 2151 0
 5582              		.cfi_startproc
 5583              		@ args = 0, pretend = 0, frame = 0
 5584              		@ frame_needed = 0, uses_anonymous_args = 0
 5585 0000 70B5     		push	{r4, r5, r6, lr}
 5586              	.LCFI29:
 5587              		.cfi_def_cfa_offset 16
 5588              		.cfi_offset 4, -16
 5589              		.cfi_offset 5, -12
 5590              		.cfi_offset 6, -8
 5591              		.cfi_offset 14, -4
 5592              	.LVL721:
2154:lib/ff/sdio_stm32f1.c ****   if (DeviceMode == SD_INTERRUPT_MODE)
 5593              		.loc 1 2154 0
 5594 0002 724B     		ldr	r3, .L559
 5595 0004 1868     		ldr	r0, [r3, #0]
 5596 0006 0128     		cmp	r0, #1
 5597 0008 47D1     		bne	.L523
2156:lib/ff/sdio_stm32f1.c ****     if (SDIO_GetITStatus(SDIO_IT_RXFIFOHF) != RESET)
 5598              		.loc 1 2156 0
 5599 000a 4FF40040 		mov	r0, #32768
 5600 000e FFF7FEFF 		bl	SDIO_GetITStatus
 5601              	.LVL722:
 5602 0012 0446     		mov	r4, r0
 5603 0014 48B1     		cbz	r0, .L524
 5604 0016 0024     		movs	r4, #0
 5605              	.LVL723:
 5606              	.L525:
2160:lib/ff/sdio_stm32f1.c ****         *(DestBuffer + count) = SDIO_ReadData();
 5607              		.loc 1 2160 0 discriminator 2
 5608 0018 6D4D     		ldr	r5, .L559+4
 5609 001a 2E68     		ldr	r6, [r5, #0]
 5610 001c FFF7FEFF 		bl	SDIO_ReadData
 5611              	.LVL724:
 5612 0020 3051     		str	r0, [r6, r4]
 5613 0022 0434     		adds	r4, r4, #4
2158:lib/ff/sdio_stm32f1.c ****       for (count = 0; count < SD_HALFFIFO; count++)
 5614              		.loc 1 2158 0 discriminator 2
 5615 0024 202C     		cmp	r4, #32
 5616 0026 F7D1     		bne	.L525
 5617 0028 30E0     		b	.L556
 5618              	.LVL725:
 5619              	.L524:
2165:lib/ff/sdio_stm32f1.c ****     else if (SDIO_GetITStatus(SDIO_IT_TXFIFOHE) != RESET)
 5620              		.loc 1 2165 0
 5621 002a 4FF48040 		mov	r0, #16384
 5622 002e FFF7FEFF 		bl	SDIO_GetITStatus
 5623              	.LVL726:
 5624 0032 0028     		cmp	r0, #0
 5625 0034 31D0     		beq	.L523
2167:lib/ff/sdio_stm32f1.c ****       if ((TotalNumberOfBytes - NumberOfBytes) < SD_HALFFIFOBYTES)
 5626              		.loc 1 2167 0
 5627 0036 6749     		ldr	r1, .L559+8
 5628 0038 0B68     		ldr	r3, [r1, #0]
 5629 003a 674A     		ldr	r2, .L559+12
 5630 003c 1068     		ldr	r0, [r2, #0]
 5631 003e 191A     		subs	r1, r3, r0
 5632 0040 1F29     		cmp	r1, #31
 5633 0042 1BD8     		bhi	.L527
2169:lib/ff/sdio_stm32f1.c ****         restwords = ((TotalNumberOfBytes - NumberOfBytes) %  4 == 0) ?
 5634              		.loc 1 2169 0
 5635 0044 1668     		ldr	r6, [r2, #0]
 5636 0046 981B     		subs	r0, r3, r6
2170:lib/ff/sdio_stm32f1.c ****                     ((TotalNumberOfBytes - NumberOfBytes) / 4) :
 5637              		.loc 1 2170 0
 5638 0048 1268     		ldr	r2, [r2, #0]
 5639 004a 8107     		lsls	r1, r0, #30
 5640 004c 02D1     		bne	.L528
2170:lib/ff/sdio_stm32f1.c ****                     ((TotalNumberOfBytes - NumberOfBytes) / 4) :
 5641              		.loc 1 2170 0 is_stmt 0 discriminator 1
 5642 004e 9C1A     		subs	r4, r3, r2
 5643 0050 A608     		lsrs	r6, r4, #2
 5644 0052 02E0     		b	.L529
 5645              	.L528:
2171:lib/ff/sdio_stm32f1.c ****                     ((TotalNumberOfBytes - NumberOfBytes) / 4 + 1);
 5646              		.loc 1 2171 0 is_stmt 1 discriminator 2
 5647 0054 991A     		subs	r1, r3, r2
 5648 0056 8B08     		lsrs	r3, r1, #2
2170:lib/ff/sdio_stm32f1.c ****                     ((TotalNumberOfBytes - NumberOfBytes) / 4) :
 5649              		.loc 1 2170 0 discriminator 2
 5650 0058 5E1C     		adds	r6, r3, #1
 5651              	.L529:
 5652              	.LVL727:
2173:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < restwords;  count++, SrcBuffer++, NumberOfBytes += 4)
 5653              		.loc 1 2173 0
 5654 005a 0024     		movs	r4, #0
 5655              	.LVL728:
 5656              	.L530:
2173:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < restwords;  count++, SrcBuffer++, NumberOfBytes += 4)
 5657              		.loc 1 2173 0 is_stmt 0 discriminator 1
 5658 005c B442     		cmp	r4, r6
 5659 005e 1CD0     		beq	.L523
 5660              	.L531:
2175:lib/ff/sdio_stm32f1.c ****           SDIO_WriteData(*SrcBuffer);
 5661              		.loc 1 2175 0 is_stmt 1 discriminator 2
 5662 0060 5E4D     		ldr	r5, .L559+16
 5663 0062 2868     		ldr	r0, [r5, #0]
 5664 0064 0068     		ldr	r0, [r0, #0]
 5665 0066 FFF7FEFF 		bl	SDIO_WriteData
 5666              	.LVL729:
2173:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < restwords;  count++, SrcBuffer++, NumberOfBytes += 4)
 5667              		.loc 1 2173 0 discriminator 2
 5668 006a 0134     		adds	r4, r4, #1
 5669              	.LVL730:
 5670 006c 2A68     		ldr	r2, [r5, #0]
 5671 006e 111D     		adds	r1, r2, #4
 5672 0070 2960     		str	r1, [r5, #0]
 5673 0072 594B     		ldr	r3, .L559+12
 5674 0074 1868     		ldr	r0, [r3, #0]
 5675 0076 021D     		adds	r2, r0, #4
 5676 0078 1A60     		str	r2, [r3, #0]
 5677 007a EFE7     		b	.L530
 5678              	.LVL731:
 5679              	.L527:
2182:lib/ff/sdio_stm32f1.c ****           SDIO_WriteData(*(SrcBuffer + count));
 5680              		.loc 1 2182 0 discriminator 2
 5681 007c 574D     		ldr	r5, .L559+16
 5682 007e 2B68     		ldr	r3, [r5, #0]
 5683 0080 1859     		ldr	r0, [r3, r4]
 5684 0082 FFF7FEFF 		bl	SDIO_WriteData
 5685              	.LVL732:
 5686 0086 0434     		adds	r4, r4, #4
2180:lib/ff/sdio_stm32f1.c ****         for (count = 0; count < SD_HALFFIFO; count++)
 5687              		.loc 1 2180 0 discriminator 2
 5688 0088 202C     		cmp	r4, #32
 5689 008a F7D1     		bne	.L527
 5690              	.L556:
2185:lib/ff/sdio_stm32f1.c ****         SrcBuffer += SD_HALFFIFO;
 5691              		.loc 1 2185 0
 5692 008c 2968     		ldr	r1, [r5, #0]
 5693 008e 2031     		adds	r1, r1, #32
 5694 0090 2960     		str	r1, [r5, #0]
2186:lib/ff/sdio_stm32f1.c ****         NumberOfBytes += SD_HALFFIFOBYTES;
 5695              		.loc 1 2186 0
 5696 0092 514B     		ldr	r3, .L559+12
 5697 0094 1868     		ldr	r0, [r3, #0]
 5698 0096 2030     		adds	r0, r0, #32
 5699 0098 1860     		str	r0, [r3, #0]
 5700              	.LVL733:
 5701              	.L523:
2191:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_DATAEND) != RESET)
 5702              		.loc 1 2191 0
 5703 009a 4FF48070 		mov	r0, #256
 5704 009e FFF7FEFF 		bl	SDIO_GetITStatus
 5705              	.LVL734:
 5706 00a2 0446     		mov	r4, r0
 5707 00a4 0028     		cmp	r0, #0
 5708 00a6 37D0     		beq	.L532
2193:lib/ff/sdio_stm32f1.c ****     if (DeviceMode != SD_DMA_MODE)
 5709              		.loc 1 2193 0
 5710 00a8 484C     		ldr	r4, .L559
 5711 00aa 2368     		ldr	r3, [r4, #0]
 5712 00ac CBB9     		cbnz	r3, .L552
 5713              	.L536:
2203:lib/ff/sdio_stm32f1.c ****     if (StopCondition == 1)
 5714              		.loc 1 2203 0
 5715 00ae 4C4B     		ldr	r3, .L559+20
 5716 00b0 1C68     		ldr	r4, [r3, #0]
 5717 00b2 012C     		cmp	r4, #1
 5718 00b4 4B4C     		ldr	r4, .L559+24
 5719 00b6 1BD1     		bne	.L555
2205:lib/ff/sdio_stm32f1.c ****       TransferError = SD_StopTransfer();
 5720              		.loc 1 2205 0
 5721 00b8 FFF7FEFF 		bl	SD_StopTransfer
 5722              	.LVL735:
 5723 00bc 2070     		strb	r0, [r4, #0]
 5724 00be 19E0     		b	.L538
 5725              	.L558:
2195:lib/ff/sdio_stm32f1.c ****       while ((SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)  &&  (NumberOfBytes < TotalNumberOfByt
 5726              		.loc 1 2195 0 discriminator 2
 5727 00c0 454C     		ldr	r4, .L559+12
 5728 00c2 2068     		ldr	r0, [r4, #0]
 5729 00c4 434A     		ldr	r2, .L559+8
 5730 00c6 1168     		ldr	r1, [r2, #0]
 5731 00c8 8842     		cmp	r0, r1
 5732 00ca F0D2     		bcs	.L536
 5733              	.L537:
2197:lib/ff/sdio_stm32f1.c ****         *DestBuffer = SDIO_ReadData();
 5734              		.loc 1 2197 0
 5735 00cc 404D     		ldr	r5, .L559+4
 5736 00ce 2E68     		ldr	r6, [r5, #0]
 5737 00d0 FFF7FEFF 		bl	SDIO_ReadData
 5738              	.LVL736:
 5739 00d4 3060     		str	r0, [r6, #0]
2198:lib/ff/sdio_stm32f1.c ****         DestBuffer++;
 5740              		.loc 1 2198 0
 5741 00d6 2968     		ldr	r1, [r5, #0]
 5742 00d8 081D     		adds	r0, r1, #4
 5743 00da 2860     		str	r0, [r5, #0]
2199:lib/ff/sdio_stm32f1.c ****         NumberOfBytes += 4;
 5744              		.loc 1 2199 0
 5745 00dc 2368     		ldr	r3, [r4, #0]
 5746 00de 1A1D     		adds	r2, r3, #4
 5747 00e0 2260     		str	r2, [r4, #0]
 5748              	.L552:
2195:lib/ff/sdio_stm32f1.c ****       while ((SDIO_GetFlagStatus(SDIO_FLAG_RXDAVL) != RESET)  &&  (NumberOfBytes < TotalNumberOfByt
 5749              		.loc 1 2195 0 discriminator 1
 5750 00e2 4FF40010 		mov	r0, #2097152
 5751 00e6 FFF7FEFF 		bl	SDIO_GetFlagStatus
 5752              	.LVL737:
 5753 00ea 0028     		cmp	r0, #0
 5754 00ec E8D1     		bne	.L558
 5755 00ee DEE7     		b	.L536
 5756              	.L555:
2209:lib/ff/sdio_stm32f1.c ****       TransferError = SD_OK;
 5757              		.loc 1 2209 0
 5758 00f0 2A20     		movs	r0, #42
 5759 00f2 2070     		strb	r0, [r4, #0]
 5760              	.L538:
2211:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_DATAEND);
 5761              		.loc 1 2211 0
 5762 00f4 4FF48070 		mov	r0, #256
 5763 00f8 FFF7FEFF 		bl	SDIO_ClearITPendingBit
 5764              	.LVL738:
2212:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
 5765              		.loc 1 2212 0
 5766 00fc 4CF23A30 		movw	r0, #49978
 5767 0100 0021     		movs	r1, #0
 5768 0102 FFF7FEFF 		bl	SDIO_ITConfig
 5769              	.LVL739:
2215:lib/ff/sdio_stm32f1.c ****     TransferEnd = 1;
 5770              		.loc 1 2215 0
 5771 0106 0122     		movs	r2, #1
 5772 0108 3749     		ldr	r1, .L559+28
 5773 010a 0A60     		str	r2, [r1, #0]
2216:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
 5774              		.loc 1 2216 0
 5775 010c 0020     		movs	r0, #0
 5776 010e 324B     		ldr	r3, .L559+12
 5777 0110 1860     		str	r0, [r3, #0]
2217:lib/ff/sdio_stm32f1.c ****     return(TransferError);
 5778              		.loc 1 2217 0
 5779 0112 344A     		ldr	r2, .L559+24
 5780 0114 1078     		ldrb	r0, [r2, #0]	@ zero_extendqisi2
 5781 0116 70BD     		pop	{r4, r5, r6, pc}
 5782              	.L532:
2220:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_DCRCFAIL) != RESET)
 5783              		.loc 1 2220 0
 5784 0118 0220     		movs	r0, #2
 5785 011a FFF7FEFF 		bl	SDIO_GetITStatus
 5786              	.LVL740:
 5787 011e 0546     		mov	r5, r0
 5788 0120 58B1     		cbz	r0, .L540
2222:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_DCRCFAIL);
 5789              		.loc 1 2222 0
 5790 0122 0220     		movs	r0, #2
 5791 0124 FFF7FEFF 		bl	SDIO_ClearITPendingBit
 5792              	.LVL741:
2223:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
 5793              		.loc 1 2223 0
 5794 0128 4CF23A30 		movw	r0, #49978
 5795 012c 2146     		mov	r1, r4
 5796 012e FFF7FEFF 		bl	SDIO_ITConfig
 5797              	.LVL742:
2226:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
 5798              		.loc 1 2226 0
 5799 0132 294A     		ldr	r2, .L559+12
 5800 0134 1460     		str	r4, [r2, #0]
2227:lib/ff/sdio_stm32f1.c ****     TransferError = SD_DATA_CRC_FAIL;
 5801              		.loc 1 2227 0
 5802 0136 0220     		movs	r0, #2
 5803 0138 43E0     		b	.L557
 5804              	.L540:
2231:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_DTIMEOUT) != RESET)
 5805              		.loc 1 2231 0
 5806 013a 0820     		movs	r0, #8
 5807 013c FFF7FEFF 		bl	SDIO_GetITStatus
 5808              	.LVL743:
 5809 0140 0446     		mov	r4, r0
 5810 0142 58B1     		cbz	r0, .L541
2233:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_DTIMEOUT);
 5811              		.loc 1 2233 0
 5812 0144 0820     		movs	r0, #8
 5813 0146 FFF7FEFF 		bl	SDIO_ClearITPendingBit
 5814              	.LVL744:
2234:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
 5815              		.loc 1 2234 0
 5816 014a 4CF23A30 		movw	r0, #49978
 5817 014e 2946     		mov	r1, r5
 5818 0150 FFF7FEFF 		bl	SDIO_ITConfig
 5819              	.LVL745:
2237:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
 5820              		.loc 1 2237 0
 5821 0154 2048     		ldr	r0, .L559+12
 5822 0156 0560     		str	r5, [r0, #0]
2238:lib/ff/sdio_stm32f1.c ****     TransferError = SD_DATA_TIMEOUT;
 5823              		.loc 1 2238 0
 5824 0158 0420     		movs	r0, #4
 5825 015a 32E0     		b	.L557
 5826              	.L541:
2242:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_RXOVERR) != RESET)
 5827              		.loc 1 2242 0
 5828 015c 2020     		movs	r0, #32
 5829 015e FFF7FEFF 		bl	SDIO_GetITStatus
 5830              	.LVL746:
 5831 0162 0546     		mov	r5, r0
 5832 0164 58B1     		cbz	r0, .L542
2244:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_RXOVERR);
 5833              		.loc 1 2244 0
 5834 0166 2020     		movs	r0, #32
 5835 0168 FFF7FEFF 		bl	SDIO_ClearITPendingBit
 5836              	.LVL747:
2245:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
 5837              		.loc 1 2245 0
 5838 016c 4CF23A30 		movw	r0, #49978
 5839 0170 2146     		mov	r1, r4
 5840 0172 FFF7FEFF 		bl	SDIO_ITConfig
 5841              	.LVL748:
2248:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
 5842              		.loc 1 2248 0
 5843 0176 184B     		ldr	r3, .L559+12
 5844 0178 1C60     		str	r4, [r3, #0]
2249:lib/ff/sdio_stm32f1.c ****     TransferError = SD_RX_OVERRUN;
 5845              		.loc 1 2249 0
 5846 017a 0620     		movs	r0, #6
 5847 017c 21E0     		b	.L557
 5848              	.L542:
2253:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_TXUNDERR) != RESET)
 5849              		.loc 1 2253 0
 5850 017e 1020     		movs	r0, #16
 5851 0180 FFF7FEFF 		bl	SDIO_GetITStatus
 5852              	.LVL749:
 5853 0184 0446     		mov	r4, r0
 5854 0186 58B1     		cbz	r0, .L543
2255:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_TXUNDERR);
 5855              		.loc 1 2255 0
 5856 0188 1020     		movs	r0, #16
 5857 018a FFF7FEFF 		bl	SDIO_ClearITPendingBit
 5858              	.LVL750:
2256:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
 5859              		.loc 1 2256 0
 5860 018e 4CF23A30 		movw	r0, #49978
 5861 0192 2946     		mov	r1, r5
 5862 0194 FFF7FEFF 		bl	SDIO_ITConfig
 5863              	.LVL751:
2259:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
 5864              		.loc 1 2259 0
 5865 0198 0F49     		ldr	r1, .L559+12
 5866 019a 0D60     		str	r5, [r1, #0]
2260:lib/ff/sdio_stm32f1.c ****     TransferError = SD_TX_UNDERRUN;
 5867              		.loc 1 2260 0
 5868 019c 0520     		movs	r0, #5
 5869 019e 10E0     		b	.L557
 5870              	.L543:
2264:lib/ff/sdio_stm32f1.c ****   if (SDIO_GetITStatus(SDIO_IT_STBITERR) != RESET)
 5871              		.loc 1 2264 0
 5872 01a0 4FF40070 		mov	r0, #512
 5873 01a4 FFF7FEFF 		bl	SDIO_GetITStatus
 5874              	.LVL752:
 5875 01a8 70B1     		cbz	r0, .L545
2266:lib/ff/sdio_stm32f1.c ****     SDIO_ClearITPendingBit(SDIO_IT_STBITERR);
 5876              		.loc 1 2266 0
 5877 01aa 4FF40070 		mov	r0, #512
 5878 01ae FFF7FEFF 		bl	SDIO_ClearITPendingBit
 5879              	.LVL753:
2267:lib/ff/sdio_stm32f1.c ****     SDIO_ITConfig(SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND |
 5880              		.loc 1 2267 0
 5881 01b2 4CF23A30 		movw	r0, #49978
 5882 01b6 2146     		mov	r1, r4
 5883 01b8 FFF7FEFF 		bl	SDIO_ITConfig
 5884              	.LVL754:
2270:lib/ff/sdio_stm32f1.c ****     NumberOfBytes = 0;
 5885              		.loc 1 2270 0
 5886 01bc 064A     		ldr	r2, .L559+12
 5887 01be 1460     		str	r4, [r2, #0]
2271:lib/ff/sdio_stm32f1.c ****     TransferError = SD_START_BIT_ERR;
 5888              		.loc 1 2271 0
 5889 01c0 0720     		movs	r0, #7
 5890              	.L557:
 5891 01c2 0849     		ldr	r1, .L559+24
 5892 01c4 0870     		strb	r0, [r1, #0]
2272:lib/ff/sdio_stm32f1.c ****     return(SD_START_BIT_ERR);
 5893              		.loc 1 2272 0
 5894 01c6 70BD     		pop	{r4, r5, r6, pc}
 5895              	.L545:
2275:lib/ff/sdio_stm32f1.c ****   return(SD_OK);
 5896              		.loc 1 2275 0
 5897 01c8 2A20     		movs	r0, #42
2276:lib/ff/sdio_stm32f1.c **** }
 5898              		.loc 1 2276 0
 5899 01ca 70BD     		pop	{r4, r5, r6, pc}
 5900              	.L560:
 5901              		.align	2
 5902              	.L559:
 5903 01cc 00000000 		.word	.LANCHOR7
 5904 01d0 00000000 		.word	.LANCHOR13
 5905 01d4 00000000 		.word	.LANCHOR11
 5906 01d8 00000000 		.word	.LANCHOR15
 5907 01dc 00000000 		.word	.LANCHOR14
 5908 01e0 00000000 		.word	.LANCHOR12
 5909 01e4 00000000 		.word	.LANCHOR9
 5910 01e8 00000000 		.word	.LANCHOR10
 5911              		.cfi_endproc
 5912              	.LFE77:
 5914              		.section	.text.SDIO_IRQHandler,"ax",%progbits
 5915              		.align	1
 5916              		.global	SDIO_IRQHandler
 5917              		.thumb
 5918              		.thumb_func
 5920              	SDIO_IRQHandler:
 5921              	.LFB91:
3149:lib/ff/sdio_stm32f1.c **** {
 5922              		.loc 1 3149 0
 5923              		.cfi_startproc
 5924              		@ args = 0, pretend = 0, frame = 0
 5925              		@ frame_needed = 0, uses_anonymous_args = 0
 5926              		@ link register save eliminated.
3152:lib/ff/sdio_stm32f1.c **** }
 5927              		.loc 1 3152 0
3151:lib/ff/sdio_stm32f1.c ****   SD_ProcessIRQSrc();
 5928              		.loc 1 3151 0
 5929 0000 FFF7FEBF 		b	SD_ProcessIRQSrc
 5930              	.LVL755:
 5931              		.cfi_endproc
 5932              	.LFE91:
 5934              		.section	.text.SD_GetCardStatus,"ax",%progbits
 5935              		.align	1
 5936              		.global	SD_GetCardStatus
 5937              		.thumb
 5938              		.thumb_func
 5940              	SD_GetCardStatus:
 5941              	.LFB92:
3165:lib/ff/sdio_stm32f1.c **** {
 5942              		.loc 1 3165 0
 5943              		.cfi_startproc
 5944              		@ args = 0, pretend = 0, frame = 0
 5945              		@ frame_needed = 0, uses_anonymous_args = 0
 5946              	.LVL756:
 5947 0000 38B5     		push	{r3, r4, r5, lr}
 5948              	.LCFI30:
 5949              		.cfi_def_cfa_offset 16
 5950              		.cfi_offset 3, -16
 5951              		.cfi_offset 4, -12
 5952              		.cfi_offset 5, -8
 5953              		.cfi_offset 14, -4
 5954 0002 0446     		mov	r4, r0
 5955              	.LVL757:
3169:lib/ff/sdio_stm32f1.c ****   errorstatus = SD_SendSDStatus((uint32_t *)SDSTATUS_Tab);
 5956              		.loc 1 3169 0
 5957 0004 1E4D     		ldr	r5, .L564
 5958 0006 2846     		mov	r0, r5
 5959              	.LVL758:
 5960 0008 FFF7FEFF 		bl	SD_SendSDStatus
 5961              	.LVL759:
3171:lib/ff/sdio_stm32f1.c ****   if (errorstatus  != SD_OK)
 5962              		.loc 1 3171 0
 5963 000c 2A28     		cmp	r0, #42
 5964 000e 35D1     		bne	.L563
3177:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[0] & 0xC0) >> 6);
 5965              		.loc 1 3177 0
 5966 0010 2B78     		ldrb	r3, [r5, #0]	@ zero_extendqisi2
 5967 0012 9909     		lsrs	r1, r3, #6
 5968              	.LVL760:
3178:lib/ff/sdio_stm32f1.c ****   cardstatus->DAT_BUS_WIDTH = tmp;
 5969              		.loc 1 3178 0
 5970 0014 2170     		strb	r1, [r4, #0]
3181:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[0] & 0x20) >> 5);
 5971              		.loc 1 3181 0
 5972 0016 2A78     		ldrb	r2, [r5, #0]	@ zero_extendqisi2
 5973 0018 C2F34013 		ubfx	r3, r2, #5, #1
 5974              	.LVL761:
3182:lib/ff/sdio_stm32f1.c ****   cardstatus->SECURED_MODE = tmp;
 5975              		.loc 1 3182 0
 5976 001c 6370     		strb	r3, [r4, #1]
 5977              	.LVL762:
3186:lib/ff/sdio_stm32f1.c ****   cardstatus->SD_CARD_TYPE = tmp << 8;
 5978              		.loc 1 3186 0
 5979 001e A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
 5980 0020 0A02     		lsls	r2, r1, #8
 5981 0022 6280     		strh	r2, [r4, #2]	@ movhi
 5982              	.LVL763:
3190:lib/ff/sdio_stm32f1.c ****   cardstatus->SD_CARD_TYPE |= tmp;
 5983              		.loc 1 3190 0
 5984 0024 6388     		ldrh	r3, [r4, #2]
 5985 0026 99B2     		uxth	r1, r3
 5986 0028 EA78     		ldrb	r2, [r5, #3]	@ zero_extendqisi2
 5987 002a 1143     		orrs	r1, r1, r2
 5988 002c 6180     		strh	r1, [r4, #2]	@ movhi
 5989              	.LVL764:
3194:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA = tmp << 24;
 5990              		.loc 1 3194 0
 5991 002e 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 5992 0030 1906     		lsls	r1, r3, #24
 5993 0032 6160     		str	r1, [r4, #4]
 5994              	.LVL765:
3198:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA |= tmp << 16;
 5995              		.loc 1 3198 0
 5996 0034 6368     		ldr	r3, [r4, #4]
 5997 0036 6A79     		ldrb	r2, [r5, #5]	@ zero_extendqisi2
 5998 0038 43EA0241 		orr	r1, r3, r2, lsl #16
 5999 003c 6160     		str	r1, [r4, #4]
 6000              	.LVL766:
3202:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA |= tmp << 8;
 6001              		.loc 1 3202 0
 6002 003e 6368     		ldr	r3, [r4, #4]
 6003 0040 AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 6004 0042 43EA0221 		orr	r1, r3, r2, lsl #8
 6005 0046 6160     		str	r1, [r4, #4]
 6006              	.LVL767:
3206:lib/ff/sdio_stm32f1.c ****   cardstatus->SIZE_OF_PROTECTED_AREA |= tmp;
 6007              		.loc 1 3206 0
 6008 0048 6368     		ldr	r3, [r4, #4]
 6009 004a EA79     		ldrb	r2, [r5, #7]	@ zero_extendqisi2
 6010 004c 42EA0301 		orr	r1, r2, r3
 6011 0050 6160     		str	r1, [r4, #4]
3209:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[8] & 0xFF));
 6012              		.loc 1 3209 0
 6013 0052 2B7A     		ldrb	r3, [r5, #8]	@ zero_extendqisi2
 6014              	.LVL768:
3210:lib/ff/sdio_stm32f1.c ****   cardstatus->SPEED_CLASS = tmp;
 6015              		.loc 1 3210 0
 6016 0054 2372     		strb	r3, [r4, #8]
3213:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[9] & 0xFF));
 6017              		.loc 1 3213 0
 6018 0056 6A7A     		ldrb	r2, [r5, #9]	@ zero_extendqisi2
 6019              	.LVL769:
3214:lib/ff/sdio_stm32f1.c ****   cardstatus->PERFORMANCE_MOVE = tmp;
 6020              		.loc 1 3214 0
 6021 0058 6272     		strb	r2, [r4, #9]
3217:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[10] & 0xF0) >> 4);
 6022              		.loc 1 3217 0
 6023 005a A97A     		ldrb	r1, [r5, #10]	@ zero_extendqisi2
 6024 005c 0B09     		lsrs	r3, r1, #4
 6025              	.LVL770:
3218:lib/ff/sdio_stm32f1.c ****   cardstatus->AU_SIZE = tmp;
 6026              		.loc 1 3218 0
 6027 005e A372     		strb	r3, [r4, #10]
 6028              	.LVL771:
3222:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_SIZE = tmp << 8;
 6029              		.loc 1 3222 0
 6030 0060 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
 6031 0062 1102     		lsls	r1, r2, #8
 6032 0064 A181     		strh	r1, [r4, #12]	@ movhi
 6033              	.LVL772:
3226:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_SIZE |= tmp;
 6034              		.loc 1 3226 0
 6035 0066 A389     		ldrh	r3, [r4, #12]
 6036 0068 99B2     		uxth	r1, r3
 6037 006a 2A7B     		ldrb	r2, [r5, #12]	@ zero_extendqisi2
 6038 006c 1143     		orrs	r1, r1, r2
 6039 006e A181     		strh	r1, [r4, #12]	@ movhi
3229:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[13] & 0xFC) >> 2);
 6040              		.loc 1 3229 0
 6041 0070 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 6042 0072 9908     		lsrs	r1, r3, #2
 6043              	.LVL773:
3230:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_TIMEOUT = tmp;
 6044              		.loc 1 3230 0
 6045 0074 A173     		strb	r1, [r4, #14]
3233:lib/ff/sdio_stm32f1.c ****   tmp = (uint8_t)((SDSTATUS_Tab[13] & 0x3));
 6046              		.loc 1 3233 0
 6047 0076 03F00302 		and	r2, r3, #3
 6048              	.LVL774:
3234:lib/ff/sdio_stm32f1.c ****   cardstatus->ERASE_OFFSET = tmp;
 6049              		.loc 1 3234 0
 6050 007a E273     		strb	r2, [r4, #15]
 6051              	.LVL775:
 6052              	.L563:
 6053              		.loc 1 3237 0
 6054 007c 38BD     		pop	{r3, r4, r5, pc}
 6055              	.L565:
 6056 007e 00BF     		.align	2
 6057              	.L564:
 6058 0080 00000000 		.word	.LANCHOR16
 6059              		.cfi_endproc
 6060              	.LFE92:
 6062              		.global	SDIO_DataInitStructure
 6063              		.global	SDIO_CmdInitStructure
 6064              		.global	SDIO_InitStructure
 6065              		.global	SDCardInfo
 6066              		.global	NumberOfBytes
 6067              		.global	TransferEnd
 6068              		.global	TransferError
 6069              		.global	DestBuffer
 6070              		.global	SrcBuffer
 6071              		.section	.bss.SDIO_DataInitStructure,"aw",%nobits
 6072              		.align	2
 6073              		.set	.LANCHOR2,. + 0
 6076              	SDIO_DataInitStructure:
 6077 0000 00000000 		.space	24
 6077      00000000 
 6077      00000000 
 6077      00000000 
 6077      00000000 
 6078              		.section	.bss.CSD_Tab,"aw",%nobits
 6079              		.align	2
 6080              		.set	.LANCHOR6,. + 0
 6083              	CSD_Tab:
 6084 0000 00000000 		.space	16
 6084      00000000 
 6084      00000000 
 6084      00000000 
 6085              		.section	.bss.SDCardInfo,"aw",%nobits
 6086              		.align	3
 6087              		.set	.LANCHOR8,. + 0
 6090              	SDCardInfo:
 6091 0000 00000000 		.space	88
 6091      00000000 
 6091      00000000 
 6091      00000000 
 6091      00000000 
 6092              		.section	.bss.NumberOfBytes,"aw",%nobits
 6093              		.align	2
 6094              		.set	.LANCHOR15,. + 0
 6097              	NumberOfBytes:
 6098 0000 00000000 		.space	4
 6099              		.section	.bss.SDSTATUS_Tab,"aw",%nobits
 6100              		.set	.LANCHOR16,. + 0
 6103              	SDSTATUS_Tab:
 6104 0000 00000000 		.space	16
 6104      00000000 
 6104      00000000 
 6104      00000000 
 6105              		.section	.bss.CardType,"aw",%nobits
 6106              		.align	2
 6107              		.set	.LANCHOR4,. + 0
 6110              	CardType:
 6111 0000 00000000 		.space	4
 6112              		.section	.bss.CID_Tab,"aw",%nobits
 6113              		.align	2
 6114              		.set	.LANCHOR5,. + 0
 6117              	CID_Tab:
 6118 0000 00000000 		.space	16
 6118      00000000 
 6118      00000000 
 6118      00000000 
 6119              		.section	.bss.TransferEnd,"aw",%nobits
 6120              		.align	2
 6121              		.set	.LANCHOR10,. + 0
 6124              	TransferEnd:
 6125 0000 00000000 		.space	4
 6126              		.section	.bss.DestBuffer,"aw",%nobits
 6127              		.align	2
 6128              		.set	.LANCHOR13,. + 0
 6131              	DestBuffer:
 6132 0000 00000000 		.space	4
 6133              		.section	.bss.SDIO_InitStructure,"aw",%nobits
 6134              		.align	2
 6135              		.set	.LANCHOR3,. + 0
 6138              	SDIO_InitStructure:
 6139 0000 00000000 		.space	24
 6139      00000000 
 6139      00000000 
 6139      00000000 
 6139      00000000 
 6140              		.section	.bss.SrcBuffer,"aw",%nobits
 6141              		.align	2
 6142              		.set	.LANCHOR14,. + 0
 6145              	SrcBuffer:
 6146 0000 00000000 		.space	4
 6147              		.section	.bss.RCA,"aw",%nobits
 6148              		.align	2
 6149              		.set	.LANCHOR1,. + 0
 6152              	RCA:
 6153 0000 00000000 		.space	4
 6154              		.section	.data.TransferError,"aw",%progbits
 6155              		.set	.LANCHOR9,. + 0
 6158              	TransferError:
 6159 0000 2A       		.byte	42
 6160              		.section	.bss.TotalNumberOfBytes,"aw",%nobits
 6161              		.align	2
 6162              		.set	.LANCHOR11,. + 0
 6165              	TotalNumberOfBytes:
 6166 0000 00000000 		.space	4
 6167              		.section	.bss.SDIO_CmdInitStructure,"aw",%nobits
 6168              		.align	2
 6169              		.set	.LANCHOR0,. + 0
 6172              	SDIO_CmdInitStructure:
 6173 0000 00000000 		.space	20
 6173      00000000 
 6173      00000000 
 6173      00000000 
 6173      00000000 
 6174              		.section	.data.DeviceMode,"aw",%progbits
 6175              		.align	2
 6176              		.set	.LANCHOR7,. + 0
 6179              	DeviceMode:
 6180 0000 02000000 		.word	2
 6181              		.section	.bss.StopCondition,"aw",%nobits
 6182              		.align	2
 6183              		.set	.LANCHOR12,. + 0
 6186              	StopCondition:
 6187 0000 00000000 		.space	4
 6188              		.text
 6189              	.Letext0:
 6190              		.file 2 "c:\\devz\\arm\\launchpad\\bin\\../lib/gcc/arm-none-eabi/4.7.3/include/stdint-gcc.h"
 6191              		.file 3 "./lib/CMSIS/Device/ST/STM32F10x/Include/stm32f10x.h"
 6192              		.file 4 "./lib/STM32F10x_StdPeriph_Driver/inc/stm32f10x_dma.h"
 6193              		.file 5 "./lib/STM32F10x_StdPeriph_Driver/inc/stm32f10x_gpio.h"
 6194              		.file 6 "./lib/STM32F10x_StdPeriph_Driver/inc/stm32f10x_sdio.h"
 6195              		.file 7 "./lib/STM32F10x_StdPeriph_Driver/inc/misc.h"
 6196              		.file 8 "lib/ff/sdio_stm32f1.h"
 6197              		.file 9 "./lib/CMSIS/Include/core_cm3.h"
 6198              		.file 10 "./lib/STM32F10x_StdPeriph_Driver/inc/stm32f10x_rcc.h"
DEFINED SYMBOLS
                            *ABS*:00000000 sdio_stm32f1.c
  R:\TEMP\ccKyoqqo.s:19     .text.CmdResp2Error:00000000 $t
  R:\TEMP\ccKyoqqo.s:23     .text.CmdResp2Error:00000000 CmdResp2Error
  R:\TEMP\ccKyoqqo.s:83     .text.CmdResp2Error:00000034 $d
  R:\TEMP\ccKyoqqo.s:88     .text.IsCardProgramming:00000000 $t
  R:\TEMP\ccKyoqqo.s:92     .text.IsCardProgramming:00000000 IsCardProgramming
  R:\TEMP\ccKyoqqo.s:367    .text.IsCardProgramming:0000014c $d
  R:\TEMP\ccKyoqqo.s:375    .text.unlikely.SD_LowLevel_DMA_TxConfig:00000000 $t
  R:\TEMP\ccKyoqqo.s:379    .text.unlikely.SD_LowLevel_DMA_TxConfig:00000000 SD_LowLevel_DMA_TxConfig
  R:\TEMP\ccKyoqqo.s:456    .text.unlikely.SD_LowLevel_DMA_TxConfig:00000058 $d
  R:\TEMP\ccKyoqqo.s:463    .text.unlikely.SD_LowLevel_DMA_RxConfig:00000000 $t
  R:\TEMP\ccKyoqqo.s:467    .text.unlikely.SD_LowLevel_DMA_RxConfig:00000000 SD_LowLevel_DMA_RxConfig
  R:\TEMP\ccKyoqqo.s:543    .text.unlikely.SD_LowLevel_DMA_RxConfig:00000058 $d
  R:\TEMP\ccKyoqqo.s:550    .text.CmdResp1Error:00000000 $t
  R:\TEMP\ccKyoqqo.s:554    .text.CmdResp1Error:00000000 CmdResp1Error
  R:\TEMP\ccKyoqqo.s:806    .text.CmdResp1Error:000000ec $d
  R:\TEMP\ccKyoqqo.s:812    .text.SDEnWideBus:00000000 $t
  R:\TEMP\ccKyoqqo.s:816    .text.SDEnWideBus:00000000 SDEnWideBus
  R:\TEMP\ccKyoqqo.s:1166   .text.SDEnWideBus:000001dc $d
  R:\TEMP\ccKyoqqo.s:1175   .text.SD_DeInit:00000000 $t
  R:\TEMP\ccKyoqqo.s:1180   .text.SD_DeInit:00000000 SD_DeInit
  R:\TEMP\ccKyoqqo.s:1232   .text.SD_DeInit:00000044 $d
  R:\TEMP\ccKyoqqo.s:1238   .text.SD_Detect:00000000 $t
  R:\TEMP\ccKyoqqo.s:1243   .text.SD_Detect:00000000 SD_Detect
  R:\TEMP\ccKyoqqo.s:1268   .text.SD_PowerON:00000000 $t
  R:\TEMP\ccKyoqqo.s:1273   .text.SD_PowerON:00000000 SD_PowerON
  R:\TEMP\ccKyoqqo.s:1622   .text.SD_PowerON:0000019c $d
  R:\TEMP\ccKyoqqo.s:1630   .text.SD_PowerOFF:00000000 $t
  R:\TEMP\ccKyoqqo.s:1635   .text.SD_PowerOFF:00000000 SD_PowerOFF
  R:\TEMP\ccKyoqqo.s:1658   .text.SD_InitializeCards:00000000 $t
  R:\TEMP\ccKyoqqo.s:1663   .text.SD_InitializeCards:00000000 SD_InitializeCards
  R:\TEMP\ccKyoqqo.s:1942   .text.SD_InitializeCards:0000014c $d
  R:\TEMP\ccKyoqqo.s:1952   .text.SD_GetCardInfo:00000000 $t
  R:\TEMP\ccKyoqqo.s:1957   .text.SD_GetCardInfo:00000000 SD_GetCardInfo
  R:\TEMP\ccKyoqqo.s:2380   .text.SD_GetCardInfo:0000027c $d
  R:\TEMP\ccKyoqqo.s:2388   .text.SD_EnableWideBusOperation:00000000 $t
  R:\TEMP\ccKyoqqo.s:2393   .text.SD_EnableWideBusOperation:00000000 SD_EnableWideBusOperation
  R:\TEMP\ccKyoqqo.s:2499   .text.SD_EnableWideBusOperation:0000006c $d
  R:\TEMP\ccKyoqqo.s:2505   .text.SD_SetDeviceMode:00000000 $t
  R:\TEMP\ccKyoqqo.s:2510   .text.SD_SetDeviceMode:00000000 SD_SetDeviceMode
  R:\TEMP\ccKyoqqo.s:2539   .text.SD_SetDeviceMode:00000010 $d
  R:\TEMP\ccKyoqqo.s:2544   .text.SD_SelectDeselect:00000000 $t
  R:\TEMP\ccKyoqqo.s:2549   .text.SD_SelectDeselect:00000000 SD_SelectDeselect
  R:\TEMP\ccKyoqqo.s:2592   .text.SD_SelectDeselect:00000028 $d
  R:\TEMP\ccKyoqqo.s:2597   .text.SD_Init:00000000 $t
  R:\TEMP\ccKyoqqo.s:2602   .text.SD_Init:00000000 SD_Init
  R:\TEMP\ccKyoqqo.s:2753   .text.SD_Init:000000c8 $d
  R:\TEMP\ccKyoqqo.s:2763   .text.SD_ReadBlock:00000000 $t
  R:\TEMP\ccKyoqqo.s:2768   .text.SD_ReadBlock:00000000 SD_ReadBlock
  R:\TEMP\ccKyoqqo.s:3161   .text.SD_ReadBlock:000001fc $d
  R:\TEMP\ccKyoqqo.s:3177   .text.SD_ReadMultiBlocks:00000000 $t
  R:\TEMP\ccKyoqqo.s:3182   .text.SD_ReadMultiBlocks:00000000 SD_ReadMultiBlocks
  R:\TEMP\ccKyoqqo.s:3635   .text.SD_ReadMultiBlocks:00000264 $d
  R:\TEMP\ccKyoqqo.s:3651   .text.SD_WriteBlock:00000000 $t
  R:\TEMP\ccKyoqqo.s:3656   .text.SD_WriteBlock:00000000 SD_WriteBlock
  R:\TEMP\ccKyoqqo.s:4179   .text.SD_WriteBlock:000002c0 $d
  R:\TEMP\ccKyoqqo.s:4196   .text.SD_WriteMultiBlocks:00000000 $t
  R:\TEMP\ccKyoqqo.s:4201   .text.SD_WriteMultiBlocks:00000000 SD_WriteMultiBlocks
  R:\TEMP\ccKyoqqo.s:4726   .text.SD_WriteMultiBlocks:000002cc $d
  R:\TEMP\ccKyoqqo.s:4740   .text.SD_WriteMultiBlocks:000002fc $t
  R:\TEMP\ccKyoqqo.s:4835   .text.SD_WriteMultiBlocks:00000374 $d
  R:\TEMP\ccKyoqqo.s:4842   .text.SD_GetTransferState:00000000 $t
  R:\TEMP\ccKyoqqo.s:4847   .text.SD_GetTransferState:00000000 SD_GetTransferState
  R:\TEMP\ccKyoqqo.s:4866   .text.SD_GetTransferState:00000010 $d
  R:\TEMP\ccKyoqqo.s:4871   .text.SD_StopTransfer:00000000 $t
  R:\TEMP\ccKyoqqo.s:4876   .text.SD_StopTransfer:00000000 SD_StopTransfer
  R:\TEMP\ccKyoqqo.s:4915   .text.SD_StopTransfer:00000028 $d
  R:\TEMP\ccKyoqqo.s:4920   .text.SD_Erase:00000000 $t
  R:\TEMP\ccKyoqqo.s:4925   .text.SD_Erase:00000000 SD_Erase
  R:\TEMP\ccKyoqqo.s:5117   .text.SD_Erase:000000e0 $d
  R:\TEMP\ccKyoqqo.s:5126   .text.SD_SendStatus:00000000 $t
  R:\TEMP\ccKyoqqo.s:5131   .text.SD_SendStatus:00000000 SD_SendStatus
  R:\TEMP\ccKyoqqo.s:5200   .text.SD_SendStatus:00000044 $d
  R:\TEMP\ccKyoqqo.s:5206   .text.SD_GetState:00000000 $t
  R:\TEMP\ccKyoqqo.s:5211   .text.SD_GetState:00000000 SD_GetState
  R:\TEMP\ccKyoqqo.s:5264   .text.SD_GetStatus:00000000 $t
  R:\TEMP\ccKyoqqo.s:5269   .text.SD_GetStatus:00000000 SD_GetStatus
  R:\TEMP\ccKyoqqo.s:5305   .text.SD_SendSDStatus:00000000 $t
  R:\TEMP\ccKyoqqo.s:5310   .text.SD_SendSDStatus:00000000 SD_SendSDStatus
  R:\TEMP\ccKyoqqo.s:5565   .text.SD_SendSDStatus:00000154 $d
  R:\TEMP\ccKyoqqo.s:5574   .text.SD_ProcessIRQSrc:00000000 $t
  R:\TEMP\ccKyoqqo.s:5579   .text.SD_ProcessIRQSrc:00000000 SD_ProcessIRQSrc
  R:\TEMP\ccKyoqqo.s:5903   .text.SD_ProcessIRQSrc:000001cc $d
  R:\TEMP\ccKyoqqo.s:5915   .text.SDIO_IRQHandler:00000000 $t
  R:\TEMP\ccKyoqqo.s:5920   .text.SDIO_IRQHandler:00000000 SDIO_IRQHandler
  R:\TEMP\ccKyoqqo.s:5935   .text.SD_GetCardStatus:00000000 $t
  R:\TEMP\ccKyoqqo.s:5940   .text.SD_GetCardStatus:00000000 SD_GetCardStatus
  R:\TEMP\ccKyoqqo.s:6058   .text.SD_GetCardStatus:00000080 $d
  R:\TEMP\ccKyoqqo.s:6076   .bss.SDIO_DataInitStructure:00000000 SDIO_DataInitStructure
  R:\TEMP\ccKyoqqo.s:6172   .bss.SDIO_CmdInitStructure:00000000 SDIO_CmdInitStructure
  R:\TEMP\ccKyoqqo.s:6138   .bss.SDIO_InitStructure:00000000 SDIO_InitStructure
  R:\TEMP\ccKyoqqo.s:6090   .bss.SDCardInfo:00000000 SDCardInfo
  R:\TEMP\ccKyoqqo.s:6097   .bss.NumberOfBytes:00000000 NumberOfBytes
  R:\TEMP\ccKyoqqo.s:6124   .bss.TransferEnd:00000000 TransferEnd
  R:\TEMP\ccKyoqqo.s:6158   .data.TransferError:00000000 TransferError
  R:\TEMP\ccKyoqqo.s:6131   .bss.DestBuffer:00000000 DestBuffer
  R:\TEMP\ccKyoqqo.s:6145   .bss.SrcBuffer:00000000 SrcBuffer
  R:\TEMP\ccKyoqqo.s:6072   .bss.SDIO_DataInitStructure:00000000 $d
  R:\TEMP\ccKyoqqo.s:6079   .bss.CSD_Tab:00000000 $d
  R:\TEMP\ccKyoqqo.s:6083   .bss.CSD_Tab:00000000 CSD_Tab
  R:\TEMP\ccKyoqqo.s:6086   .bss.SDCardInfo:00000000 $d
  R:\TEMP\ccKyoqqo.s:6093   .bss.NumberOfBytes:00000000 $d
  R:\TEMP\ccKyoqqo.s:6103   .bss.SDSTATUS_Tab:00000000 SDSTATUS_Tab
  R:\TEMP\ccKyoqqo.s:6104   .bss.SDSTATUS_Tab:00000000 $d
  R:\TEMP\ccKyoqqo.s:6106   .bss.CardType:00000000 $d
  R:\TEMP\ccKyoqqo.s:6110   .bss.CardType:00000000 CardType
  R:\TEMP\ccKyoqqo.s:6113   .bss.CID_Tab:00000000 $d
  R:\TEMP\ccKyoqqo.s:6117   .bss.CID_Tab:00000000 CID_Tab
  R:\TEMP\ccKyoqqo.s:6120   .bss.TransferEnd:00000000 $d
  R:\TEMP\ccKyoqqo.s:6127   .bss.DestBuffer:00000000 $d
  R:\TEMP\ccKyoqqo.s:6134   .bss.SDIO_InitStructure:00000000 $d
  R:\TEMP\ccKyoqqo.s:6141   .bss.SrcBuffer:00000000 $d
  R:\TEMP\ccKyoqqo.s:6148   .bss.RCA:00000000 $d
  R:\TEMP\ccKyoqqo.s:6152   .bss.RCA:00000000 RCA
  R:\TEMP\ccKyoqqo.s:6161   .bss.TotalNumberOfBytes:00000000 $d
  R:\TEMP\ccKyoqqo.s:6165   .bss.TotalNumberOfBytes:00000000 TotalNumberOfBytes
  R:\TEMP\ccKyoqqo.s:6168   .bss.SDIO_CmdInitStructure:00000000 $d
  R:\TEMP\ccKyoqqo.s:6175   .data.DeviceMode:00000000 $d
  R:\TEMP\ccKyoqqo.s:6179   .data.DeviceMode:00000000 DeviceMode
  R:\TEMP\ccKyoqqo.s:6182   .bss.StopCondition:00000000 $d
  R:\TEMP\ccKyoqqo.s:6186   .bss.StopCondition:00000000 StopCondition
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
SDIO_ClearFlag
SDIO_SendCommand
SDIO_GetCommandResponse
SDIO_GetResponse
DMA_ClearFlag
DMA_Cmd
DMA_Init
SDIO_DataConfig
SDIO_GetFlagStatus
SDIO_ReadData
SDIO_ClockCmd
SDIO_SetPowerState
SDIO_DeInit
RCC_AHBPeriphClockCmd
GPIO_Init
SDIO_Init
SDIO_GetPowerState
RCC_APB2PeriphClockCmd
NVIC_Init
SDIO_DMACmd
SDIO_ITConfig
DMA_GetFlagStatus
SDIO_WriteData
SDIO_GetITStatus
SDIO_ClearITPendingBit
